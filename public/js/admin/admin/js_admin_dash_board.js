$(document).on("click",".chart-search-icon",function(){var a=$(this).attr("aria-chart-id");if(DB_pivot_data_JSON[a])var b=DB_pivot_data_JSON[a];else if(DB_data_list_JSON[a])b=DB_data_list_JSON[a];else return alert("Search not found..!"),!1;$("#"+b.gridID).jqGrid("searchGrid",{multipleSearch:!0,width:600,height:275,closeOnEscape:!0,modal:!0,closeAfterSearch:!0,onSearch:function(){DB_block_config_JSON[a].ajaxUpdate="No";clearInterval(DB_block_config_JSON[a].clearID)},onReset:function(){DB_block_config_JSON[a].ajaxUpdate=
"No";clearInterval(DB_block_config_JSON[a].clearID)}})});
$(document).on("click",".chart-refresh-icon",function(){var a=$(this).attr("aria-chart-id");if("Yes"==DB_block_config_JSON[a].ajaxUpdate){var b=admin_url+cus_enc_url_json.autoload_dashboard;$("#board_loader_icon_"+a).show();$.ajax({url:b,type:"POST",data:{code:$("#vBoardCode_"+a).val()},success:function(b){b&&(clearInterval(DB_block_config_JSON[a].clearID),initDashBoardAutoLoad(a),autoLoadDashboardBlock(a,b,DB_block_config_JSON[a].chartType))}})}else{if(DB_pivot_data_JSON[a])b=DB_pivot_data_JSON[a];
else if(DB_data_list_JSON[a])b=DB_data_list_JSON[a];else return alert("Filters not found..!"),!1;b=b.gridID;$("#"+b).jqGrid("setGridParam",{search:!1,resetsearch:!0});var c=$("#"+b).jqGrid("getGridParam","postData");$.extend(c,{filters:""});$("#"+b).trigger("reloadGrid",[{page:1}]);DB_block_config_JSON[a].ajaxUpdate="Yes"}});$(document).on("click",".chart-back-link",function(){var a=$(this).attr("aria-chart-id"),b=$("#chart_preview_"+a).attr("aria-chart-type");generateBoardContent(a,b,!0)});
$(document).on("change",".daggr-filter",function(){var a=$(this).val(),b=$(this).attr("aria-chart-id"),c=$("#chart_preview_"+b).attr("aria-chart-type");$("#chart_preview_"+b).attr("aria-chart-aggr",a);generateBoardContent(b,c,!0)});
$(document).on("change",".dpie-filter",function(){var a=$(this).attr("aria-chart-id");var b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-type"),e=$("#chart_preview_"+a).attr("aria-chart-aggr");"donut"==c?(a=getDonutChartOptions(a,e,b),plotDonutChartDiagram(a)):(a=getPieChartOptions(a,e,b),plotPieChartDiagram(a))});
$(document).on("click",".bar-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","bar");$("#dbacklink_"+a).show();a=getBarChartOptions(a,c,b);plotBarChartDiagram(a)});
$(document).on("click",".pie-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","pie");$("#dbacklink_"+a).show();a=getPieChartOptions(a,c,b);plotPieChartDiagram(a)});
$(document).on("click",".donut-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","donut");$("#dbacklink_"+a).show();a=getDonutChartOptions(a,c,b);plotDonutChartDiagram(a)});
$(document).on("click",".area-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","area");$("#dbacklink_"+a).show();a=getAreaChartOptions(a,c,b);plotAreaChartDiagram(a)});
$(document).on("click",".line-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","line");$("#dbacklink_"+a).show();a=getLineChartOptions(a,c,b);plotLineChartDiagram(a)});
$(document).on("click",".horizbar-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","horizbar");$("#dbacklink_"+a).show();a=getHorizontalBarChartOptions(a,c,b);plotHorizontalBarChartDiagram(a)});
$(document).on("click",".stackbar-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","stackbar");$("#dbacklink_"+a).show();a=getStackedBarChartOptions(a,c,b);plotStackedBarChartDiagram(a)});
$(document).on("click",".stackhorizbar-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","stackhorizbar");$("#dbacklink_"+a).show();a=getStackedHorizBarChartOptions(a,c,b);plotStackedHorizBarChartDiagram(a)});
$(document).on("click",".autoupdating-chart-child",function(){var a=$(this).attr("aria-chart-id"),b=$(this).attr("aria-chart-row"),c=$("#chart_preview_"+a).attr("aria-chart-aggr");$("#chart_preview_"+a).attr("aria-chart-type","autoupdating");$("#dbacklink_"+a).show();a=getAutoUpdatingChartOptions(a,c,b);plotAutoUpdatingChartDiagram(a)});
function initDashBoardSettings(){var a,b,c;setTimeout(function(){$(".dash-board-item").each(function(){var a=$(this).height();var b=$(this).find(".dash-board-header").height();var c=parseInt(a)-parseInt(b)-10-2;a=$(this).find("[id^='content_block']").hasClass("pivot-detail-view")?parseInt(a)-parseInt(b)-10-2:parseInt(a)-parseInt(b)-1-2;$(this).find("[id^='content_block']").height(a);$(this).find("[id^='content_chart']").height(c);$(this).find("[id^='chart_preview']").height(c)});a=$("#sidebar").length?
$("#dash_board_list").width():$("#main_content_div").width()-30;a=Math.floor(a/6);b=a-5-5;el_general_settings.dashboard_grid=$("#dash_board_list").gridster({widget_base_dimensions:[b,50],max_cols:6,min_cols:1,max_size_x:6,widget_margins:[5,5],draggable:{handle:".dash-board-mover",start:function(a,b,e){c&&clearTimeout(c)},stop:function(a,b,e){$("#widget_position_text").slideDown();c=setTimeout(function(){$("#widget_position_text").hide()},2E5)}}}).data("gridster");$(".dash-board-item").each(function(){var a=
$(this).height();var b=$(this).find(".dash-board-header").height();var c=parseInt(a)-parseInt(b)-10-2;a=$(this).find("[id^='content_block']").hasClass("pivot-detail-view")?parseInt(a)-parseInt(b)-10-2:parseInt(a)-parseInt(b)-1-2;$(this).find("[id^='content_block']").height(a);$(this).find("[id^='content_chart']").height(c);$(this).find("[id^='chart_preview']").height(c)});for(var e in DB_pivot_data_JSON)DB_pivot_data_JSON[e].dbID&&resizeDashboardGrid(DB_pivot_data_JSON[e].dbID);for(e in DB_data_list_JSON)DB_data_list_JSON[e].dbID&&
resizeDashboardGrid(DB_data_list_JSON[e].dbID);setTimeout(function(){hideMainLoader()},200)},500);$("#widget_position_save").click(function(){var a=el_general_settings.dashboard_grid.serialize(),b=[],c;for(c in a){var G=a[c].row;var y=a[c].col;var B=a[c].size_x;var E=a[c].size_y;y=$("[id^='board_item'][data-row='"+G+"'][data-col='"+y+"'][data-sizex='"+B+"'][data-sizey='"+E+"']").find("input[name^='iDashBoardId']").val();b.push({chart_id:y,chart_sequence:a[c]})}updateDashboardSequence(b)});$(window).bind("resize",
function(){var a="bar pie donut area line horizbar stackbar stackhorizbar autoupdating".split(" ");$("[id^='board_block']").each(function(){var b=$(this).attr("rel");$(this).attr("id").split("_");$.inArray(b,a)})}).trigger("resize");$(".toggle-extra-options").click(function(){$(".wrapper-dropdown").removeClass("active");$(".dropdown").hide();var a=$(this).attr("aria-id");$("#wrapper_dropdown_"+a).addClass("active");$("#options_dropdown_"+a).show()});$(document).click(function(){$(".wrapper-dropdown").removeClass("active");
$(".dropdown").hide()})}function initDashBoardFilters(){for(var a in DB_block_config_JSON){var b=DB_block_config_JSON[a].id;if("Yes"==DB_block_config_JSON[a].dateFilter){var c=DB_block_config_JSON[a].filterField;$("#dfilter_"+b).show();$("#drefresh_"+b).show();initFilterDSDateRangePicker(b,c)}"Yes"==DB_block_config_JSON[a].autoUpdate&&($("#drefresh_"+b).show(),DB_block_config_JSON[a].clearID=initDashBoardAutoLoad(b))}}
function initDashBoardAutoLoad(a){var b=el_tpl_settings.dashboard_auto_time?el_tpl_settings.dashboard_auto_time:18E4,b=parseInt(b);return setInterval(function(){var b=admin_url+cus_enc_url_json.autoload_dashboard;$("#board_loader_icon_"+a).show();$.ajax({url:b,type:"POST",data:{code:$("#vBoardCode_"+a).val()},success:function(b){b&&autoLoadDashboardBlock(a,b,DB_block_config_JSON[a].chartType)}})},b)}
function autoLoadDashboardBlock(a,b,c){switch(c){case "Grid List":DB_data_list_JSON[a]=$.parseJSON(b);b=DB_data_list_JSON[a].gridID;$("#"+b).jqGrid().GridDestroy();$("#dbgrid2_"+a).html('<div id="dbpager2_'+a+'"></div><table id="dblist2_'+a+'"></table>');callDashBoardGridListing(DB_data_list_JSON[a]);break;case "Pivot":DB_pivot_data_JSON[a]=$.parseJSON(b);b=DB_pivot_data_JSON[a].gridID;$("#"+b).jqGrid().GridDestroy();$("#dbgrid2_"+a).html('<div id="dbpager2_'+a+'"></div><table id="dblist2_'+a+'"></table>');
callDashBoardPivotListing(DB_pivot_data_JSON[a]);break;case "Detail View":$("#content_block_"+a).html(b)}$("#board_loader_icon_"+a).hide()}
function initFilterDSDateRangePicker(a,b){$("#dfilter_"+a).daterangepicker({ranges:{Today:[moment().startOf("days"),moment().endOf("days")],Yesterday:[moment().subtract("days",1).startOf("days"),moment().subtract("days",1).endOf("days")],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},
opens:"left",timePicker:!1,timePickerIncrement:1,timePicker12Hour:!0,showDropdowns:!0,locale:{format:el_tpl_settings.admin_formats.date.moment,separator:" to ",applyLabel:js_lang_label.GENERIC_GRID_SUBMIT,fromLabel:js_lang_label.GENERIC_FROM,toLabel:js_lang_label.GENERIC_TO,customRangeLabel:js_lang_label.GENERIC_CUSTOM_RANGE,daysOfWeek:"Su Mo Tu We Th Fr Sa".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),firstDay:1},dateLimit:!1,
autoUpdateInput:!1});$("#dfilter_"+a).on("apply.daterangepicker",function(c,e){filterDSBlockResponse(a,b,e.startDate.format("YYYY-MM-DD"),e.endDate.format("YYYY-MM-DD"))});$("#dfilter_"+a).on("cancel.daterangepicker",function(c,e){filterDSBlockResponse(a,b,"","")})}
function filterDSBlockResponse(a,b,c,e){DB_block_config_JSON[a].ajaxUpdate="Yes";clearInterval(DB_block_config_JSON[a].clearID);var d=admin_url+cus_enc_url_json.filter_dashboard;$("#board_loader_icon_"+a).show();$.ajax({url:d,type:"POST",data:{code:$("#vBoardCode_"+a).val(),field:b,from_date:c,to_date:e},success:function(b){b&&autoLoadDashboardBlock(a,b,DB_block_config_JSON[a].chartType)}})}
function initSearchDSDatePicker(a,b){var c={};var e=b&&b.attr&&b.attr["aria-grid-id"]?b.attr["aria-date-format"]:$(a).attr("aria-date-format");c.dateFormat=e;activeDSSearchPicker($(a),"date",c)}
function initSearchDSDateTimePicker(a,b){var c={};if(b&&b.attr&&b.attr["aria-grid-id"]){var e=b.attr["aria-date-format"];var d=b.attr["aria-time-format"];var z=b.attr["aria-enable-sec"];var G=b.attr["aria-enable-ampm"]}else e=$(a).attr("aria-date-format"),d=$(a).attr("aria-time-format"),z=$(a).attr("aria-enable-sec"),G=$(a).attr("aria-enable-ampm");c.dateFormat=e;c.timeFormat=d;c.showSecond=z;c.ampm=G;activeDSSearchPicker($(a),"dateTime",c)}
function initSearchDSTimePicker(a,b){var c={};if(b&&b.attr&&b.attr["aria-grid-id"]){var e=b.attr["aria-time-format"];var d=b.attr["aria-enable-sec"];var z=b.attr["aria-enable-ampm"]}else e=$(a).attr("aria-time-format"),d=$(a).attr("aria-enable-sec"),z=$(a).attr("aria-enable-ampm");c.timeFormat=e;c.showSecond=d;c.ampm=z;activeDSSearchPicker($(a),"time",c)}
function activeDSSearchPicker(a,b,c){switch(b){case "date":b={};c={dateFormat:c.dateFormat,showOn:"focus",changeMonth:!0,changeYear:!0,yearRange:"c-100:c+100",onClose:function(b,c){$(a).trigger("change")}};c=$.extend({},b,c);$(a).datepicker(c);break;case "time":$(a).timepicker({timeFormat:c.timeFormat,showSecond:"true"==c.showSecond||"1"==c.showSecond||!0===c.showSecond?!0:!1,ampm:"true"==c.ampm||"1"==c.ampm||!0===c.ampm?!0:"",showOn:"focus",onClose:function(b,c){$(a).trigger("change")}});break;case "dateTime":b=
{},c={dateFormat:c.dateFormat,timeFormat:c.timeFormat,showSecond:"true"==c.showSecond||"1"==c.showSecond||!0===c.showSecond?!0:!1,ampm:"true"==c.ampm||"1"==c.ampm||!0===c.ampm?!0:"",showOn:"focus",changeMonth:!0,changeYear:!0,yearRange:"c-100:c+100",onClose:function(b,c){$(a).trigger("change")}},c=$.extend({},b,c),$(a).datetimepicker(c)}el_general_settings.mobile_platform&&$(a).attr("readonly",!0)}
function updateDashboardSequence(a){$.ajax({url:admin_url+cus_enc_url_json.dashboard_sequence,type:"POST",data:{id:$("#iDashBoardPageId").val(),tab:$("#iDashBoardTabId").val(),obj:a,type:"block_sequence"},success:function(a){$("#widget_position_text").slideUp();a=$.parseJSON(a);var b=1;"0"==a.success&&(b=0);Project.setMessage(a.message,b)}})}
function updateDashboardChart(a){$.ajax({url:admin_url+cus_enc_url_json.dashboard_sequence,type:"POST",data:{id:$("#iDashBoardPageId").val(),tab:$("#iDashBoardTabId").val(),obj:a,type:"block_type"},success:function(a){}})}function toggleBoardContent(a,b){generateBoardContent(a,b);updateDashboardChart([{chart_id:a,chart_type:b}])}
function generateBoardContent(a,b,c){if(b==$("#board_block_"+a).attr("rel")&&!0!==c)return!1;$("#board_block_"+a).attr("rel",b);if(!DB_pivot_data_JSON[a])return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND_C46_C46_C33+"</div>"),!1;$("#dbacklink_"+a).hide();$("#dpiecombo_"+a).hide();$("#dpieselect_"+a).length||makePieCategoryCombo(a);$("#daggrselect_"+a).length||makeAggrCategoryCombo(a);"-1"!=$.inArray(b,"bar pie donut area line horizbar stackbar stackhorizbar autoupdating".split(" "))?
($("#chart_preview_"+a).attr("aria-chart-type",b),$("#daggrcombo_"+a).show()):$("#daggrcombo_"+a).hide();DB_pivot_data_JSON[a].searchMode&&"Yes"==DB_pivot_data_JSON[a].searchMode?($("#dsearch_"+a).show(),$("#drefresh_"+a).show()):($("#dsearch_"+a).hide(),$("#drefresh_"+a).hide());DB_pivot_data_JSON[a].dateFilter&&"Yes"==DB_pivot_data_JSON[a].dateFilter?($("#dfilter_"+a).show(),$("#drefresh_"+a).show()):($("#dfilter_"+a).hide(),$("#drefresh_"+a).hide());"Yes"==DB_block_config_JSON[a].autoUpdate&&$("#drefresh_"+
a).show();c=$("#chart_preview_"+a).attr("aria-chart-aggr");switch(b){case "pivot":$("#content_chart_"+a).hide();$("#content_block_"+a).show();break;case "bar":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getBarChartOptions(a,c);plotBarChartDiagram(a);break;case "pie":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getPieChartOptions(a,c);plotPieChartDiagram(a);break;case "donut":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getDonutChartOptions(a,c);
plotDonutChartDiagram(a);break;case "area":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getAreaChartOptions(a,c);plotAreaChartDiagram(a);break;case "line":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getLineChartOptions(a,c);plotLineChartDiagram(a);break;case "horizbar":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getHorizontalBarChartOptions(a,c);plotHorizontalBarChartDiagram(a);break;case "stackbar":$("#content_block_"+a).hide();$("#content_chart_"+
a).show();a=getStackedBarChartOptions(a,c);plotStackedBarChartDiagram(a);break;case "stackhorizbar":$("#content_block_"+a).hide();$("#content_chart_"+a).show();a=getStackedHorizBarChartOptions(a,c);plotStackedHorizBarChartDiagram(a);break;case "autoupdating":$("#content_block_"+a).hide(),$("#content_chart_"+a).show(),a=getAutoUpdatingChartOptions(a,c),plotAutoUpdatingChartDiagram(a)}}
function makePieCategoryCombo(a){if(!DB_pivot_data_JSON[a])return!1;var b=$("#"+DB_pivot_data_JSON[a].gridID).jqGrid("getGridParam","dataSet");if(!b||!b.columns)return!1;var b=b.columns,c='<select name="dpieselect_'+a+'" id="dpieselect_'+a+'" class="dfilter-combo dpie-filter" aria-chart-id="'+a+'">',e;for(e in b)c+='<option value="'+b[e].titleText+'">'+b[e].titleText+"</option>";c+="</select>";$("#dpiecombo_"+a).html(c);return!0}
function makeAggrCategoryCombo(a){if(!DB_pivot_data_JSON[a])return!1;var b=$("#"+DB_pivot_data_JSON[a].gridID).jqGrid("getGridParam","dataSet");if(!b||!b.sums||2>b.sums.length)return!1;var b=b.sums,c='<select name="daggrselect_'+a+'" id="daggrselect_'+a+'" class="dfilter-combo daggr-filter" aria-chart-id="'+a+'">',e;for(e in b)c+='<option value="'+e+'">'+b[e].label+"</option>";c+="</select>";$("#daggrcombo_"+a).html(c);return!0}
function getBarChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[],k=!1,p,A,D=!0;chartCtrlActivity("bar","legend")||(D=!1);chartCtrlActivity("bar","xaxis")&&(p=G[0].label);chartCtrlActivity("bar","yaxis")&&(A=y[b].rowTotalsText);E={xaxis:{axisLabel:p,tickLength:0},yaxis:{axisLabel:A},tooltipOpts:{fmatter:B[b].formatter},
legend:{position:chartCtrlActivity("bar","position"),show:D}};if("2R1C"==z){if(!d.columns)throw"-3";var C=d.columns;var t=[];var m=[];var h=0;var F=1;for(var g in C){var u=[];var r=C[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;k=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([h,x]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:"";var H=!0===k?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+
a+'" aria-chart-row="'+n+'" class="bar-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u,bars:{order:F}});F++}for(var I in m)t.push(m[I]);v={bars:{barWidth:.2},xaxis:{ticks:t},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else if("2R"==z){if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;k=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,H=!0===k?l:'<a href="javascript://" title="'+
l+'" aria-chart-id="'+a+'" aria-chart-row="'+g+'" class="bar-chart-child chart-parent-link">'+l+"</a>",q.push([H,x]);q=[q];v={bars:{barWidth:.4},xaxis:{mode:"categories"},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";C=d.columns;t=[];m=[];h=0;F=1;for(g in C){u=[];r=C[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?d.rows[n].titleText:"",x=w[r]&&w[r][b]?w[r][b]:0,u.push([h,x]),$.isArray(m[h])||(m[h]=
[n,l]),h++;q.push({label:r,data:u,bars:{order:F}});F++}for(I in m)t.push(m[I]);v={bars:{barWidth:.2},xaxis:{ticks:t},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else{f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,q.push([l,x]);q=[q];v={bars:{barWidth:.4},xaxis:{mode:"categories"},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}e.params=$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+
a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function getPieChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=d.sums,e={},y={},B=[],E=!1,v=!0,q=!0;chartCtrlActivity("pie","legend")||(q=!1);chartCtrlActivity("pie","label")||(v=!1);y={tooltipOpts:{fmatter:G[b].formatter},legend:{position:chartCtrlActivity("pie","position"),show:q},series:{pie:{label:{show:v,radius:"s2"==chartCtrlActivity("pie",
"style")?.75:1}}}};if("2R1C"==z){if(!d.columns)throw"-3";$("#dpiecombo_"+a).show();$("#dpieselect_"+a).attr("aria-chart-row",c);var k=$("#dpieselect_"+a).val();if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";E=!0;var p=d.rows[c].children}else p=d.rows;for(var A in p){var D=p[A].columns;var C=D[k]&&D[k][b]?D[k][b]:0;var t=p[A].titleText?p[A].titleText:"";var m=!0===E?t:'<a href="javascript://" title="'+t+'" aria-chart-id="'+a+'" aria-chart-row="'+A+'" class="pie-chart-child chart-parent-link">'+
t+"</a>";B.push({label:m,data:C})}}else if("2R"==z){if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";p=d.rows[c].children;E=!0}else p=d.rows;for(var h in p)t=p[h].titleText?p[h].titleText:"",C=p[h].values[b]?p[h].values[b]:0,m=!0===E?t:'<a href="javascript://" title="'+t+'" aria-chart-id="'+a+'" aria-chart-row="'+h+'" class="pie-chart-child chart-parent-link">'+t+"</a>",B.push({label:m,data:C})}else if("1R1C"==z){if(!d.columns)throw"-3";$("#dpiecombo_"+a).show();$("#dpieselect_"+a).attr("aria-chart-row",
c);k=$("#dpieselect_"+a).val();for(A in d.rows)D=d.rows[A].columns,t=d.rows[A].titleText?d.rows[A].titleText:"",C=D[k]&&D[k][b]?D[k][b]:0,B.push({label:t,data:C})}else for(h in p=d.rows,p)t=p[h].titleText?p[h].titleText:"",C=p[h].values[b]?p[h].values[b]:0,B.push({label:t,data:C});e.params=$.extend(!0,y,{});e.data=B;e.id=a;return e}catch(F){return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function getDonutChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=d.sums,e={},y={},B=[],E=!1,v=!0,q=!0;chartCtrlActivity("donut","legend")||(q=!1);chartCtrlActivity("donut","label")||(v=!1);y={tooltipOpts:{fmatter:G[b].formatter},legend:{position:chartCtrlActivity("donut","position"),show:q},series:{pie:{label:{show:v,radius:"s2"==chartCtrlActivity("donut",
"style")?.75:1}}}};if("2R1C"==z){if(!d.columns)throw"-3";$("#dpiecombo_"+a).show();$("#dpieselect_"+a).attr("aria-chart-row",c);var k=$("#dpieselect_"+a).val();if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";E=!0;var p=d.rows[c].children}else p=d.rows;for(var A in p){var D=p[A].columns;var C=D[k]&&D[k][b]?D[k][b]:0;var t=p[A].titleText?p[A].titleText:"";var m=!0===E?t:'<a href="javascript://" title="'+t+'" aria-chart-id="'+a+'" aria-chart-row="'+A+'" class="donut-chart-child chart-parent-link">'+
t+"</a>";B.push({label:m,data:C})}}else if("2R"==z){if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";p=d.rows[c].children;E=!0}else p=d.rows;for(var h in p)t=p[h].titleText?p[h].titleText:"",C=p[h].values[b]?p[h].values[b]:0,m=!0===E?t:'<a href="javascript://" title="'+t+'" aria-chart-id="'+a+'" aria-chart-row="'+h+'" class="donut-chart-child chart-parent-link">'+t+"</a>",B.push({label:m,data:C})}else if("1R1C"==z){if(!d.columns)throw"-3";$("#dpiecombo_"+a).show();$("#dpieselect_"+a).attr("aria-chart-row",
c);k=$("#dpieselect_"+a).val();for(A in d.rows)D=d.rows[A].columns,t=d.rows[A].titleText?d.rows[A].titleText:"",C=D[k]&&D[k][b]?D[k][b]:0,B.push({label:t,data:C})}else for(h in p=d.rows,p)t=p[h].titleText?p[h].titleText:"",C=p[h].values[b]?p[h].values[b]:0,B.push({label:t,data:C});e.params=$.extend(!0,y,{});e.data=B;e.id=a;return e}catch(F){return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function getAreaChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[],k=[],p=!1,A,D,C=!0;chartCtrlActivity("area","legend")||(C=!1);chartCtrlActivity("area","xaxis")&&(A=G[0].label);chartCtrlActivity("area","yaxis")&&(D=y[b].rowTotalsText);E={xaxis:{axisLabel:A},yaxis:{axisLabel:D},tooltipOpts:{fmatter:B[b].formatter},
legend:{position:chartCtrlActivity("area","position"),show:C}};if("2R1C"==z){if(!d.columns)throw"-3";var t=d.columns;var m=[];var h=0;var F=1;for(var g in t){var u=[];var r=t[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;p=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([h,x]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:"";var H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+
n+'" class="area-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u});F++}for(var I in m)k.push(m[I]);v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else if("2R"==z){u=[];if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;p=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+
g+'" class="area-chart-child chart-parent-link">'+l+"</a>",u.push([g,x]),k.push([g,H]);q=[{data:u}];v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";t=d.columns;m=[];h=0;F=1;for(g in t){u=[];r=t[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?d.rows[n].titleText:"",x=w[r]&&w[r][b]?w[r][b]:0,u.push([h,x]),$.isArray(m[h])||(m[h]=[n,l]),h++;q.push({label:r,data:u});F++}for(I in m)k.push(m[I]);
v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else{u=[];f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,u.push([g,x]),k.push([g,l]);q=[{data:u}];v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}e.params=$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+
"</div>"),!1}}
function getLineChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[],k=[],p=!1,A,D,C=!0;chartCtrlActivity("line","legend")||(C=!1);chartCtrlActivity("line","xaxis")&&(A=G[0].label);chartCtrlActivity("line","yaxis")&&(D=y[b].rowTotalsText);E={xaxis:{axisLabel:A},yaxis:{axisLabel:D},tooltipOpts:{fmatter:B[b].formatter},
legend:{position:chartCtrlActivity("line","position"),show:C}};if("2R1C"==z){if(!d.columns)throw"-3";var t=d.columns;var m=[];var h=0;var F=1;for(var g in t){var u=[];var r=t[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;p=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([h,x]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:"";var H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+
n+'" class="line-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u});F++}for(var I in m)k.push(m[I]);v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else if("2R"==z){u=[];if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;p=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+
g+'" class="line-chart-child chart-parent-link">'+l+"</a>",u.push([g,x]),k.push([g,H]);q=[{data:u}];v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";t=d.columns;m=[];h=0;F=1;for(g in t){u=[];r=t[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?d.rows[n].titleText:"",x=w[r]&&w[r][b]?w[r][b]:0,u.push([h,x]),$.isArray(m[h])||(m[h]=[n,l]),h++;q.push({label:r,data:u});F++}for(I in m)k.push(m[I]);
v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else{u=[];f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,u.push([g,x]),k.push([g,l]);q=[{data:u}];v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}e.params=$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+
"</div>"),!1}}
function getHorizontalBarChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[];var k=[];var p=!1,A,D,C=!0;chartCtrlActivity("horizbar","legend")||(C=!1);chartCtrlActivity("horizbar","xaxis")&&(A=y[b].rowTotalsText);chartCtrlActivity("horizbar","yaxis")&&(D=G[0].label);E={xaxis:{axisLabel:A},yaxis:{axisLabel:D,
tickLength:0},tooltipOpts:{fmatter:B[b].formatter},legend:{position:chartCtrlActivity("horizbar","position"),show:C}};if("2R1C"==z){if(!d.columns)throw"-3";var t=d.columns;k=[];var m=[];var h=0;var F=1;for(var g in t){var u=[];var r=t[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;p=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([x,h]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:"";var H=!0===p?l:'<a href="javascript://" title="'+
l+'" aria-chart-id="'+a+'" aria-chart-row="'+n+'" class="horizbar-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u,bars:{order:F}});F++}for(var I in m)k.push(m[I]);v={bars:{barWidth:.2},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,b)}}}}else if("2R"==z){if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;p=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:
0,H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+g+'" class="horizbar-chart-child chart-parent-link">'+l+"</a>",q.push([x,g]),k.push([g,H]);q=[q];v={bars:{barWidth:.5},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,b)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";t=d.columns;k=[];m=[];h=0;F=1;for(g in t){u=[];r=t[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?d.rows[n].titleText:"",x=w[r]&&
w[r][b]?w[r][b]:0,u.push([x,h]),$.isArray(m[h])||(m[h]=[n,l]),h++;q.push({label:r,data:u,bars:{order:F}});F++}for(I in m)k.push(m[I]);v={bars:{barWidth:.2},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,b)}}}}else{f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,q.push([x,g]),k.push([g,l]);q=[q];v={bars:{barWidth:.5},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,b)}}}}e.params=
$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function getStackedBarChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[],k=!1,p,A,D=!0;chartCtrlActivity("stackbar","legend")||(D=!1);chartCtrlActivity("stackbar","xaxis")&&(p=G[0].label);chartCtrlActivity("stackbar","yaxis")&&(A=y[b].rowTotalsText);E={xaxis:{axisLabel:p,tickLength:0},yaxis:{axisLabel:A},
tooltipOpts:{fmatter:B[b].formatter},legend:{position:chartCtrlActivity("stackbar","position"),show:D}};if("2R1C"==z){if(!d.columns)throw"-3";var C=d.columns;var t=[];var m=[];var h=0;var F=1;for(var g in C){var u=[];var r=C[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;k=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([h,x]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:"";var H=!0===k?l:'<a href="javascript://" title="'+
l+'" aria-chart-id="'+a+'" aria-chart-row="'+n+'" class="stackbar-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u});F++}for(var I in m)t.push(m[I]);v={bars:{barWidth:.4},xaxis:{ticks:t},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else if("2R"==z){if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;k=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,H=!0===k?l:'<a href="javascript://" title="'+
l+'" aria-chart-id="'+a+'" aria-chart-row="'+g+'" class="stackbar-chart-child chart-parent-link">'+l+"</a>",q.push([H,x]);q=[q];v={bars:{barWidth:.4},xaxis:{mode:"categories"},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";C=d.columns;t=[];m=[];h=0;F=1;for(g in C){u=[];r=C[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?d.rows[n].titleText:"",x=w[r]&&w[r][b]?w[r][b]:0,u.push([h,x]),$.isArray(m[h])||(m[h]=
[n,l]),h++;q.push({label:r,data:u});F++}for(I in m)t.push(m[I]);v={bars:{barWidth:.4},xaxis:{ticks:t},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else{f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,q.push([l,x]);q=[q];v={bars:{barWidth:.4},xaxis:{mode:"categories"},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}e.params=$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+
a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function getStackedHorizBarChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[];var k=[];var p=!1,A,D,C=!0;chartCtrlActivity("stackhorizbar","legend")||(C=!1);chartCtrlActivity("stackhorizbar","xaxis")&&(A=y[b].rowTotalsText);chartCtrlActivity("stackhorizbar","yaxis")&&(D=G[0].label);E={xaxis:{axisLabel:A},
yaxis:{axisLabel:D,tickLength:0},tooltipOpts:{fmatter:B[b].formatter},legend:{position:chartCtrlActivity("stackhorizbar","position"),show:C}};if("2R1C"==z){if(!d.columns)throw"-3";var t=d.columns;k=[];var m=[];var h=0;var F=1;for(var g in t){var u=[];var r=t[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;p=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([x,h]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:
"";var H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+n+'" class="stackhorizbar-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u});F++}for(var I in m)k.push(m[I]);v={bars:{barWidth:.5},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,b)}}}}else if("2R"==z){if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;p=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:
"",x=f[g].values[b]?f[g].values[b]:0,H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+g+'" class="stackhorizbar-chart-child chart-parent-link">'+l+"</a>",q.push([x,g]),k.push([g,H]);q=[q];v={bars:{barWidth:.5},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,b)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";t=d.columns;k=[];m=[];h=0;F=1;for(g in t){u=[];r=t[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?
d.rows[n].titleText:"",x=w[r]&&w[r][b]?w[r][b]:0,u.push([x,h]),$.isArray(m[h])||(m[h]=[n,l]),h++;q.push({label:r,data:u});F++}for(I in m)k.push(m[I]);v={bars:{barWidth:.5},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,b)}}}}else{f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,q.push([x,g]),k.push([g,l]);q=[q];v={bars:{barWidth:.5},yaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,
b)}}}}e.params=$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function getAutoUpdatingChartOptions(a,b,c){try{if(!DB_pivot_data_JSON[a])throw"-1";var e=DB_pivot_data_JSON[a],d=$("#"+e.gridID).jqGrid("getGridParam","dataSet");if(!d)throw"-2";if(!d.rows)throw"-3";b=1==b?b:0;var z=e.pivotMode,G=e.xDimension,y=e.aggregates,B=d.sums,e={},E={},v={},q=[],k=[],p=!1,A,D,C=!0;chartCtrlActivity("autoupdating","legend")||(C=!1);chartCtrlActivity("autoupdating","xaxis")&&(A=G[0].label);chartCtrlActivity("autoupdating","yaxis")&&(D=y[b].rowTotalsText);E={xaxis:{axisLabel:A},
yaxis:{axisLabel:D},tooltipOpts:{fmatter:B[b].formatter},legend:{position:chartCtrlActivity("autoupdating","position"),show:C}};if("2R1C"==z){if(!d.columns)throw"-3";var t=d.columns;var m=[];var h=0;var F=1;for(var g in t){var u=[];var r=t[g].titleText;h=0;if(c){if(!d.rows[c]||!d.rows[c].children)continue;p=!0;var f=d.rows[c].children}else f=d.rows;for(var n in f){var w=f[n].columns;var x=w[r]&&w[r][b]?w[r][b]:0;u.push([h,x]);if(!$.isArray(m[h])){var l=f[n].titleText?f[n].titleText:"";var H=!0===
p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+n+'" class="autoupdating-chart-child chart-parent-link">'+l+"</a>";m[h]=[n,H]}h++}q.push({label:r,data:u});F++}for(var I in m)k.push(m[I]);v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else if("2R"==z){u=[];if(c){if(!d.rows[c]||!d.rows[c].children)throw"-3";f=d.rows[c].children;p=!0}else f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:
0,H=!0===p?l:'<a href="javascript://" title="'+l+'" aria-chart-id="'+a+'" aria-chart-row="'+g+'" class="autoupdating-chart-child chart-parent-link">'+l+"</a>",u.push([g,x]),k.push([g,H]);q=[{data:u}];v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}else if("1R1C"==z){if(!d.columns)throw"-3";t=d.columns;m=[];h=0;F=1;for(g in t){u=[];r=t[g].titleText;h=0;for(n in d.rows)w=d.rows[n].columns,l=d.rows[n].titleText?d.rows[n].titleText:"",x=w[r]&&w[r][b]?w[r][b]:
0,u.push([h,x]),$.isArray(m[h])||(m[h]=[n,l]),h++;q.push({label:r,data:u});F++}for(I in m)k.push(m[I]);v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return a+" - "+getChartDataFormat(e,c)}}}}else{u=[];f=d.rows;for(g in f)l=f[g].titleText?f[g].titleText:"",x=f[g].values[b]?f[g].values[b]:0,u.push([g,x]),k.push([g,l]);q=[{data:u}];v={xaxis:{ticks:k},tooltipOpts:{content:function(a,b,c,d,e){return getChartDataFormat(e,c)}}}}e.params=$.extend(!0,E,v);e.data=q;e.id=a;return e}catch(J){return $("#chart_preview_"+
a).html('<div class="errormsg" align="center">'+js_lang_label.GENERIC_NO_DATA_FOUND+"</div>"),!1}}
function plotBarChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},bars:{show:!0,fill:!0,order:!0,lineWidth:0,align:"center",fillColor:{colors:[{opacity:1},{opacity:1}]}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",
axisLabelPadding:5,rotateTicks:180},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%y"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotPieChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,clickable:!0,hoverable:!0},series:{pie:{show:!0,radius:1,stroke:{width:2},label:{show:!0,radius:1,formatter:function(a,b){return'<div class="pie-chart-label">'+a+"&nbsp;"+Math.round(b.percent)+"%</div>"}}}},legend:{show:!1},colors:chartColours,tooltip:!0,tooltipOpts:{content:function(a,b,c,G,y){return a+" - "+getChartDataFormat(y,c)}}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotDonutChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,clickable:!0,hoverable:!0},series:{pie:{show:!0,radius:1,innerRadius:.5,stroke:{width:4},label:{show:!0,radius:1,formatter:function(a,b){return'<div class="pie-chart-label">'+a+"&nbsp;"+Math.round(b.percent)+"%</div>"}}}},legend:{show:!1},colors:chartColours,tooltip:!0,tooltipOpts:{content:function(a,b,c,G,y){return a+" - "+getChartDataFormat(y,c)}}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,
c,a)}
function plotAreaChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},series:{lines:{show:!0,fill:!0,lineWidth:2},points:{show:!0,radius:4.5,fill:!0,fillColor:"#ffffff",lineWidth:2.75}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:5,
rotateTicks:180},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%y"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotLineChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},series:{lines:{show:!0,fill:!1,lineWidth:2},points:{show:!0,radius:4.5,fill:!0,fillColor:"#ffffff",lineWidth:2.75}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",
axisLabelPadding:5,rotateTicks:180},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%y"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotHorizontalBarChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},bars:{horizontal:!0,show:!0,fill:!0,order:!0,lineWidth:0,align:"center",fillColor:{colors:[{opacity:1},{opacity:1}]}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",
axisLabelPadding:5},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%x"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotStackedBarChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},series:{stack:!0},bars:{show:!0,fill:!0,lineWidth:0,align:"center",fillColor:{colors:[{opacity:1},{opacity:1}]}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",
axisLabelPadding:5,rotateTicks:180},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%y"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotStackedHorizBarChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},series:{stack:!0},bars:{horizontal:!0,show:!0,fill:!0,lineWidth:0,align:"center",fillColor:{colors:[{opacity:1},{opacity:1}]}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",
axisLabelPadding:5},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%x"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function plotAutoUpdatingChartDiagram(a){if(!a)return!1;var b=a.id,c=a.data;a=$.extend(!0,{grid:{show:!0,aboveData:!1,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:1,borderColor:"#ccc",minBorderMargin:5,clickable:!0,hoverable:!0,autoHighlight:!1,mouseActiveRadius:20},series:{shadowSize:0,lines:{show:!0,fill:!0,lineWidth:2},points:{show:!0,radius:4.5,fill:!0,fillColor:"#ffffff",lineWidth:2.75}},legend:{position:"ne"},xaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",
axisLabelPadding:5,rotateTicks:180},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"'Droid Sans',Helvetica,Arial,sans-serif",axisLabelPadding:0},colors:chartColours,tooltip:!0,tooltipOpts:{content:"%y"}},a.params);b=$("#chart_preview_"+b);b.length&&$.plot(b,c,a)}
function callDashBoardPivotListing(a){var b=a.dbID,c=a.xDimension,e=a.yDimension,d=a.aggregates,z=a.dataModel,G=a.linkModel,y=a.hidePaging,B=parseInt(a.rowNumber),E=a.searchMode,v=a.defaultChart,q=a.gridID,y="Yes"==y?!1:!0,k="Yes"==a.frozenCols?!0:!1;a=$("#content_block_"+b).width();var p=!0,B="-1"!=$.inArray(B,pager_row_list)?B:parseInt(el_theme_settings.pivot_number_of_record),B="-1"!=$.inArray(B,pager_row_list)?B:20;jQuery("#"+q).jqGrid("jqPivot",z,{xDimension:c,yDimension:e,aggregates:d,rowTotals:!0,
colTotals:!0,rowTotalsText:d[0].rowTotalsText,frozenStaticCols:1==k?!0:!1,frozenShrinkToFit:!0},{linkModel:G,pgbuttons:y,pginput:y,pgnumbers:el_theme_settings.grid_pgnumbers?!0:!1,pgnumlimit:1,pagingpos:el_theme_settings.grid_pagingpos,rowNum:y?parseInt(B):1E6,rowList:y?pager_row_list:[],viewrecords:!0,altRows:!0,altclass:"evenRow",norecmsg:js_lang_label.GENERIC_GRID_NO_RECORDS_FOUND,hidegrid:!1,pager:"",toppager:y,toppaging:y,showpaging:y,height:200,width:1==k?a-0:650,autowidth:1==k?!1:!0,shrinkToFit:1==
k?!1:!0,fixed:!0,loadComplete:function(a){noDashboardRecordsMessage(q,a,"pivot");!0===p?(!0!==k&&(resizeDashboardGrid(b),generateBoardContent(b,v,!0)),p=!1):resizeDashboardGrid(b)},gridComplete:function(a){"Yes"==E&&($("#dsearch_"+b).show(),$("#drefresh_"+b).show())},frozenComplete:function(a){1==k&&(resizeDashboardGrid(b),generateBoardContent(b,v,!0));$("#gview_"+q).find(".frozen-div").length&&(a=$("#gview_"+q).find(".frozen-div").find(".ui-jqgrid-htable"),$(a).find("tr.jqg-third-row-header").length&&
1<$(a).find("tr.jqg-first-row-header").find("th[role='gridcell']").length&&2>$(a).find("tr.jqg-second-row-header").find("th[role='columnheader']").length&&$(a).find("tr.jqg-second-row-header").find("th[role='columnheader']").attr("colspan","2"))}})}
function callDashBoardGridListing(a){var b=[],c=a.dbID,e=a.colNames,d=a.colModel,z=a.dataModel,G=a.linkModel,y=a.hidePaging,B=parseInt(a.rowNumber),E=a.searchMode,v=a.gridID,q=a.pagerID,y="Yes"==y?!1:!0;a="Yes"==a.frozenCols?!0:!1;var k=$("#content_block_"+c).width(),p=0,A=!0,B="-1"!=$.inArray(B,pager_row_list)?B:parseInt(el_theme_settings.pivot_number_of_record),B="-1"!=$.inArray(B,pager_row_list)?B:20,D;for(D in e)b.push(e[D].label),p+=parseInt(d[D].width||0);1==a&&p>k-0&&(A=!1);jQuery("#"+v).jqGrid({data:z,
datatype:"local",colNames:b,colModel:d,linkModel:G,pgbuttons:y,pginput:y,pgnumbers:el_theme_settings.grid_pgnumbers?!0:!1,pgnumlimit:1,pagingpos:el_theme_settings.grid_pagingpos,rowNum:y?parseInt(B):1E6,rowList:y?pager_row_list:[],viewrecords:!0,altRows:!0,altclass:"evenRow",norecmsg:js_lang_label.GENERIC_GRID_NO_RECORDS_FOUND,hidegrid:!1,pager:"",toppager:y,toppaging:y,showpaging:y,height:200,width:0==A?k-0:650,autowidth:0==A?!1:!0,shrinkToFit:0==A?!1:!0,fixed:!0,loadComplete:function(a){noDashboardRecordsMessage(v,
a,"grid");resizeDashboardGrid(c)},gridComplete:function(){"Yes"==E&&($("#dsearch_"+c).show(),$("#drefresh_"+c).show())}});jQuery("#"+v).jqGrid("navGrid","#"+q,{cloneToTop:!0,add:!1,edit:!1,del:!1,search:!1,refresh:!1},{},{},{},{});0==A&&jQuery("#"+v).jqGrid("setFrozenColumns")}
function resizeDashboardGrid(a){if(DB_pivot_data_JSON[a])var b=DB_pivot_data_JSON[a];else if(DB_data_list_JSON[a])b=DB_data_list_JSON[a];else return!1;b=b.gridID;1==$("#"+b).jqGrid("getGridParam","autowidth")&&$("#"+b).jqGrid("setGridWidth",$("#content_block_"+a).width()- -1,!0);var c=$("#content_block_"+a).offset().top;a=$("#content_block_"+a).height();var e=$("#"+b).offset().top,c=parseInt(c)+parseInt(a)-parseInt(e)+1;$("#"+b).jqGrid("setGridHeight",c,!0)}
function formatDashBoardEditLink(a,b,c){c=$("#"+b.gid).jqGrid("getGridParam","linkModel");var e=b.rowId;b=b.colModel.name;return c&&c[e]&&c[e][b]?c[e][b]:a}function unformatDashBoardEditLink(a,b,c){return a}
function noDashboardRecordsMessage(a,b,c){var e=!1;"grid"==c?e=b&&b.records&&"0"!=b.records?!1:!0:"pivot"==c&&(e=$.isArray(b)?b&&b.length?!1:!0:b&&b.records&&"0"!=b.records?!1:!0);e&&(a=$("#"+a),b=$(a).jqGrid("getGridParam","norecmsg"),c=$(a).find("tr.jqgfirstrow").find("td").length,b=$("<tr />").html("<td colspan='"+c+"' align='center'><div class='grid-norec-msg'>"+b+"</div></td>"),$(a).append(b))}
function getChartDataFormat(a,b){switch(a){case "number":b=$.fn.fmatter.number(b,$.jgrid.formatter);break;case "integer":b=$.fn.fmatter.integer(b,$.jgrid.formatter);break;case "currency":b=$.fn.fmatter.currency(b,$.jgrid.formatter)}return b}
function chartCtrlActivity(a,b){switch(a){case "bar":if("legend"==b)var c=el_theme_settings.bar_chart_show_legend;else"position"==b?c=el_theme_settings.bar_chart_legend_position:"xaxis"==b?c=el_theme_settings.bar_chart_show_xaxis_label:"yaxis"==b&&(c=el_theme_settings.bar_chart_show_yaxis_label);break;case "pie":"legend"==b?c=el_theme_settings.pie_chart_show_legend:"position"==b?c=el_theme_settings.pie_chart_legend_position:"label"==b?c=el_theme_settings.pie_chart_show_label:"style"==b&&(c=el_theme_settings.pie_chart_label_style);
break;case "donut":"legend"==b?c=el_theme_settings.donut_chart_show_legend:"position"==b?c=el_theme_settings.donut_chart_legend_position:"label"==b?c=el_theme_settings.donut_chart_show_label:"style"==b&&(c=el_theme_settings.donut_chart_label_style);break;case "area":"legend"==b?c=el_theme_settings.area_chart_show_legend:"position"==b?c=el_theme_settings.area_chart_legend_position:"xaxis"==b?c=el_theme_settings.area_chart_show_xaxis_label:"yaxis"==b&&(c=el_theme_settings.area_chart_show_yaxis_label);
break;case "line":"legend"==b?c=el_theme_settings.line_chart_show_legend:"position"==b?c=el_theme_settings.line_chart_legend_position:"xaxis"==b?c=el_theme_settings.line_chart_show_xaxis_label:"yaxis"==b&&(c=el_theme_settings.line_chart_show_yaxis_label);break;case "horizbar":"legend"==b?c=el_theme_settings.horizontal_chart_show_legend:"position"==b?c=el_theme_settings.horizontal_chart_legend_position:"xaxis"==b?c=el_theme_settings.horizontal_chart_show_xaxis_label:"yaxis"==b&&(c=el_theme_settings.horizontal_chart_show_yaxis_label);
break;case "stackbar":"legend"==b?c=el_theme_settings.stacked_bar_chart_show_legend:"position"==b?c=el_theme_settings.stacked_bar_chart_legend_position:"xaxis"==b?c=el_theme_settings.stacked_bar_chart_show_xaxis_label:"yaxis"==b&&(c=el_theme_settings.stacked_bar_chart_show_yaxis_label);break;case "stackhorizbar":"legend"==b?c=el_theme_settings.stacked_horizontal_bar_chart_show_legend:"position"==b?c=el_theme_settings.stacked_horizontal_bar_chart_legend_position:"xaxis"==b?c=el_theme_settings.stacked_horizontal_bar_chart_show_xaxis_label:
"yaxis"==b&&(c=el_theme_settings.stacked_horizontal_bar_chart_show_yaxis_label);break;case "autoupdating":"legend"==b?c=el_theme_settings.auto_updating_chart_show_legend:"position"==b?c=el_theme_settings.auto_updating_chart_legend_position:"xaxis"==b?c=el_theme_settings.auto_updating_chart_show_xaxis_label:"yaxis"==b&&(c=el_theme_settings.auto_updating_chart_show_yaxis_label)}return c}
function resizeDSGridWidth(){if(!$("#dash_board_list").length||!$("#dash_board_container").length)return!0;var a=$("#dash_board_container").width();a=Math.floor(a/6);a=a-5-5;$("#dash_board_list").data("gridster").resize_widget_dimensions({widget_base_dimensions:[a,50]});setTimeout(function(){$("[id^=iDashBoardId]").each(function(){var a=$(this).val();$("#dbgrid2_"+a)&&resizeDashboardGrid(a)})},250)};