Project.modules.bulkmail={init:function(){this.initEvents();this.validate()},validate:function(){$("#frmbulkmailadd").validate({rules:{"vUser[]":{required:!0},vEmailSubject:{required:!0},vFromName:{required:!0},vFromEmail:{required:!0,email:!0},vEmailAddress:{required:!0}},messages:{"vUser[]":{required:js_lang_label.GENERIC_PLEASE_SELECT_USERS},vEmailSubject:{required:js_lang_label.GENERIC_PLEASE_ENTER_EMAIL_SUBJECT},vFromEmail:{required:js_lang_label.GENERIC_PLEASE_ENTER_FROM_EMAIL,email:js_lang_label.GENERIC_PLEASE_ENTER_VALID_EMAIL},
vEmailAddress:{required:js_lang_label.GENERIC_PLEASE_ENTER_EMAIL_ADDRESS}},errorPlacement:function(b,a){"vUser[]"==a.attr("name")&&b.appendTo("#vUserErr");"vEmailSubject"==a.attr("name")&&b.appendTo("#vEmailSubjectErr");"vFromName"==a.attr("name")&&b.appendTo("#vFromNameErr");"vFromEmail"==a.attr("name")&&b.appendTo("#vFromEmailErr");"vEmailAddress"==a.attr("name")&&(a.attr("id"),b.appendTo("#vEmailAddressErr"))}})},initEvents:function(){tinyMCE.baseURL=el_tpl_settings.editor_js_url;$("#vEmailContent").tinymce({script_url:el_tpl_settings.editor_js_url+
"tinymce.min.js",content_css:el_tpl_settings.editor_css_url+"style.css",plugins:tinymce_editor_plugins_premium,toolbar:tinymce_editor_tollbar_premium,templates:tinymce_editor_templates,theme:"modern",resize:"both",skin:"light",image_advtab:!0,relative_urls:!1,remove_script_host:!1,external_filemanager_path:site_url+"filemanager/",filemanager_title:"Filemanager",external_plugins:{filemanager:el_tpl_settings.js_libraries_url+"filemanager/plugin.min.js"},setup:function(b){b.on("change",function(a){tinyMCE.triggerSave()});
b.on("click",function(a){tinyMCE.get(b.id).focus()})}});$("#vSendTo").on("change",function(){var b=$("#vSendTo").val();$.post($bulkmail_sendto,{sent_id:b},function(a){$("#div_user").html(a);$("#div_user").show();initializejQueryChosenEvents();$(".elastic").elastic();initializeTooltipsEvents();$("#vEmailTemplate").change()})});$(".elastic").elastic();$("#select_all").on("click",function(){var b=[],a=0;$("#vUser option").each(function(){b[a]=$(this).val();a++});$("#deselect_all").show();$("#select_all").hide();
$("#vUser").val(b).trigger("chosen:updated")});$("#deselect_all").on("click",function(){$("#deselect_all").hide();$("#select_all").show();$("#vUser").val("").trigger("chosen:updated")});$("#vEmailTemplate").on("change",function(){var b=$("#vEmailTemplate").val(),a=$("#vSendTo").val();""!=b?$.post($bulkmail_variables,{from_id:a,sent_template:b},function(a){$("#templateVars").html(a);$("#templateVars").show();$("#div_editor").hide();initializejQueryChosenEvents()}):($("#templateVars").hide(),$("#div_editor").show())})},
getValidateSystemEmail:function(){if($("#frmbulkmailadd").valid()){var b={beforeSubmit:showAdminAjaxRequest,success:function(a,b,c,d){a=$.parseJSON(a);responseAjaxDataSubmission(a);if("0"==a.success)return!1}};$("#frmbulkmailadd").ajaxSubmit(b)}return!1},loadAdminBulkmail:function(b,a){setTimeout(function(){return!1},500)}};Project.modules.bulkmail.init();function changeParameters(b){var a=b.id;"Other"==b.value?$("#"+a+"_Other").show():$("#"+a+"_Other").hide()};