$(document).ready(function(){$(function(){$(document).on("click","[aria-save-row]",function(){var a=$(this).attr("aria-save-row"),b=$(this).attr("aria-row-id");saveInlineAddRecord(a,b)});$(document).on("click","[aria-cancel-row]",function(){var a=$(this).attr("aria-cancel-row"),b=$(this).attr("aria-row-id");cancelInlineAddRecord(a,b)});$(document).on("click","[aria-iadd-new]",function(){var a=$(this).attr("aria-iadd-new");addNewInlineRecord(a)});$(document).on("click","[aria-isave-all]",function(){var a=
$(this).attr("aria-isave-all");saveAllInlineRecords(a)});$(document).on("click","[aria-icancel-all]",function(){var a=$(this).attr("aria-icancel-all");cancelAllInlineRecords(a)});$(document).on("click","[aria-search-table]",function(){var a=$(this).attr("aria-search-table");$("#tbl_search_records_"+a).is(":visible")?($("#tbl_search_records_"+a).hide(),$(this).removeClass("minimize-search").addClass("maximize-search")):($("#tbl_search_records_"+a).show(),$(this).addClass("minimize-search").removeClass("maximize-search"))})})});
function initMainGridListing(){delete el_grid_settings.grid_subgrid_alias;el_grid_settings.load_post={};el_grid_settings.load_page=1;var a=el_tpl_settings.main_grid_id,b=el_tpl_settings.main_pager_id,d="",c="",e="",f="",g="",h=[],k=0,p=0,q=0,l=!1,v=!0,y=!0,B=!0,D=!0,C=getQueryParams(window.location.hash,el_tpl_settings.framework_vars);el_theme_settings.grid_filteropt?"none"!=el_theme_settings.grid_filteropt&&0<Object.keys(C).length&&(l=!0):0<Object.keys(C).length&&(l=!0);el_tpl_settings.page_animation||
(D=!1);var H="Yes"==el_grid_settings.subgrid||"Yes"==el_grid_settings.colgrid?!0:!1,E="Yes"==el_grid_settings.hide_paging_btn?!1:!0;C="1"==el_grid_settings.hide_add_btn&&"1"==el_grid_settings.permit_add_btn?!0:!1;var I="1"==el_grid_settings.hide_del_btn&&"1"==el_grid_settings.permit_del_btn?!0:!1,z="1"==el_grid_settings.hide_status_btn?!0:!1,x="1"!=el_grid_settings.hide_export_btn||"1"!=el_grid_settings.permit_expo_btn||el_general_settings.mobile_platform?!1:!0,w="Yes"==el_grid_settings.hide_columns_btn||
el_general_settings.mobile_platform?!1:!0,A="Yes"==el_grid_settings.hide_advance_search?!1:!0,M="Yes"==el_grid_settings.hide_refresh_btn?!1:!0,N="Yes"==el_grid_settings.inline_add&&"1"==el_grid_settings.permit_add_btn?!0:!1,J="Yes"==el_grid_settings.hide_search_tool?!1:!0,F=$.isArray(el_grid_settings.top_filter)?el_grid_settings.top_filter:[],t=$.isPlainObject(el_grid_settings.callbacks)?el_grid_settings.callbacks:{},u=$.isArray(el_grid_settings.buttons_arr)?el_grid_settings.buttons_arr:[],n="add_"+
a,m="del_"+a,P="search_"+a,r="refresh_"+a,O="columns_"+a,T="export_"+a;for(K in js_col_name_json)h.push(js_col_name_json[K].label);$(document).off("click","input[name='export_mode']");$(document).on("click","input[name='export_mode']",function(){"all"==$(this).val()?$("#export_columns_div").hide():$("#export_columns_div").show()});setTimeout(function(){initLeftPanelSearch(a);initLeftPanelAutocomplete(a)},200);l?getToolbarHashFilters():getAdminPreferenceLocal("before",a);C||I||z||A||w||M||x||N||"N"!=
el_tpl_settings.grid_top_menu||(y=!1);var K=findGridViewParam(window.location.hash,a,el_grid_settings.listview,el_grid_settings.enc_location+"_gv");var Q=getLocalStore(el_grid_settings.enc_location+"_st"),L=$("#main_content_div").width()-30;isFancyBoxActive()&&(D=B=!0,L=75*$(parent.window).width()/100-100);getColumnsWidth(el_grid_settings.enc_location+"_cw",a,js_col_model_json);1==Q?$("#grid_data_col").removeClass("hide-search-toolbar"):0==Q&&$("#grid_data_col").addClass("hide-search-toolbar");jQuery("#"+
a).jqGrid({postData:el_grid_settings.load_post.post,url:el_grid_settings.listing_url,editurl:el_grid_settings.edit_page_url,mtype:"POST",datatype:"json",colNames:h,colModel:js_col_model_json,page:el_grid_settings.load_page,pgbuttons:E,pginput:E,pgnumbers:el_theme_settings.grid_pgnumbers?!0:!1,pgnumlimit:el_general_settings.mobile_platform?2:parseInt(el_theme_settings.grid_pgnumlimit),pagingpos:el_theme_settings.grid_pagingpos,rowNum:"Yes"==el_grid_settings.hide_paging_btn?1E6:parseInt(el_tpl_settings.grid_rec_limit),
rowList:E?pager_row_list:[],sortname:el_grid_settings.default_sort,sortorder:el_grid_settings.sort_order,altRows:!0,altclass:"evenRow",multiselectWidth:30,multiselect:"Yes"==el_grid_settings.hide_multi_select?!1:!0,multiboxonly:!0,hiderecords:el_grid_settings.admin_rec_arr,viewrecords:!0,norecmsg:js_lang_label.GENERIC_GRID_NO_RECORDS_FOUND,caption:!1,hidegrid:!1,listview:K,viewtemplate:"#layout_view_"+a,gridtemplate:"#layout_grid_"+a,viewCallback:function(b,c){reloadListGrid(a,null,2,el_grid_settings);
setLocalStore(el_grid_settings.enc_location+"_gv",c)},listtags:["{%","%}"],inlineadd:"Yes"==el_grid_settings.inline_add?!0:!1,inlinerecpos:"Bottom"==el_grid_settings.rec_position?!0:!1,isSubMod:0,curModule:el_grid_settings.add_page_url,parModule:el_grid_settings.par_module,parData:el_grid_settings.par_data,parField:el_grid_settings.par_field,parType:el_grid_settings.par_type,extraHash:el_grid_settings.extra_hstr,ratingAllow:"Yes"==el_grid_settings.rating_allow?!0:!1,preSearch:el_grid_settings.load_post.search,
pager:"Y"==el_tpl_settings.grid_bot_menu?b:"",toppager:"Y"==el_tpl_settings.grid_top_menu?!0:!1,toppaging:"Y"==el_tpl_settings.grid_top_menu?!0:!1,showpaging:y,cellurl:el_grid_settings.edit_page_url,cellsubmit:"remote",sortable:{update:function(b){setColumnsPosition(el_grid_settings.enc_location+"_cp",b,a,js_col_model_json)}},searchGrid:{multipleSearch:!0,searchToolbar:J?!0:!1,topFilters:F,topDataInit:triggerTopFilterEvent},afterSearchToggle:function(a){var b=1;$("#hbox_"+a+"_jqgrid").find(".ui-search-toolbar").is(":hidden")&&
($("#listsearch_"+a+"_top").removeClass("active"),b=0);setLocalStore(el_grid_settings.enc_location+"_st",b);resizeGridWidth()},forceApply:!0,forceWidth:L,width:L,height:400,autowidth:"No"==el_grid_settings.auto_width?!1:!0,shrinkToFit:"No"==el_grid_settings.auto_width?!1:!0,fixed:!0,multiSort:el_tpl_settings.grid_multiple_sorting?!0:!1,subGrid:H,subGridWidth:18,subGridRowExpanded:function(b,c){var d="";var e=b+"_sub";if("Yes"!=el_grid_settings.subgrid||el_grid_settings.grid_subgrid_alias){if(!el_grid_settings.grid_subgrid_alias)for(var f in js_col_model_json)if(js_col_model_json[f].expandrow){el_grid_settings.grid_subgrid_alias=
js_col_model_json[f].index;break}d="&SGType=each&SGAlias="+el_grid_settings.grid_subgrid_alias}else d="&SGType=main";delete el_grid_settings.grid_subgrid_alias;initGirdLoadingOverlay(a);$("#"+b).html("<div id='"+e+"' class='scroll subgird-block'></div>");$("#"+e).html('<div class="subgrid-loader"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div>');$.ajax({url:el_grid_settings.subgrid_listing_url+"&SGRender=sub"+d,type:"POST",data:{SGID:c,SGridID:b},success:function(b){$("#"+e).addClass("subgrid_view_div_display");
$("#"+e).html(b);hideGirdLoadingOverlay(a);initializeSubgridEvents($("#"+e))}})},subGridRowColapsed:function(a,b){jQuery("#"+(a+"_sub")).remove();resizeGridWidth()},grouping:"Yes"==el_grid_settings.grouping?!0:!1,groupingView:{groupField:$.isArray(el_grid_settings.group_attr.field)?el_grid_settings.group_attr.field:[],groupOrder:$.isArray(el_grid_settings.group_attr.order)?el_grid_settings.group_attr.order:[],groupText:$.isArray(el_grid_settings.group_attr.text)?el_grid_settings.group_attr.text:[],
groupColumnShow:$.isArray(el_grid_settings.group_attr.column)?el_grid_settings.group_attr.column:[],groupSummary:$.isArray(el_grid_settings.group_attr.summary)?el_grid_settings.group_attr.summary:[],showSummaryOnHide:$.isArray(el_grid_settings.group_attr.summary)?el_grid_settings.group_attr.summary:[],groupCollapse:!1,groupDataSorted:!0},footerrow:"Yes"==el_grid_settings.footer_row?!0:!1,userDataOnFooter:!0,beforeRequest:function(){v?(v=!1,l?getHashFilterConditions(el_tpl_settings.main_grid_id):getAdminPreferenceLocal("after",
a),getColumnsPosition(el_grid_settings.enc_location+"_cp",a),getColumnsChoosen(el_grid_settings.enc_location+"_cs",a)):el_theme_settings.grid_filteropt?"always"==el_theme_settings.grid_filteropt&&getHashFilterConditions(el_tpl_settings.main_grid_id):getHashFilterConditions(el_tpl_settings.main_grid_id)},beforeProcessing:function(a){q=0;delete el_general_settings.grid_main_link_model;a&&a.records&&(q=a.records);a&&a.links&&(el_general_settings.grid_main_link_model=a.links)},loadError:function(b,c,
d){hideGirdLoadingOverlay(a)},loadComplete:function(b){hideGirdLoadingOverlay(a);Project.hide_adaxloading_div();$("#"+a+"_messages_html").remove();$("#selAllRows").val("false");noRecordsMessage(a,b);D?D=!1:(resizeGridWidth(),checkColumnsWidth(el_grid_settings.enc_location+"_cw",a));applySearchCriteria(a);applyGridRowColors(a,b);initializeFancyBoxEvents();setTimeout(function(){initNiceScrollBar()},100);if(t.after_data_load&&$.isFunction(window[t.after_data_load]))window[t.after_data_load](b)},gridComplete:function(){$(".ui-jqgrid-sortable").mousedown(function(){$(this).css("cursor",
"crosshair")});$(".ui-jqgrid-sortable").mouseup(function(){$(this).css({cursor:"pointer"})});$("#grid_data_col").hasClass("hide-search-toolbar")||$("#listsearch_"+a+"_top").addClass("active");B?B=!1:resizeGridWidth();hideAdminDataCheckBox(a,el_grid_settings.admin_rec_arr);getAdminImageTooltip(a);l||setAdminPreferenceLocal(a)},ondblClickRow:function(a,b,c,d){a=$(this);var e=a.jqGrid("getGridParam","listview");if("view"!=e&&"grid"!=e){e=$(d.srcElement).hasClass("add-cell")?1:0;var f="inline-add-row"==
$(d.srcElement).attr("aria-newrow")?1:0,g=0<$(d.srcElement).find(".inline-edit-row").length?1:0,m=$(d.srcElement).hasClass("inline-edit-row")?1:0,h=$(d.srcElement).closest("td[role='gridcell']").hasClass("edit-cell")?1:0;e||f||g||m||h?d.stopPropagation():(a.jqGrid("setGridParam",{cellEdit:!0}),a.jqGrid("editCell",b,c,!0),a.jqGrid("setGridParam",{cellEdit:!1}))}},beforeEditCell:function(a,b,c,d,e){restoreBeforeEditedCell(this,k,p,f);$(".colpick").length&&$(".colpick").hide()},afterEditCell:function(a,
b,c,d,e){var m=this.rows[d].cells[e],h,n=$("#"+d+"_"+b,m),R=$._data(n.get(0),"events"),r=n.selector,l=$(this),q=!1,K=!1,S=!1;n.hasClass("dateOnly")?(inlineDateTimePicker(d,b,"date"),q=!0):n.hasClass("timeOnly")?(inlineDateTimePicker(d,b,"time"),q=!0):n.hasClass("dateTime")?(inlineDateTimePicker(d,b,"dateTime"),q=!0):n.hasClass("colorPicker")?(inlineColorPicker(d,b,"colorPicker"),K=!0):n.hasClass("phoneNumber")?S=!0:n.hasClass("inline-textarea-edit")&&(b=$(n).val(),b=b.replace(/<br>/g,""),b=b.replace(/<BR>/g,
""),$(n).val(b));k=d;p=e;f=$.isArray(this.p.savedRow)?this.p.savedRow[this.p.savedRow.length-1].v:"";if($(m).find("select[role='select']").length){$cellDrop=$(m).find("select[role='select']");$($cellDrop).attr("aria-update-id",a);g=this.p.savedRow;$($cellDrop).on("change",function(a){l.jqGrid("setGridParam",{cellEdit:!0});l.jqGrid("setGridParam",{savedRow:g});l.jqGrid("saveCell",d,e);l.jqGrid("restoreCell",d,e,!0);$(m).removeClass("ui-state-highlight");p=k=0;f="";g=l.jqGrid("getGridParam","savedRow")});
var O=setInterval(function(){$(r).hasClass("chosen-select")&&$(r+"_chosen").length&&($(r+"_chosen").on("keydown",function(a){27==a.keyCode?"-9999px"==$(r+"_chosen").find(".chosen-drop").css("left")&&(l.jqGrid("setGridParam",{cellEdit:!0}),l.jqGrid("setGridParam",{savedRow:g}),l.jqGrid("restoreCell",d,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f=""):9==a.keyCode&&(l.jqGrid("setGridParam",{cellEdit:!0}),l.jqGrid("setGridParam",{savedRow:g}),a.shiftKey?l.jqGrid("prevCell",d,e):l.jqGrid("nextCell",
d,e))}),clearInterval(O))},250)}else applyInputTextCase($(m)),g=this.p.savedRow,setTimeout(function(){R&&R.keydown&&R.keydown.length&&(l.jqGrid("setGridParam",{savedRow:g}),h=R.keydown[0].handler,n.unbind("keydown",h),n.bind("keydown",function(a){l.jqGrid("setGridParam",{cellEdit:!0});l.jqGrid("setGridParam",{savedRow:g});n.hasClass("inline-textarea-edit")?13===a.keyCode?a.shiftKey?a.stopPropagation():(l.jqGrid("saveCell",d,e),l.jqGrid("restoreCell",d,e,!0),$(m).removeClass("ui-state-highlight"),
p=k=0,f=""):h.call(this,a):(n.hasClass("colorPicker")&&(9===a.keyCode||13===a.keyCode||27===a.keyCode)&&$(".colpick").length&&$(".colpick").hide(),h.call(this,a));l.jqGrid("setGridParam",{cellEdit:!1})}).bind("focusout",function(a){l.jqGrid("setGridParam",{savedRow:g});q?$(".ui-datepicker").is(":hidden")&&(l.jqGrid("setGridParam",{cellEdit:!0}),l.jqGrid("restoreCell",d,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f=""):K?$(".colpick#"+n.attr("colorpickerid")).is(":hidden")&&(l.jqGrid("setGridParam",
{cellEdit:!0}),l.jqGrid("restoreCell",d,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f=""):(l.jqGrid("setGridParam",{cellEdit:!0}),1==S&&l.jqGrid("saveCell",d,e),l.jqGrid("restoreCell",d,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f="")}))},100)},beforeSubmitCell:function(a,b,c,d,e){if(t.before_rec_edit&&$.isFunction(window[t.before_rec_edit]))return window[t.before_rec_edit](a,b,c,d,e)},afterSubmitCell:function(b,c,d,e,f,g){if(1!=b.responseText){var m=JSON.parse(b.responseText),h=$("#"+
a).jqGrid("getGridParam","colNames");var n=!0;var k=m.message;"false"==m.success?(n=!1,k+=" : "+h[g]):"2"==m.success?reloadListGrid(a):"3"==m.success||"4"==m.success?isRedirectEqualHash(m.red_hash)?(window.location.hash=m.red_hash,window.location.reload()):window.location.hash=m.red_hash:"5"==m.success&&(window.location.href=m.red_hash);gridReportMessage(n,k)}else n=!0;return t.after_rec_edit&&$.isFunction(window[t.after_rec_edit])?window[t.after_rec_edit](b,c,d,e,f,g):[n,m.message]},beforeSaveCell:function(a,
b,c,d,e){},afterSaveCell:function(a,b,c,d,e){},onSortCol:function(b,c,d){$("#"+a).setGridParam({defaultsort:"No"});activateGridSortColumns(a)},resizeStop:function(b,c){setColumnsWidth(el_grid_settings.enc_location+"_cw",a)},beforeSelectRow:function(a,b){multiSelectHandler(a,b)}});J&&jQuery("#"+a).jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,searchOperators:el_theme_settings.grid_searchopt?!0:!1});h=function(c,d){var e,f="";(e=el_theme_settings.grid_icons_del||d.del&&"Yes"==d.del.icon_only?
!0:!1)||(f=d.del&&d.del.text?d.del.text:js_lang_label.GENERIC_GRID_DELETE);var g=d.del&&d.del.title?d.del.title:js_lang_label.GENERIC_GRID_DELETE_SELECTED_ROW;var h,n="";(h=el_theme_settings.grid_icons_search||d.search&&"Yes"==d.search.icon_only?!0:!1)||(n=d.search&&d.search.text?d.search.text:js_lang_label.GENERIC_GRID_SEARCH);var k=d.search&&d.search.title?d.search.title:js_lang_label.GENERIC_GRID_ADVANCE_SEARCH;var l,q="";(l=el_theme_settings.grid_icons_refresh||d.refresh&&"Yes"==d.refresh.icon_only?
!0:!1)||(q=d.refresh&&d.refresh.text?d.refresh.text:js_lang_label.GENERIC_GRID_SHOW_ALL);var p=d.refresh&&d.refresh.title?d.refresh.title:js_lang_label.GENERIC_GRID_SHOW_ALL_LISTING_RECORDS;jQuery("#"+a).jqGrid("navGrid","#"+b,{cloneToTop:!0,add:!1,addicon:"ui-icon-plus",edit:!1,editicon:"ui-icon-pencil",del:I,delicon:"ui-icon-trash",delicon_p:e?"uigrid-del-btn del-icon-only":"uigrid-del-btn",deltext:f,deltitle:g,search:A,searchicon:"ui-icon-search",searchicon_p:h?"uigrid-search-btn search-icon-only":
"uigrid-search-btn",searchtext:n,searchtitle:k,refresh:M,refreshicon:"ui-icon-refresh",refreshicon_p:l?"uigrid-refresh-btn refresh-icon-only":"uigrid-refresh-btn",refreshtext:q,refreshtitle:p,alerttext:js_lang_label.GENERIC_GRID_PLEASE_SELECT_ANY_RECORD,beforeRefresh:function(){$("#left_search_panel").length&&($("#input_left_search").val(""),$("#left_search_items").html('<div align="center" class="left-search-loader"><i class="fa fa-refresh fa-spin fa-3x fa-fw"></i></div>'),$.ajax({url:el_grid_settings.search_refresh_url,
type:"POST",data:{tempalte:"Yes"},success:function(b){$("#left_search_items").html(b);initLeftPanelAutocomplete(a)}}));$("#"+a).setGridParam({sortname:el_grid_settings.default_sort,sortorder:el_grid_settings.sort_order,defaultsort:"Yes"});activateGridSortColumns(a)},afterRefresh:function(){$("#hbox_"+a+"_jqgrid").find(".search-chosen-select").find("option").removeAttr("selected");$("#hbox_"+a+"_jqgrid").find(".search-chosen-select").trigger("chosen:updated");$("#hbox_"+a+"_jqgrid").find(".search-token-autocomplete").length&&
$("#hbox_"+a+"_jqgrid").find(".search-token-autocomplete").each(function(){$(this).tokenInput("clear")});$("#hbox_"+a+"_jqgrid").find(".top-filter-chosen").find("option").removeAttr("selected");$("#hbox_"+a+"_jqgrid").find(".top-filter-chosen").trigger("chosen:updated");$("#hbox_"+a+"_jqgrid").find(".top-filter-autocomplete").length&&$("#hbox_"+a+"_jqgrid").find(".top-filter-autocomplete").each(function(){$(this).tokenInput("clear")})}},{},{},{id:m,width:350,caption:js_lang_label.GENERIC_GRID_DELETE,
msg:js_lang_label.GENERIC_GRID_ARE_YOU_SURE_WANT_TO_DELETE_SELECTED_RECORDS,bSubmit:js_lang_label.GENERIC_GRID_DELETE,bCancel:js_lang_label.GENERIC_GRID_CANCEL,modal:!0,closeOnEscape:!0,serializeDelData:function(b){var d=jQuery("#selAllRows").val();return{id:b.id,oper:b.oper,AllRowSelected:d,filters:$("#"+a).getGridParam("postData").filters}},beforeSubmit:function(a){return t.before_rec_delete&&$.isFunction(window[t.before_rec_delete])?window[t.before_rec_delete](a):[!0,""]},afterSubmit:function(a,
b){var d=$.parseJSON(a.responseText);if("true"==d.success){var c=js_lang_label.GENERIC_GRID_RECORDS_DELETED_SUCCESSFULLY;""!=d.message&&(c=d.message);d=!0}else c=js_lang_label.GENERIC_GRID_ERROR_IN_DELETION,""!=d.message&&(c=d.message),d=!1;gridReportMessage(d,c);if(t.after_rec_delete&&$.isFunction(window[t.after_rec_delete]))window[t.after_rec_delete](a,b);return[!0,c]}},{id:P,multipleSearch:!0,multipleGroup:"1"==el_grid_settings.group_search?!0:!1,showQuery:!1,Find:js_lang_label.GENERIC_GRID_FIND,
Reset:js_lang_label.GENERIC_GRID_RESET,width:700,height:275,closeOnEscape:!0,modal:!0,closeAfterSearch:!0},{},{id:r},{order:c})};y=function(d,e){var f,m="";(f=el_theme_settings.grid_icons_add||"Yes"==e.icon_only?!0:!1)||(m=e.text?e.text:js_lang_label.GENERIC_GRID_ADD_NEW);var g=e.title?e.title:js_lang_label.GENERIC_GRID_ADD_NEW;c=n;jQuery("#"+a).navButtonAdd("#"+b,{caption:m,title:g,buttonicon:"ui-icon-plus",buttonicon_p:f?"uigrid-add-btn add-icon-only":"uigrid-add-btn",onClickButton:function(){adminAddNewRecord(el_grid_settings.add_page_url,
el_grid_settings.extra_hstr,el_grid_settings.popup_add_form,a,el_grid_settings.popup_add_size)},id:c,afterButtonId:d,position:"first"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:m,title:g,buttonicon:"ui-icon-plus",buttonicon_p:f?"uigrid-add-btn add-icon-only":"uigrid-add-btn",onClickButton:function(){adminAddNewRecord(el_grid_settings.add_page_url,el_grid_settings.extra_hstr,el_grid_settings.popup_add_form,a,el_grid_settings.popup_add_size)},id:c+"_top",afterButtonId:d?d+"_top":"",
position:"first"})};H=function(f){var m;for(m in el_grid_settings.status_arr)if(el_grid_settings.status_arr[m]){var g=el_grid_settings.status_arr[m];var h=eval(el_grid_settings.status_lang_arr[m]);var n=(g||"").replace(/(\s)/g,"").toLowerCase();c="status_"+m+"_"+a;e=0==m?f:"status_"+d+"_"+a;jQuery("#"+a).navButtonAdd("#"+b,{caption:h,title:h,lang:g,buttonicon:"ui-icon-newwin",buttonicon_p:"uigrid-status-common uigrid-status-btn-"+n,onClickButton:function(b,d){var c=filterGridSelectedIDs(this);adminStatusChange(a,
d.lang,c,el_grid_settings.edit_page_url,d.title,t)},id:c,afterButtonId:e,position:"first"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:h,title:h,lang:g,buttonicon:"ui-icon-newwin",buttonicon_p:"uigrid-status-common uigrid-status-btn-"+n,onClickButton:function(b,d){var c=filterGridSelectedIDs(this);adminStatusChange(a,d.lang,c,el_grid_settings.edit_page_url,d.title,t)},id:c+"_top",afterButtonId:e?e+"_top":"",position:"first"});d=m}};E=function(d,e){var f,m="";(f=el_theme_settings.grid_icons_columns||
"Yes"==e.icon_only?!0:!1)||(m=e.text?e.text:js_lang_label.GENERIC_GRID_COLUMNS);var g=e.title?e.title:js_lang_label.GENERIC_GRID_HIDESHOW_COLUMNS;c=O;jQuery("#"+a).navButtonAdd("#"+b,{caption:m,title:g,buttonicon:"ui-icon-columns",buttonicon_p:f?"uigrid-col-btn col-icon-only":"uigrid-col-btn",onClickButton:function(){jQuery("#"+a).jqGrid("columnChooser",{classname:"grid-columns-picker",dialog_opts:{modal:!0,minWidth:460},msel_opts:{autoOpen:!0,beforeopen:function(a,b){applyUIButtonCSS()}},beforeSubmit:function(a){if(null!=
$("#"+a).find("select").val())return!0;jQuery.jgrid.info_dialog(js_lang_label.GENERIC_GRID_ERROR,js_lang_label.GENERIC_GRID_PLEASE_SELECT_ATLEAST_ONE_COLUMN,js_lang_label.GENERIC_GRID_OK);return!1},done:function(b){b&&(setColumnsChoosen(el_grid_settings.enc_location+"_cs",a),reloadListGrid(a))}})},position:"last",id:c,afterButtonId:d});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:m,title:g,buttonicon:"ui-icon-columns",buttonicon_p:f?"uigrid-col-btn col-icon-only":"uigrid-col-btn",onClickButton:function(){jQuery("#"+
a).jqGrid("columnChooser",{classname:"grid-columns-picker",dialog_opts:{modal:!0,minWidth:460},msel_opts:{autoOpen:!0,beforeopen:function(a,b){applyUIButtonCSS()}},beforeSubmit:function(a){if(null!=$("#"+a).find("select").val())return!0;jQuery.jgrid.info_dialog(js_lang_label.GENERIC_GRID_ERROR,js_lang_label.GENERIC_GRID_PLEASE_SELECT_ATLEAST_ONE_COLUMN,js_lang_label.GENERIC_GRID_OK);return!1},done:function(b){b&&(setColumnsChoosen(el_grid_settings.enc_location+"_cs",a),reloadListGrid(a))}})},position:"last",
id:c+"_top",afterButtonId:d?d+"_top":""})};J=function(d,e){var f,m="";(f=el_theme_settings.grid_icons_export||"Yes"==e.icon_only?!0:!1)||(m=e.text?e.text:js_lang_label.GENERIC_GRID_EXPORT);var g=e.title?e.title:js_lang_label.GENERIC_GRID_EXPORT;c=T;var h="<div class='data-export-main'>";h+="<div class='export-row'>\n                            <div class='export-left'><strong>"+js_lang_label.GENERIC_GRID_EXPORT_MODE+":</strong></div>\n                            <div class='export-right'>\n                                <input type='radio' class='regular-radio export-mode-selected' name='export_mode' value='selected' id='export_mode_selected' checked=true><label for='export_mode_selected'>&nbsp;</label>\n                                <label for='export_mode_selected' class='export-label-modes'>"+
js_lang_label.GENERIC_GRID_SELECTED+"</label>&nbsp;&nbsp;\n                                <input type='radio' class='regular-radio export-mode-all' name='export_mode' value='all' id='export_mode_all'><label for='export_mode_all'>&nbsp;</label>\n                                <label for='export_mode_all' class='export-label-modes'>"+js_lang_label.GENERIC_GRID_ALL+"</label>\n                            </div>\n                        </div>";h+="<div class='export-row' id='export_columns_div'>\n                            <div class='export-left'><strong>"+
js_lang_label.GENERIC_GRID_SELECT_COLUMNS+":</strong></div>\n                            <div class='export-right'>"+getColumnsDropDown(a,"columns_list","columns_list","","multiple")+" </div>\n                        </div>";h+="<div class='export-row'>\n                            <div class='export-left'><strong>"+js_lang_label.GENERIC_GRID_EXPORT_TO+":</strong></div>\n                            <div class='export-right'>\n                                <input type='radio' class='regular-radio export-type-csv' name='export_type' value='csv' id='export_type_csv' checked=true><label for='export_type_csv'>&nbsp;</label>\n                                <label for='export_type_csv' class='export-label-modes'><i class='fa fa-file-excel-o fa-2x icon-csv'></i></label>\n                                <input type='radio' class='regular-radio export-type-pdf' name='export_type' value='pdf' id='export_type_pdf'><label for='export_type_pdf'>&nbsp;</label>\n                                <label for='export_type_pdf' class='export-label-modes'><i class='fa fa-file-pdf-o fa-2x icon-pdf'></i></label>\n                            </div>\n                            <div class='clear'></div>\n                        </div>";
h+="<div class='clear'></div>";h+="</div>";jQuery("#"+a).navButtonAdd("#"+b,{caption:m,title:g,buttonicon:"ui-icon-export",buttonicon_p:f?"uigrid-export-btn export-icon-only":"uigrid-export-btn",onClickButton:function(){jQuery.jgrid.info_dialog("Export",h,"",{width:600,resize:!0,modal:!0,buttons:[{text:js_lang_label.GENERIC_GRID_EXPORT_ALL+" "+q+" "+js_lang_label.GENERIC_GRID_RECORDS,id:"btn_all",onClick:function(){exportData(a,"All",el_grid_settings.export_url)}},{text:js_lang_label.GENERIC_GRID_EXPORT_CURRENT_PAGE_RECORDS,
id:"btn_page",onClick:function(){exportData(a,"thispage",el_grid_settings.export_url)}}]});$("#columns_list").multiselect({noneSelectedText:js_lang_label.GENERIC_GRID_SELECT_COLUMNS,minWidth:300}).multiselectfilter()},position:"last",id:c,afterButtonId:d});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:m,title:g,buttonicon:"ui-icon-export",buttonicon_p:f?"uigrid-export-btn export-icon-only":"uigrid-export-btn",onClickButton:function(){jQuery.jgrid.info_dialog(js_lang_label.GENERIC_GRID_EXPORT,
h,"",{width:600,resize:!0,modal:!0,buttons:[{text:js_lang_label.GENERIC_GRID_EXPORT_ALL+" "+q+" "+js_lang_label.GENERIC_GRID_RECORDS,id:"btn_all",onClick:function(){exportData(a,"All",el_grid_settings.export_url)}},{text:js_lang_label.GENERIC_GRID_EXPORT_CURRENT_PAGE_RECORDS,id:"btn_page",onClick:function(){exportData(a,"thispage",el_grid_settings.export_url)}}]});$("#columns_list").multiselect({noneSelectedText:js_lang_label.GENERIC_GRID_SELECT_COLUMNS,minWidth:300}).multiselectfilter()},position:"last",
id:c+"_top",afterButtonId:d?d+"_top":""})};F=function(){jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_ADD_NEW,buttonicon:"icon16 iconic-icon-plus-alt",buttonicon_p:"uigrid-inlineadd-btn",buttonname:"addnew",onClickButton:function(b){addNewInlineRecord(a)},id:"inlineadd_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_ADD_NEW,buttonicon:"icon16 iconic-icon-plus-alt",buttonicon_p:"uigrid-inlineadd-btn",
buttonname:"addnew",onClickButton:function(b){addNewInlineRecord(a)},id:"inlineadd_"+a+"_top",position:"last"});jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_SAVE_ALL,buttonicon:"icon16 iconic-icon-check-alt",buttonicon_p:"uigrid-inlinesave-btn",buttonname:"saveall",onClickButton:function(b){saveAllInlineRecords(a)},id:"saveall_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_SAVE_ALL,buttonicon:"icon16 iconic-icon-check-alt",
buttonicon_p:"uigrid-inlinesave-btn",buttonname:"saveall",onClickButton:function(b){saveAllInlineRecords(a)},id:"saveall_"+a+"_top",position:"last"});jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_CANCEL_ALL,buttonicon:"icon16 icomoon-icon-cancel-2",buttonicon_p:"uigrid-cancelall-btn",buttonname:"cancelall",onClickButton:function(b){cancelAllInlineRecords(a)},id:"cancelall_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_CANCEL_ALL,
buttonicon:"icon16 icomoon-icon-cancel-2",buttonicon_p:"uigrid-cancelall-btn",buttonname:"cancelall",onClickButton:function(b){cancelAllInlineRecords(a)},id:"cancelall_"+a+"_top",position:"last"})};if(0<u.length){K=[];Q={};for(var G=0;G<u.length&&!(L=u[G].name,-1!=$.inArray(L,["del","search","refresh"])&&(K.push(L),Q[L]=u[G]),3<=K.length);G++);h(K,Q);for(G=0;G<u.length;G++)if("custom"==u[G].type)c=createCustomGridButton(u[G],a,b,c);else if((L=u[G].name)&&"status"==L.substring(0,6))z&&H(c);else switch(L){case "del":I&&
(c=m);break;case "search":A&&(c=P);break;case "refresh":M&&(c=r);break;case "add":C&&y(c,u[G]);break;case "columns":w&&E(c,u[G]);break;case "export":x&&J(c,u[G])}}else h([],{}),C&&y(c,{}),I&&(c=m),z&&H(c),w&&E(c,{}),x&&J(c,{});N&&F();$(".cbox").change(function(){setTimeout(function(){$("#cb_"+a).is(":checked")?($("#"+a+"_messages_html").length||$("#"+a+"_toppager").after("<div id='"+a+"_messages_html' style='text-align:center;'><a id='"+a+"_messages' href='javascript:void(0);'> "+js_lang_label.GENERIC_GRID_SELECT_ALL+
" "+q+" "+js_lang_label.GENERIC_GRID_RECORDS+"</a></span></div>"),$("#"+a+"_messages").off("click"),$("#"+a+"_messages").on("click",function(){$("#selAllRows").val("true");$("#"+a+"_messages_html").html(js_lang_label.GENERIC_GRID_ALL+" "+q+" "+js_lang_label.GENERIC_GRID_RECORDS_ARE_SELECTED+' <a id="clearSelections" href="javascript:void(0);">'+js_lang_label.GENERIC_GRID_CLEAR_SELECTIONS+"</a>");$("#clearSelections").unbind();$("#clearSelections").click(function(){$("#"+a).resetSelection();$("#"+
a+"_messages_html").remove()})})):($("#"+a+"_messages_html").remove(),$("#selAllRows").val("false"))},100)});$(document).off("click",".expand-subview");$(document).on("click",".expand-subview",function(){var b=$(this).attr("aria-alias"),d=$(this).attr("aria-rowid");el_grid_settings.grid_subgrid_alias&&b==el_grid_settings.grid_subgrid_alias?(el_grid_settings.grid_subgrid_alias=b,$("#"+a).jqGrid("toggleSubGridRow",d)):(el_grid_settings.grid_subgrid_alias=b,$("#"+a).jqGrid("toggleSubGridRow",d),setTimeout(function(){$("#"+
a).jqGrid("expandSubGridRow",d)},100))});var U=$.jgrid.viewModal;$.extend($.jgrid,{viewModal:function(a,b){if(a=="#searchmodfbox_"+b.gid||"#alertmod"==a||a=="#delmod"+b.gid||"#info_dialog"==a){var d=jQuery("#gbox_"+el_tpl_settings.main_grid_id).offset();jQuery("#gbox_"+el_tpl_settings.main_grid_id).width();var c=jQuery("#gbox_"+el_tpl_settings.main_grid_id).height(),e=$(a).width(),f=$(a).height();$(a).css({top:d.top+(c-f)/2-40,left:"calc(50% - "+e/2+"px)"})}U.call(this,a,b)}});var V=$.jgrid.info_dialog;
$.extend($.jgrid,{info_dialog:function(a,b,d,c){return V.call(this,a,b,d,c)}})}function setAdminPreferenceLocal(a){if(!isLocalStorageAllow())return!1;var b={};a=$("#"+a);b.sortname=a.jqGrid("getGridParam","sortname");b.sortorder=a.jqGrid("getGridParam","sortorder");b.page=a.jqGrid("getGridParam","page");b.rowNum=a.jqGrid("getGridParam","rowNum");b.postData=a.jqGrid("getGridParam","postData");setLocalStore(el_grid_settings.enc_location+"_sh",JSON.stringify(b),!0)}
function getAdminPreferenceLocal(a,b){if(!isLocalStorageAllow())return"before"==a&&(el_grid_settings.load_post.post={},el_grid_settings.load_post.search={}),!1;var d=getLocalStore(el_grid_settings.enc_location+"_sh",!0),c=$.parseJSON(d);if("before"==a){el_grid_settings.load_post.post={};if(el_grid_settings.filters_arr&&el_grid_settings.filters_arr.groups){var e=el_grid_settings.filters_arr.groupOp;d=el_grid_settings.filters_arr.groups;apply_default_filter=!1;e={groupOp:e,rules:[],groups:[]};if($.isArray(d)&&
0<d.length)for(q in d){var f=d[q];var g=f.rules;var h=[];if($.isArray(g)&&0<g.length){for(var k in g)if("undefined"!=typeof g[k].field&&g[k].field&&g[k].data){var p=g[k].data;h.push({field:g[k].field,op:g[k].op,data:p});apply_default_filter=!0}if("1"==el_grid_settings.group_search)e.groups.push({groupOp:f.groupOp,rules:h,groups:[]});else{e.rules=h;delete e.groups;break}}}apply_default_filter&&(el_grid_settings.load_post.post={filters:JSON.stringify(e)})}else d&&c&&c.postData&&c.postData.filters&&
(el_grid_settings.load_post.post={filters:c.postData.filters});d=!0;el_grid_settings.load_post.post.sdef="Yes";if(c&&c.sortname){e=c.sortname.split(",");k=c.sortorder.split(",");"Yes"==el_grid_settings.grouping&&$.isArray(el_grid_settings.group_attr.field)&&(el_grid_settings.group_attr.field[1]&&(e.unshift(el_grid_settings.group_attr.field[1]),k.unshift(el_grid_settings.group_attr.order[1]||"asc")),e.unshift(el_grid_settings.group_attr.field[0]),k.unshift(el_grid_settings.group_attr.order[0]||"asc"));
for(l in js_col_model_json)if(-1==$.inArray(js_col_model_json[l].index,e)){d=!1;break}d&&(el_grid_settings.load_post.post.sidx=e.join(","),el_grid_settings.load_post.post.sord=k.join(","))}c&&c.page&&(el_grid_settings.load_post.post.page=c.page);c&&c.rowNum&&(el_grid_settings.load_post.post.rows=parseInt(c.rowNum));el_grid_settings.load_post&&el_grid_settings.load_post.post&&el_grid_settings.load_post.post.filters&&keepSearchToolbarValue(b,js_col_model_json,el_grid_settings.load_post.post.filters,
"local")}else if("after"==a){var q=$("#"+b).getGridParam("postData");q=$.isPlainObject(q)?q:{};if(d&&c){d=!0;if(c.sortname){e=c.sortname.split(",");k=c.sortorder.split(",");"Yes"==el_grid_settings.grouping&&$.isArray(el_grid_settings.group_attr.field)&&(el_grid_settings.group_attr.field[1]&&(e.unshift(el_grid_settings.group_attr.field[1]),k.unshift(el_grid_settings.group_attr.order[1]||"asc")),e.unshift(el_grid_settings.group_attr.field[0]),k.unshift(el_grid_settings.group_attr.order[0]||"asc"));
for(l in js_col_model_json)if(-1==$.inArray(js_col_model_json[l].index,e)){d=!1;break}if(d){var l=e.join(",");$("#"+b).setGridParam({sortname:l});q.sidx=l;$.isArray(k)&&k.length&&(l=k.join(","),$("#"+b).setGridParam({sortorder:l}),q.sord=l)}}c.page&&(l=c.page,$("#"+b).setGridParam({page:l}),q.page=l);c.rowNum&&(c=parseInt(c.rowNum),$("#"+b).setGridParam({rowNum:c}),$("select[class='ui-pg-selbox'][role='listbox']").val(c),q.rows=c);$("#"+b).setGridParam("postData",q)}}return!0}
function keepSearchToolbarValue(a,b,d,c){if(d&&(d=$.parseJSON(d))&&d.rules){a=d.rules;d=[];c={};var e={},f,g;for(g in b)"cb"!=b[g].name&&"subgrid"!=b[g].name&&"prec"!=b[g].name&&(c[b[g].name]=b[g]);for(g=0;g<a.length;g++){var h=a[g].field;!(f=c[h])||a[g].op!=f.filterSopt||""==a[g].data||"-1"!=$.inArray(h,d)&&"in"!=f.filterSopt||($.isPlainObject(e[h])||(e[h]={}),$.isArray(e[h].data)||(e[h].data=[]),b=a[g].data,"in"==f.filterSopt?(f=e[h].data,$.isArray(f)&&(b=$.isArray(b)?b:b.split(","),b.concat(f)),
e[h].data=b):e[h].data.push(b),d.push(h))}el_grid_settings.load_post.search=e}}
function getToolbarHashFilters(a){var b=getQueryParams(window.location.hash,el_tpl_settings.framework_vars);if(Object.keys(b).length){var d=[];if(1<js_col_model_json.length)for(var c in js_col_model_json)js_col_model_json[c].name?d.push(js_col_model_json[c].name):d.push("-1");if(0<d.length){c={};var e;c.rules=[];for(e in b)if(""!=e&&0<=$.inArray(e,d)){var f=d.indexOf(e);js_col_model_json[f].stype&&"select"==js_col_model_json[f].stype?(js_col_model_json[f].filterSopt="in",c.rules.push({field:e,op:"in",
data:b[e]})):(js_col_model_json[f].filterSopt="eq",c.rules.push({field:e,op:"eq",data:b[e]}))}keepSearchToolbarValue(a,js_col_model_json,JSON.stringify(c),"hash")}}}
function getHashFilterConditions(a){var b=getQueryParams(window.location.hash,el_tpl_settings.framework_vars);if(Object.keys(b).length){var d=[];a=$("#"+a);var c=a.jqGrid("getGridParam","colModel");if(1<c.length)for(var e in c)c[e].name&&d.push(c[e].name);if(0<d.length){var f;e=(e=a.jqGrid("getGridParam","postData"))&&e.filters?$.parseJSON(e.filters):{};e={groupOp:"AND",rules:e&&e.rules?e.rules:[],entrys:e&&e.entrys?e.entrys:"",range:e&&e.range?e.range:""};for(f in b)""!=f&&0<=$.inArray(f,d)&&e.rules.push({field:f,
op:"eq",data:b[f]});a[0].p.search=!0;$.extend(a[0].p.postData,{filters:JSON.stringify(e)})}}}function getQueryParams(a,b){var d={},c=$.isArray(b)?b:[];if(!a)return d;a=a.toString().replace(/%7c/gi,"|");for(var e=a.split("|"),f=1;f<e.length;f+=2)if(e[f]&&"-1"==$.inArray(e[f],c)){var g=unescape(e[f]),h=e[f+1]?unescape(e[f+1]):"";h.replace(/\+/g," ");d[g]=h}return d}
function findGridViewParam(a,b,d,c){if(!a)return d;var e=["list","view","grid"];if(!$("#layout_view_"+b).length&&!$("#layout_grid_"+b).length)return d;a=a.toString().replace(/%7c/gi,"|");a=a.split("|");for(b=1;b<a.length;b+=2)if("view"==a[b]){var f=a[b+1]?unescape(a[b+1]):"";f="list"==f?"view":"grid"==f?"grid":"list";break}f&&-1!=$.inArray(f,e)||(f=getLocalStore(c));-1!=$.inArray(f,e)&&(d=f);return d}
function initSubGridListing(){delete el_subgrid_settings.grid_nesgrid_alias;var a=el_subgrid_settings.table_id,b=el_subgrid_settings.pager_id,d="",c="",e="",f="",g="",h=[],k=0,p=0,q=!0,l=!0,v="Yes"==el_subgrid_settings.nesgrid?!0:!1,y="Yes"==el_subgrid_settings.hide_paging_btn?!1:!0,B="1"==el_subgrid_settings.hide_add_btn&&"1"==el_subgrid_settings.permit_add_btn&&"1"==el_subgrid_settings.advanced_grid?!0:!1,D="1"==el_subgrid_settings.hide_del_btn&&"1"==el_subgrid_settings.permit_del_btn&&"1"==el_subgrid_settings.advanced_grid?
!0:!1,C="1"==el_subgrid_settings.hide_status_btn&&"1"==el_subgrid_settings.advanced_grid?!0:!1,H="Yes"==el_subgrid_settings.hide_advance_search||"1"!=el_subgrid_settings.advanced_grid?!1:!0,E="Yes"==el_subgrid_settings.hide_refresh_btn||"1"!=el_subgrid_settings.advanced_grid?!1:!0,I="Yes"==el_subgrid_settings.inline_add&&"1"==el_subgrid_settings.permit_add_btn&&"1"==el_subgrid_settings.advanced_grid?!0:!1,z="Yes"==el_subgrid_settings.hide_search_tool?!1:!0,x=$.isPlainObject(el_subgrid_settings.top_filter)?
el_subgrid_settings.top_filter:[],w=$.isPlainObject(el_subgrid_settings.callbacks)?el_subgrid_settings.callbacks:{},A=$.isArray(el_subgrid_settings.buttons_arr)?el_subgrid_settings.buttons_arr:[],M="add_"+a,N="del_"+a,J="search_"+a,F="refresh_"+a;for(t in sub_js_col_name_json)h.push(sub_js_col_name_json[t].label);B||D||C||H||E||I||"N"!=el_tpl_settings.grid_top_menu||(l=!1);var t=findGridViewParam(window.location.hash,a,el_subgrid_settings.listview,el_grid_settings.enc_location+"_sg_gv");getColumnsWidth(el_grid_settings.enc_location+
"_sg_cw",a,sub_js_col_model_json);jQuery("#"+a).jqGrid({url:el_subgrid_settings.listing_url,editurl:el_subgrid_settings.edit_page_url,mtype:"POST",datatype:"json",colNames:h,colModel:sub_js_col_model_json,page:1,pgbuttons:y,pginput:y,pgnumbers:el_theme_settings.grid_sub_pgnumbers?!0:!1,pgnumlimit:el_general_settings.mobile_platform?2:parseInt(el_theme_settings.grid_sub_pgnumlimit),pagingpos:el_theme_settings.grid_sub_pagingpos,rowNum:"Yes"==el_subgrid_settings.hide_paging_btn?1E6:parseInt(el_tpl_settings.grid_rec_limit),
rowList:y?pager_row_list:[],sortname:el_subgrid_settings.default_sort,sortorder:el_subgrid_settings.sort_order,altRows:!0,altclass:"evenRow",multiselectWidth:30,multiselect:"Yes"==el_subgrid_settings.hide_multi_select?!1:!0,multiboxonly:!0,hiderecords:el_subgrid_settings.admin_rec_arr,viewrecords:!0,norecmsg:js_lang_label.GENERIC_GRID_NO_RECORDS_FOUND,caption:!1,hidegrid:!1,listview:t,viewtemplate:"#layout_view_"+a,gridtemplate:"#layout_grid"+a,viewCallback:function(b,d){reloadListGrid(a,null,2,el_subgrid_settings);
setLocalStore(el_grid_settings.enc_location+"_sg_gv",d)},listtags:["{","}"],inlineadd:"Yes"==el_subgrid_settings.inline_add?!0:!1,inlinerecpos:"Bottom"==el_subgrid_settings.rec_position?!0:!1,isSubMod:1,curModule:el_subgrid_settings.add_page_url,parModule:el_subgrid_settings.par_module,parData:el_subgrid_settings.par_data,parField:el_subgrid_settings.par_field,parType:el_subgrid_settings.par_type,extraHash:el_subgrid_settings.extra_hstr,ratingAllow:"Yes"==el_subgrid_settings.rating_allow?!0:!1,pager:"Y"==
el_tpl_settings.grid_bot_menu?b:"",toppager:"Y"==el_tpl_settings.grid_top_menu?!0:!1,toppaging:"Y"==el_tpl_settings.grid_top_menu?!0:!1,showpaging:l,cellurl:el_subgrid_settings.edit_page_url,cellsubmit:"remote",sortable:{update:function(b){setColumnsPosition(el_grid_settings.enc_location+"_sg_cp",b,a,sub_js_col_model_json)}},searchGrid:{multipleSearch:!0,searchToolbar:z?!0:!1,topFilters:x,topDataInit:triggerTopFilterEvent},afterSearchToggle:function(a){$("#hbox_"+a+"_jqgrid").find(".ui-search-toolbar").is(":hidden")&&
$("#listsearch_"+a+"_top").removeClass("active");resizeGridWidth()},height:"100%",autowidth:"No"==el_subgrid_settings.auto_width?!1:!0,shrinkToFit:"No"==el_subgrid_settings.auto_width?!1:!0,fixed:!0,multiSort:el_tpl_settings.grid_multiple_sorting?!0:!1,subGrid:v,subGridWidth:18,subGridRowExpanded:function(a,b){var d="";var c=a+"_nes";if("Yes"==el_subgrid_settings.nesgrid)d="&SGType=main";else if(el_subgrid_settings.grid_nesgrid_alias)d="&SGType=each&SGAlias="+el_subgrid_settings.grid_nesgrid_alias;
else if("Yes"==el_subgrid_settings.nesgrid)d="&SGType=main";else{for(var e in sub_js_col_model_json)if(sub_js_col_model_json[e].expandrow){sub_js_col_model_json.grid_nesgrid_alias=sub_js_col_model_json[e].index;break}d="&SGType=each&SGAlias="+el_subgrid_settings.grid_nesgrid_alias}delete el_subgrid_settings.grid_nesgrid_alias;initGirdLoadingOverlay(el_tpl_settings.main_grid_id);$("#"+a).html("<div id='"+c+"' class='scroll subgird-block'></div>");$("#"+c).html('<div class="subgrid-loader"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div>');
$.ajax({url:el_subgrid_settings.nesgrid_listing_url+"&SGRender=nested"+d,type:"POST",data:{SGID:b,SGridID:a},success:function(a){$("#"+c).addClass("subgrid_view_div_display");$("#"+c).html(a);hideGirdLoadingOverlay(el_tpl_settings.main_grid_id);initializeNesgridEvents($("#"+c))}})},subGridRowColapsed:function(a,b){jQuery("#"+(a+"_nes")).remove();resizeGridWidth()},grouping:"Yes"==el_subgrid_settings.grouping?!0:!1,groupingView:{groupField:$.isArray(el_subgrid_settings.group_attr.field)?el_subgrid_settings.group_attr.field:
[],groupOrder:$.isArray(el_subgrid_settings.group_attr.order)?el_subgrid_settings.group_attr.order:[],groupText:$.isArray(el_subgrid_settings.group_attr.text)?el_subgrid_settings.group_attr.text:[],groupColumnShow:$.isArray(el_subgrid_settings.group_attr.column)?el_subgrid_settings.group_attr.column:[],groupSummary:$.isArray(el_subgrid_settings.group_attr.summary)?el_subgrid_settings.group_attr.summary:[],showSummaryOnHide:$.isArray(el_subgrid_settings.group_attr.summary)?el_subgrid_settings.group_attr.summary:
[],groupCollapse:!1,groupDataSorted:!0},footerrow:"Yes"==el_subgrid_settings.footer_row?!0:!1,userDataOnFooter:!0,beforeRequest:function(){q&&(q=!1,getColumnsPosition(el_grid_settings.enc_location+"_sg_cp",a))},beforeProcessing:function(a){delete el_general_settings.grid_sub_link_model;a&&a.links&&(el_general_settings.grid_sub_link_model=a.links)},loadError:function(a,b,d){hideGirdLoadingOverlay(el_tpl_settings.main_grid_id)},loadComplete:function(b){setTimeout(function(){hideGirdLoadingOverlay(el_tpl_settings.main_grid_id);
Project.hide_adaxloading_div()},2);$("#"+el_tpl_settings.main_grid_id+"_messages_html").remove();$("#selAllRows").val("false");noRecordsMessage(a,b);applyGridRowColors(a,b);resizeSubGridWidth(a);adjustMainGridColumnWidth();initializeFancyBoxEvents();checkColumnsWidth(el_grid_settings.enc_location+"_sg_cw",a);if(w.after_data_load&&$.isFunction(window[w.after_data_load]))window[w.after_data_load](b)},gridComplete:function(){resizeSubGridWidth(a);hideAdminDataCheckBox(a,el_subgrid_settings.admin_rec_arr);
getAdminImageTooltip(a)},ondblClickRow:function(a,b,d,c){a=$(c.srcElement).hasClass("add-cell")?1:0;var e="inline-add-row"==$(c.srcElement).attr("aria-newrow")?1:0,f=0<$(c.srcElement).find(".inline-edit-row").length?1:0,m=$(c.srcElement).hasClass(".inline-edit-row")?1:0,g=$(c.srcElement).closest("td[role='gridcell']").hasClass("edit-cell")?1:0;a||e||f||m||g||($("#"+el_tpl_settings.main_grid_id).jqGrid("setGridParam",{cellEdit:!1}),a=$(this),a.jqGrid("setGridParam",{cellEdit:!0}),a.jqGrid("editCell",
b,d,!0),a.jqGrid("setGridParam",{cellEdit:!1}));c.stopPropagation()},beforeEditCell:function(a,b,d,c,e){restoreBeforeEditedCell(this,k,p,f);$(".colpick").length&&$(".colpick").hide()},afterEditCell:function(a,b,d,c,e){var m=this.rows[c].cells[e],h,n=$("#"+c+"_"+b,m),l=$._data(n.get(0),"events"),q=n.selector,r=$(this),O=!1,P=!1,v=!1;n.hasClass("dateOnly")?(inlineDateTimePicker(c,b,"date"),O=!0):n.hasClass("timeOnly")?(inlineDateTimePicker(c,b,"time"),O=!0):n.hasClass("dateTime")?(inlineDateTimePicker(c,
b,"dateTime"),O=!0):n.hasClass("colorPicker")?(inlineColorPicker(c,b,"colorPicker"),P=!0):n.hasClass("phoneNumber")?v=!0:n.hasClass("inline-textarea-edit")&&(b=$(n).val(),b=b.replace(/<br>/g,""),b=b.replace(/<BR>/g,""),$(n).val(b));k=c;p=e;f=$.isArray(this.p.savedRow)?this.p.savedRow[this.p.savedRow.length-1].v:"";if($(m).find("select[role='select']").length){$cellDrop=$(m).find("select[role='select']");$($cellDrop).attr("aria-update-id",a);g=this.p.savedRow;$($cellDrop).on("change",function(a){r.jqGrid("setGridParam",
{cellEdit:!0});r.jqGrid("setGridParam",{savedRow:g});r.jqGrid("saveCell",c,e);r.jqGrid("restoreCell",c,e,!0);$(m).removeClass("ui-state-highlight");p=k=0;f="";g=r.jqGrid("getGridParam","savedRow")});var t=setInterval(function(){$(q).hasClass("chosen-select")&&$(q+"_chosen").length&&($(q+"_chosen").on("keydown",function(a){27==a.keyCode&&"-9999px"==$(q+"_chosen").find(".chosen-drop").css("left")&&(r.jqGrid("setGridParam",{cellEdit:!0}),r.jqGrid("setGridParam",{savedRow:g}),r.jqGrid("restoreCell",c,
e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f="")}),clearInterval(t))},250)}else applyInputTextCase($(m)),g=this.p.savedRow,setTimeout(function(){l&&l.keydown&&l.keydown.length&&(r.jqGrid("setGridParam",{savedRow:g}),h=l.keydown[0].handler,n.unbind("keydown",h),n.bind("keydown",function(a){r.jqGrid("setGridParam",{cellEdit:!0});r.jqGrid("setGridParam",{savedRow:g});n.hasClass("inline-textarea-edit")?13===a.keyCode?a.shiftKey?a.stopPropagation():(r.jqGrid("saveCell",c,e),r.jqGrid("restoreCell",
c,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f=""):h.call(this,a):n.hasClass("colorPicker")?((9===a.keyCode||13===a.keyCode||27===a.keyCode)&&$(".colpick").length&&$(".colpick").hide(),h.call(this,a)):(h.call(this,a),r.jqGrid("setGridParam",{cellEdit:!1}))}).bind("focusout",function(a){r.jqGrid("setGridParam",{savedRow:g});O?$(".ui-datepicker").is(":hidden")&&(r.jqGrid("setGridParam",{cellEdit:!0}),r.jqGrid("restoreCell",c,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f=""):P?$(".colpick#"+
n.attr("colorpickerid")).is(":hidden")&&(r.jqGrid("setGridParam",{cellEdit:!0}),r.jqGrid("restoreCell",c,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f=""):(r.jqGrid("setGridParam",{cellEdit:!0}),1==v&&r.jqGrid("saveCell",c,e),r.jqGrid("restoreCell",c,e,!0),$(m).removeClass("ui-state-highlight"),p=k=0,f="")}))},100)},beforeSubmitCell:function(a,b,d,c,e){if(w.before_rec_edit&&$.isFunction(window[w.before_rec_edit]))return window[w.before_rec_edit](a,b,d,c,e)},afterSubmitCell:function(b,d,c,e,
f,g){if(1!=b.responseText){var m=JSON.parse(b.responseText),h=$("#"+a).jqGrid("getGridParam","colNames");var n=!0;var k=m.message;"false"==m.success?(n=!1,k+=" : "+h[g]):"2"==m.success?reloadListGrid(a):"3"==m.success||"4"==m.success?isRedirectEqualHash(m.red_hash)?(window.location.hash=m.red_hash,window.location.reload()):window.location.hash=m.red_hash:"5"==m.success&&(window.location.href=m.red_hash);gridReportMessage(n,k)}else n=!0;return w.after_rec_edit&&$.isFunction(window[w.after_rec_edit])?
window[w.after_rec_edit](b,d,c,e,f,g):[n,m.message]},afterSaveCell:function(a,b,d,c,e){},onSortCol:function(b,d,c){$("#"+a).setGridParam({defaultsort:"No"});activateGridSortColumns(a)},resizeStop:function(b,d){setColumnsWidth(el_grid_settings.enc_location+"_sg_cw",a)},beforeSelectRow:function(a,b){multiSelectHandler(a,b)}});z&&jQuery("#"+a).jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,searchOperators:el_theme_settings.grid_sub_searchopt?!0:!1});h=function(d,c){var e,f="";(e=el_theme_settings.grid_sub_icons_del||
c.del&&"Yes"==c.del.icon_only?!0:!1)||(f=c.del&&c.del.text?c.del.text:js_lang_label.GENERIC_GRID_DELETE);var g=c.del&&c.del.title?c.del.title:js_lang_label.GENERIC_GRID_DELETE_SELECTED_ROW;var h,m="";(h=el_theme_settings.grid_sub_icons_search||c.search&&"Yes"==c.search.icon_only?!0:!1)||(m=c.search&&c.search.text?c.search.text:js_lang_label.GENERIC_GRID_SEARCH);var k=c.search&&c.search.title?c.search.title:js_lang_label.GENERIC_GRID_ADVANCE_SEARCH;var n,l="";(n=el_theme_settings.grid_sub_icons_refresh||
c.refresh&&"Yes"==c.refresh.icon_only?!0:!1)||(l=c.refresh&&c.refresh.text?c.refresh.text:js_lang_label.GENERIC_GRID_SHOW_ALL);var q=c.refresh&&c.refresh.title?c.refresh.title:js_lang_label.GENERIC_GRID_SHOW_ALL_LISTING_RECORDS;jQuery("#"+a).jqGrid("navGrid","#"+b,{cloneToTop:!0,add:!1,addicon:"ui-icon-plus",edit:!1,editicon:"ui-icon-pencil",del:D,delicon:"ui-icon-trash",delicon_p:e?"uigrid-del-btn del-icon-only":"uigrid-del-btn",deltext:f,deltitle:g,search:H,searchicon:"ui-icon-search",searchicon_p:h?
"uigrid-search-btn search-icon-only":"uigrid-search-btn",searchtext:m,searchtitle:k,refresh:E,refreshicon:"ui-icon-refresh",refreshicon_p:n?"uigrid-refresh-btn refresh-icon-only":"uigrid-refresh-btn",refreshtext:l,refreshtitle:q,alerttext:js_lang_label.GENERIC_GRID_PLEASE_SELECT_ANY_RECORD,beforeRefresh:function(){$("#"+a).setGridParam({sortname:el_subgrid_settings.default_sort,sortorder:el_subgrid_settings.sort_order,defaultsort:"Yes"});activateGridSortColumns(a)},afterRefresh:function(){$("#hbox_"+
a+"_jqgrid").find(".search-chosen-select").find("option").removeAttr("selected");$("#hbox_"+a+"_jqgrid").find(".search-chosen-select").trigger("chosen:updated");$("#hbox_"+a+"_jqgrid").find(".search-token-autocomplete").length&&$("#hbox_"+a+"_jqgrid").find(".search-token-autocomplete").each(function(){$(this).tokenInput("clear")});$("#hbox_"+a+"_jqgrid").find(".top-filter-chosen").find("option").removeAttr("selected");$("#hbox_"+a+"_jqgrid").find(".top-filter-chosen").trigger("chosen:updated");$("#hbox_"+
a+"_jqgrid").find(".top-filter-autocomplete").length&&$("#hbox_"+a+"_jqgrid").find(".top-filter-autocomplete").each(function(){$(this).tokenInput("clear")})}},{},{},{id:N,width:350,caption:js_lang_label.GENERIC_GRID_DELETE,msg:js_lang_label.GENERIC_GRID_ARE_YOU_SURE_WANT_TO_DELETE_SELECTED_RECORDS,bSubmit:js_lang_label.GENERIC_GRID_DELETE,bCancel:js_lang_label.GENERIC_GRID_CANCEL,modal:!0,closeOnEscape:!0,serializeDelData:function(b){var c=jQuery("#selAllRows").val();return{id:b.id,oper:b.oper,AllRowSelected:c,
filters:$("#"+a).getGridParam("postData").filters}},beforeSubmit:function(a){return w.before_rec_delete&&$.isFunction(window[w.before_rec_delete])?window[w.before_rec_delete](a):[!0,""]},afterSubmit:function(a,b){var c=$.parseJSON(a.responseText);if("true"==c.success){var d=js_lang_label.GENERIC_GRID_RECORDS_DELETED_SUCCESSFULLY;""!=c.message&&(d=c.message);c=!0}else d=js_lang_label.GENERIC_GRID_ERROR_IN_DELETION,""!=c.message&&(d=c.message),c=!1;gridReportMessage(c,d);if(w.after_rec_delete&&$.isFunction(window[w.after_rec_delete]))window[w.after_rec_delete](a,
b);return[!0,d]}},{id:J,multipleSearch:!0,multipleGroup:"1"==el_subgrid_settings.group_search?!0:!1,showQuery:!1,Find:js_lang_label.GENERIC_GRID_FIND,Reset:js_lang_label.GENERIC_GRID_RESET,width:700,height:275,closeOnEscape:!0,modal:!0,closeAfterSearch:!0},{},{id:F},{order:d})};l=function(d,e){var f,g="";(f=el_theme_settings.grid_sub_icons_add||"Yes"==e.icon_only?!0:!1)||(g=e.text?e.text:js_lang_label.GENERIC_GRID_ADD_NEW);var h=e.title?e.title:js_lang_label.GENERIC_GRID_ADD_NEW;c=M;jQuery("#"+a).navButtonAdd("#"+
b,{caption:g,title:h,buttonicon:"ui-icon-plus",buttonicon_p:f?"uigrid-add-btn add-icon-only":"uigrid-add-btn",onClickButton:function(){adminAddNewRecord(el_subgrid_settings.add_page_url,el_subgrid_settings.extra_hstr,el_subgrid_settings.popup_add_form,a,el_subgrid_settings.popup_add_size)},id:c,afterButtonId:d,position:"first"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:g,title:h,buttonicon:"ui-icon-plus",buttonicon_p:f?"uigrid-add-btn add-icon-only":"uigrid-add-btn",onClickButton:function(){adminAddNewRecord(el_subgrid_settings.add_page_url,
el_subgrid_settings.extra_hstr,el_subgrid_settings.popup_add_form,a,el_subgrid_settings.popup_add_size)},id:c+"_top",afterButtonId:d?d+"_top":"",position:"first"})};v=function(f){var g;for(g in el_subgrid_settings.status_arr)if(el_subgrid_settings.status_arr[g]){var h=el_subgrid_settings.status_arr[g];var k=eval(el_subgrid_settings.status_lang_arr[g]);var l=(h||"").replace(/(\s)/g,"").toLowerCase();c="status_"+g+"_"+a;e=0==g?f:"status_"+d+"_"+a;jQuery("#"+a).navButtonAdd("#"+b,{caption:k,title:k,
lang:h,buttonicon:"ui-icon-newwin",buttonicon_p:"uigrid-status-common uigrid-status-btn-"+l,onClickButton:function(b,c){var d=filterGridSelectedIDs(this);adminStatusChange(a,c.lang,d,el_subgrid_settings.edit_page_url,c.title,w)},id:c,afterButtonId:e,position:"first"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:""+k,title:k,lang:h,buttonicon:"ui-icon-newwin",buttonicon_p:"uigrid-status-common uigrid-status-btn-"+l,onClickButton:function(b,c){var d=filterGridSelectedIDs(this);adminStatusChange(a,
c.lang,d,el_subgrid_settings.edit_page_url,c.title,w)},id:c+"_top",afterButtonId:e?e+"_top":"",position:"first"});d=g}};y=function(){jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_ADD_NEW,buttonicon:"icon16 iconic-icon-plus-alt",buttonicon_p:"uigrid-inlineadd-btn",buttonname:"addnew",onClickButton:function(b){addNewInlineRecord(a)},id:"inlineadd_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_ADD_NEW,
buttonicon:"icon16 iconic-icon-plus-alt",buttonicon_p:"uigrid-inlineadd-btn",buttonname:"addnew",onClickButton:function(b){addNewInlineRecord(a)},id:"inlineadd_"+a+"_top",position:"last"});jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_SAVE_ALL,buttonicon:"icon16 iconic-icon-check-alt",buttonicon_p:"uigrid-inlinesave-btn",buttonname:"saveall",onClickButton:function(b){saveAllInlineRecords(a)},id:"saveall_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",
{caption:"",title:js_lang_label.GENERIC_GRID_SAVE_ALL,buttonicon:"icon16 iconic-icon-check-alt",buttonicon_p:"uigrid-inlinesave-btn",buttonname:"saveall",onClickButton:function(b){saveAllInlineRecords(a)},id:"saveall_"+a+"_top",position:"last"});jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_CANCEL_ALL,buttonicon:"icon16 icomoon-icon-cancel-2",buttonicon_p:"uigrid-cancelall-btn",buttonname:"cancelall",onClickButton:function(b){cancelAllInlineRecords(a)},id:"cancelall_"+
a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_CANCEL_ALL,buttonicon:"icon16 icomoon-icon-cancel-2",buttonicon_p:"uigrid-cancelall-btn",buttonname:"cancelall",onClickButton:function(b){cancelAllInlineRecords(a)},id:"cancelall_"+a+"_top",position:"last"})};if(0<A.length){z=[];x={};for(var u=0;u<A.length&&!(t=A[u].name,-1!=$.inArray(t,["del","search","refresh"])&&(z.push(t),x[t]=A[u]),3<=z.length);u++);h(z,x);for(u=0;u<A.length;u++)if("custom"==
A[u].type)c=createCustomGridButton(A[u],a,b,c);else if((t=A[u].name)&&"status"==t.substring(0,6))C&&v(c);else switch(t){case "del":D&&(c=N);break;case "search":H&&(c=J);break;case "refresh":E&&(c=F);break;case "add":B&&l(c,A[u])}}else h([],{}),B&&l(c,{}),D&&(c=N),C&&v(c);I&&y();$(document).off("click",".expand-nesview");$(document).on("click",".expand-nesview",function(){var b=$(this).attr("aria-alias"),c=$(this).attr("aria-rowid");el_subgrid_settings.grid_nesgrid_alias&&b==el_subgrid_settings.grid_nesgrid_alias?
(el_subgrid_settings.grid_nesgrid_alias=b,$("#"+a).jqGrid("toggleSubGridRow",c)):(el_subgrid_settings.grid_nesgrid_alias=b,$("#"+a).jqGrid("toggleSubGridRow",c),setTimeout(function(){$("#"+a).jqGrid("expandSubGridRow",c)},100))})}
function initSubGridDetailView(){if(view_js_col_model_json&&el_subview_settings.permit_edit_btn){var a={};for(i in view_js_col_model_json){var b=view_js_col_model_json[i].editable,d=view_js_col_model_json[i].type,c=view_js_col_model_json[i].htmlID;a[c]=view_js_col_model_json[i];"rating_master"==d&&displayAddListRatingProperties(c,a[c]);if(b)switch(d){case "checkboxes":makeAddListEditableDropdown(c,a);break;case "code_markup_field":makeAddListEditableTextArea(c,a);break;case "date":makeAddListEditableTextBox(c,
a);break;case "date_and_time":makeAddListEditableTextBox(c,a);break;case "dropdown":makeAddListEditableDropdown(c,a);break;case "file":makeAddListEditableTextBox(c,a);break;case "google_maps":makeAddListEditableTextArea(c,a);break;case "multi_select_dropdown":makeAddListEditableDropdown(c,a);break;case "password":makeAddListEditablePassword(c,a);break;case "phone_number":makeAddListEditableTextBox(c,a);break;case "radio_buttons":makeAddListEditableDropdown(c,a);break;case "textarea":makeAddListEditableTextArea(c,
a);break;case "time":makeAddListEditableTextBox(c,a);break;case "color_picker":makeAddListEditableTextBox(c,a);break;case "autocomplete":makeAddListEditableTextBox(c,a);break;case "rating_master":makeAddListEditableTextBox(c,a);break;case "wysiwyg":makeAddListEditableTextArea(c,a);break;default:makeAddListEditableTextBox(c,a)}}}}
function saveViewInlineEdit(a,b,d,c){var e=view_js_col_model_json[a];d={name:e.name,value:b,id:d};"object"==typeof c&&(d=$.extend({},d,c));c={url:el_subview_settings.edit_page_url,data:d,success:function(c,d){var f=$.parseJSON(c);if(f&&"false"==f.success){var g=js_lang_label.GENERIC_GRID_ERROR_IN_UPDATION;""!=f.message&&(g=f.message);$("#"+a).editable("option","value",$("#"+a).attr("aria-prev-value"));$("#"+a).editable("show");gridReportMessage(!1,g)}else if("3"==f.success||"4"==f.success)isRedirectEqualHash(f.red_hash)?
(window.location.hash=f.red_hash,window.location.reload()):window.location.hash=f.red_hash;else if("5"==f.success)window.location.href=f.red_hash;else switch(e.type){case "multi_select_dropdown":case "checkboxes":""!=$("#"+a).attr("data-value")&&$("#"+a).html($("#"+a).attr("data-value"));break;case "autocomplete":f=e.editoptions.token.params,0<view_token_pre_populates[a].length&&$("#"+a).html($("#"+a).attr("data-value")),f.prePopulate=view_token_pre_populates[a];case "password":$("#"+a).html("*****");
break;case "file":view_js_col_model_json[a].dbval=b;displayAdminListFlyImage(a,e.editoptions.uploadify,f);break;case "rating_master":$("#rshow_"+e.htmlID).raty("set",{score:b});$("#rscore_"+e.htmlID).text(b);$("#"+e.htmlID).html('<span class="icon16 icomoon-icon-pencil-5"><b>Edit</b></span>');break;default:$("#"+a).attr("aria-prev-value",b)}}};$("#"+a).editable("submit",c)}
function initNesGridListing(){var a=el_nesgrid_settings.table_id,b=el_nesgrid_settings.pager_id,d="",c="",e="",f="",g="",h=[],k=0,p=0,q=!0,l=!0,v="Yes"==el_nesgrid_settings.hide_paging_btn?!1:!0,y="1"==el_nesgrid_settings.hide_add_btn&&"1"==el_nesgrid_settings.permit_add_btn&&"1"==el_nesgrid_settings.advanced_grid?!0:!1,B="1"==el_nesgrid_settings.hide_del_btn&&"1"==el_nesgrid_settings.permit_del_btn&&"1"==el_nesgrid_settings.advanced_grid?!0:!1,D="1"==el_nesgrid_settings.hide_status_btn&&"1"==el_nesgrid_settings.advanced_grid?
!0:!1,C="Yes"==el_nesgrid_settings.hide_advance_search||"1"!=el_nesgrid_settings.advanced_grid?!1:!0,H="Yes"==el_nesgrid_settings.hide_refresh_btn||"1"!=el_nesgrid_settings.advanced_grid?!1:!0,E="Yes"==el_nesgrid_settings.inline_add&&"1"==el_nesgrid_settings.permit_add_btn&&"1"==el_nesgrid_settings.advanced_grid?!0:!1,I="Yes"==el_nesgrid_settings.hide_search_tool?!1:!0,z=$.isPlainObject(el_nesgrid_settings.top_filter)?el_nesgrid_settings.top_filter:[],x=$.isPlainObject(el_nesgrid_settings.callbacks)?
el_nesgrid_settings.callbacks:{},w=$.isArray(el_nesgrid_settings.buttons_arr)?el_nesgrid_settings.buttons_arr:[],A="add_"+a,M="del_"+a,N="search_"+a,J="refresh_"+a;for(F in nes_js_col_name_json)h.push(nes_js_col_name_json[F].label);y||B||D||C||H||E||"N"!=el_tpl_settings.grid_top_menu||(l=!1);var F=findGridViewParam(window.location.hash,a,el_nesgrid_settings.listview,el_grid_settings.enc_location+"_ng_gv");getColumnsWidth(el_grid_settings.enc_location+"_ng_cw",a,nes_js_col_model_json);jQuery("#"+a).jqGrid({url:el_nesgrid_settings.listing_url,
editurl:el_nesgrid_settings.edit_page_url,mtype:"POST",datatype:"json",colNames:h,colModel:nes_js_col_model_json,page:1,pgbuttons:v,pginput:v,pgnumbers:el_theme_settings.grid_sub_pgnumbers?!0:!1,pgnumlimit:el_general_settings.mobile_platform?2:parseInt(el_theme_settings.grid_sub_pgnumlimit),pagingpos:el_theme_settings.grid_sub_pagingpos,rowNum:"Yes"==el_nesgrid_settings.hide_paging_btn?1E6:parseInt(el_tpl_settings.grid_rec_limit),rowList:v?pager_row_list:[],sortname:el_nesgrid_settings.default_sort,
sortorder:el_nesgrid_settings.sort_order,altRows:!0,altclass:"evenRow",multiselectWidth:30,multiselect:"Yes"==el_nesgrid_settings.hide_multi_select?!1:!0,multiboxonly:!0,hiderecords:el_nesgrid_settings.admin_rec_arr,viewrecords:!0,norecmsg:js_lang_label.GENERIC_GRID_NO_RECORDS_FOUND,caption:!1,hidegrid:!1,listview:F,viewtemplate:"#layout_view_"+a,gridtemplate:"#layout_grid"+a,viewCallback:function(b,c){reloadListGrid(a,null,2,el_nesgrid_settings);setLocalStore(el_grid_settings.enc_location+"_ng_gv",
c)},listtags:["{","}"],inlineadd:"Yes"==el_nesgrid_settings.inline_add?!0:!1,inlinerecpos:"Bottom"==el_nesgrid_settings.rec_position?!0:!1,isSubMod:2,curModule:el_nesgrid_settings.add_page_url,parModule:el_nesgrid_settings.par_module,parData:el_nesgrid_settings.par_data,parField:el_nesgrid_settings.par_field,parType:el_nesgrid_settings.par_type,extraHash:el_nesgrid_settings.extra_hstr,ratingAllow:"Yes"==el_nesgrid_settings.rating_allow?!0:!1,pager:"Y"==el_tpl_settings.grid_bot_menu?b:"",toppager:"Y"==
el_tpl_settings.grid_top_menu?!0:!1,toppaging:"Y"==el_tpl_settings.grid_top_menu?!0:!1,showpaging:l,cellurl:el_nesgrid_settings.edit_page_url,cellsubmit:"remote",sortable:{update:function(b){setColumnsPosition(el_grid_settings.enc_location+"_ng_cp",b,a,nes_js_col_model_json)}},searchGrid:{multipleSearch:!0,searchToolbar:I?!0:!1,topFilters:z,topDataInit:triggerTopFilterEvent},afterSearchToggle:function(a){$("#hbox_"+a+"_jqgrid").find(".ui-search-toolbar").is(":hidden")&&$("#listsearch_"+a+"_top").removeClass("active");
resizeGridWidth()},height:"100%",autowidth:"No"==el_nesgrid_settings.auto_width?!1:!0,shrinkToFit:"No"==el_nesgrid_settings.auto_width?!1:!0,fixed:!0,multiSort:el_tpl_settings.grid_multiple_sorting?!0:!1,grouping:"Yes"==el_nesgrid_settings.grouping?!0:!1,groupingView:{groupField:$.isArray(el_nesgrid_settings.group_attr.field)?el_nesgrid_settings.group_attr.field:[],groupOrder:$.isArray(el_nesgrid_settings.group_attr.order)?el_nesgrid_settings.group_attr.order:[],groupText:$.isArray(el_nesgrid_settings.group_attr.text)?
el_nesgrid_settings.group_attr.text:[],groupColumnShow:$.isArray(el_nesgrid_settings.group_attr.column)?el_nesgrid_settings.group_attr.column:[],groupSummary:$.isArray(el_nesgrid_settings.group_attr.summary)?el_nesgrid_settings.group_attr.summary:[],showSummaryOnHide:$.isArray(el_nesgrid_settings.group_attr.summary)?el_nesgrid_settings.group_attr.summary:[],groupCollapse:!1,groupDataSorted:!0},footerrow:"Yes"==el_nesgrid_settings.footer_row?!0:!1,userDataOnFooter:!0,beforeRequest:function(){q&&(q=
!1,getColumnsPosition(el_grid_settings.enc_location+"_ng_cp",a))},beforeProcessing:function(a){delete el_general_settings.grid_nes_link_model;a&&a.links&&(el_general_settings.grid_nes_link_model=a.links)},loadError:function(a,b,c){hideGirdLoadingOverlay(el_tpl_settings.main_grid_id)},loadComplete:function(b){setTimeout(function(){hideGirdLoadingOverlay(el_tpl_settings.main_grid_id);Project.hide_adaxloading_div()},2);$("#"+el_tpl_settings.main_grid_id+"_messages_html").remove();$("#selAllRows").val("false");
noRecordsMessage(a,b);applyGridRowColors(a,b);resizeSubGridWidth(a);adjustMainGridColumnWidth();initializeFancyBoxEvents();checkColumnsWidth(el_grid_settings.enc_location+"_ng_cw",a);if(x.after_data_load&&$.isFunction(window[x.after_data_load]))window[x.after_data_load](b)},gridComplete:function(){resizeSubGridWidth(a);hideAdminDataCheckBox(a,el_nesgrid_settings.admin_rec_arr);getAdminImageTooltip(a)},ondblClickRow:function(a,b,c,d){a=$(d.srcElement).hasClass("add-cell")?1:0;var e="inline-add-row"==
$(d.srcElement).attr("aria-newrow")?1:0,f=0<$(d.srcElement).find(".inline-edit-row").length?1:0,g=$(d.srcElement).hasClass(".inline-edit-row")?1:0,h=$(d.srcElement).closest("td[role='gridcell']").hasClass("edit-cell")?1:0;a||e||f||g||h||($("#"+el_tpl_settings.main_grid_id).jqGrid("setGridParam",{cellEdit:!1}),a=$(this),a.jqGrid("setGridParam",{cellEdit:!0}),a.jqGrid("editCell",b,c,!0),a.jqGrid("setGridParam",{cellEdit:!1}));d.stopPropagation()},beforeEditCell:function(a,b,c,d,e){restoreBeforeEditedCell(this,
k,p,f);$(".colpick").length&&$(".colpick").hide()},afterEditCell:function(a,b,c,d,e){var h=this.rows[d].cells[e],m,l=$("#"+d+"_"+b,h),q=$._data(l.get(0),"events"),n=l.selector,r=$(this),v=!1,t=!1,u=!1;l.hasClass("dateOnly")?(inlineDateTimePicker(d,b,"date"),v=!0):l.hasClass("timeOnly")?(inlineDateTimePicker(d,b,"time"),v=!0):l.hasClass("dateTime")?(inlineDateTimePicker(d,b,"dateTime"),v=!0):l.hasClass("colorPicker")?(inlineColorPicker(d,b,"colorPicker"),t=!0):l.hasClass("phoneNumber")?u=!0:l.hasClass("inline-textarea-edit")&&
(b=$(l).val(),b=b.replace(/<br>/g,""),b=b.replace(/<BR>/g,""),$(l).val(b));k=d;p=e;f=$.isArray(this.p.savedRow)?this.p.savedRow[this.p.savedRow.length-1].v:"";if($(h).find("select[role='select']").length){$cellDrop=$(h).find("select[role='select']");$($cellDrop).attr("aria-update-id",a);g=this.p.savedRow;$($cellDrop).on("change",function(a){r.jqGrid("setGridParam",{cellEdit:!0});r.jqGrid("setGridParam",{savedRow:g});r.jqGrid("saveCell",d,e);r.jqGrid("restoreCell",d,e,!0);$(h).removeClass("ui-state-highlight");
p=k=0;f="";g=r.jqGrid("getGridParam","savedRow")});var y=setInterval(function(){$(n).hasClass("chosen-select")&&$(n+"_chosen").length&&($(n+"_chosen").on("keydown",function(a){27==a.keyCode&&"-9999px"==$(n+"_chosen").find(".chosen-drop").css("left")&&(r.jqGrid("setGridParam",{cellEdit:!0}),r.jqGrid("setGridParam",{savedRow:g}),r.jqGrid("restoreCell",d,e,!0),$(h).removeClass("ui-state-highlight"),p=k=0,f="")}),clearInterval(y))},250)}else applyInputTextCase($(h)),g=this.p.savedRow,setTimeout(function(){q&&
q.keydown&&q.keydown.length&&(r.jqGrid("setGridParam",{savedRow:g}),m=q.keydown[0].handler,l.unbind("keydown",m),l.bind("keydown",function(a){r.jqGrid("setGridParam",{cellEdit:!0});r.jqGrid("setGridParam",{savedRow:g});l.hasClass("inline-textarea-edit")?13===a.keyCode?a.shiftKey?a.stopPropagation():(r.jqGrid("saveCell",d,e),r.jqGrid("restoreCell",d,e,!0),$(h).removeClass("ui-state-highlight"),p=k=0,f=""):m.call(this,a):l.hasClass("colorPicker")?((9===a.keyCode||13===a.keyCode||27===a.keyCode)&&$(".colpick").length&&
$(".colpick").hide(),m.call(this,a)):(m.call(this,a),r.jqGrid("setGridParam",{cellEdit:!1}))}).bind("focusout",function(a){r.jqGrid("setGridParam",{savedRow:g});v?$(".ui-datepicker").is(":hidden")&&(r.jqGrid("setGridParam",{cellEdit:!0}),r.jqGrid("restoreCell",d,e,!0),$(h).removeClass("ui-state-highlight"),p=k=0,f=""):t?$(".colpick#"+l.attr("colorpickerid")).is(":hidden")&&(r.jqGrid("setGridParam",{cellEdit:!0}),r.jqGrid("restoreCell",d,e,!0),$(h).removeClass("ui-state-highlight"),p=k=0,f=""):(r.jqGrid("setGridParam",
{cellEdit:!0}),1==u&&r.jqGrid("saveCell",d,e),r.jqGrid("restoreCell",d,e,!0),$(h).removeClass("ui-state-highlight"),p=k=0,f="")}))},100)},beforeSubmitCell:function(a,b,d,c,e){if(x.before_rec_edit&&$.isFunction(window[x.before_rec_edit]))return window[x.before_rec_edit](a,b,d,c,e)},afterSubmitCell:function(b,d,c,e,f,g){if(1!=b.responseText){var h=JSON.parse(b.responseText),l=$("#"+a).jqGrid("getGridParam","colNames");var m=!0;var k=h.message;"false"==h.success?(m=!1,k+=" : "+l[g]):"2"==h.success?reloadListGrid(a):
"3"==h.success||"4"==h.success?isRedirectEqualHash(h.red_hash)?(window.location.hash=h.red_hash,window.location.reload()):window.location.hash=h.red_hash:"5"==h.success&&(window.location.href=h.red_hash);gridReportMessage(m,k);if(x.after_rec_edit&&$.isFunction(window[x.after_rec_edit]))return window[x.after_rec_edit](b,d,c,e,f,g)}else m=!0;return[m,h.message]},afterSaveCell:function(a,b,d,c,e){},onSortCol:function(b,d,c){$("#"+a).setGridParam({defaultsort:"No"});activateGridSortColumns(a)},resizeStop:function(b,
d){setColumnsWidth(el_grid_settings.enc_location+"_ng_cw",a)},beforeSelectRow:function(a,b){multiSelectHandler(a,b)}});I&&jQuery("#"+a).jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,searchOperators:el_theme_settings.grid_sub_searchopt?!0:!1});h=function(d,c){var e,f="";(e=el_theme_settings.grid_sub_icons_del||c.del&&"Yes"==c.del.icon_only?!0:!1)||(f=c.del&&c.del.text?c.del.text:js_lang_label.GENERIC_GRID_DELETE);var g=c.del&&c.del.title?c.del.title:js_lang_label.GENERIC_GRID_DELETE_SELECTED_ROW;
var h,l="";(h=el_theme_settings.grid_sub_icons_search||c.search&&"Yes"==c.search.icon_only?!0:!1)||(l=c.search&&c.search.text?c.search.text:js_lang_label.GENERIC_GRID_SEARCH);var k=c.search&&c.search.title?c.search.title:js_lang_label.GENERIC_GRID_ADVANCE_SEARCH;var m,q="";(m=el_theme_settings.grid_sub_icons_refresh||c.refresh&&"Yes"==c.refresh.icon_only?!0:!1)||(q=c.refresh&&c.refresh.text?c.refresh.text:js_lang_label.GENERIC_GRID_SHOW_ALL);var p=c.refresh&&c.refresh.title?c.refresh.title:js_lang_label.GENERIC_GRID_SHOW_ALL_LISTING_RECORDS;
jQuery("#"+a).jqGrid("navGrid","#"+b,{cloneToTop:!0,add:!1,addicon:"ui-icon-plus",edit:!1,editicon:"ui-icon-pencil",del:B,delicon:"ui-icon-trash",delicon_p:e?"uigrid-del-btn del-icon-only":"uigrid-del-btn",deltext:f,deltitle:g,search:C,searchicon:"ui-icon-search",searchicon_p:h?"uigrid-search-btn search-icon-only":"uigrid-search-btn",searchtext:l,searchtitle:k,refresh:H,refreshicon:"ui-icon-refresh",refreshicon_p:m?"uigrid-refresh-btn refresh-icon-only":"uigrid-refresh-btn",refreshtext:q,refreshtitle:p,
alerttext:js_lang_label.GENERIC_GRID_PLEASE_SELECT_ANY_RECORD,beforeRefresh:function(){$("#"+a).setGridParam({sortname:el_nesgrid_settings.default_sort,sortorder:el_nesgrid_settings.sort_order,defaultsort:"Yes"});activateGridSortColumns(a)},afterRefresh:function(){$("#hbox_"+a+"_jqgrid").find(".search-chosen-select").find("option").removeAttr("selected");$("#hbox_"+a+"_jqgrid").find(".search-chosen-select").trigger("chosen:updated");$("#hbox_"+a+"_jqgrid").find(".search-token-autocomplete").length&&
$("#hbox_"+a+"_jqgrid").find(".search-token-autocomplete").each(function(){$(this).tokenInput("clear")});$("#hbox_"+a+"_jqgrid").find(".top-filter-chosen").find("option").removeAttr("selected");$("#hbox_"+a+"_jqgrid").find(".top-filter-chosen").trigger("chosen:updated");$("#hbox_"+a+"_jqgrid").find(".top-filter-autocomplete").length&&$("#hbox_"+a+"_jqgrid").find(".top-filter-autocomplete").each(function(){$(this).tokenInput("clear")})}},{},{},{id:M,width:350,caption:js_lang_label.GENERIC_GRID_DELETE,
msg:js_lang_label.GENERIC_GRID_ARE_YOU_SURE_WANT_TO_DELETE_SELECTED_RECORDS,bSubmit:js_lang_label.GENERIC_GRID_DELETE,bCancel:js_lang_label.GENERIC_GRID_CANCEL,modal:!0,closeOnEscape:!0,serializeDelData:function(b){var c=jQuery("#selAllRows").val();return{id:b.id,oper:b.oper,AllRowSelected:c,filters:$("#"+a).getGridParam("postData").filters}},beforeSubmit:function(a){return x.before_rec_delete&&$.isFunction(window[x.before_rec_delete])?window[x.before_rec_delete](a):[!0,""]},afterSubmit:function(a,
b){var c=$.parseJSON(a.responseText);if("true"==c.success){var d=js_lang_label.GENERIC_GRID_RECORDS_DELETED_SUCCESSFULLY;""!=c.message&&(d=c.message);c=!0}else d=js_lang_label.GENERIC_GRID_ERROR_IN_DELETION,""!=c.message&&(d=c.message),c=!1;gridReportMessage(c,d);if(x.after_rec_delete&&$.isFunction(window[x.after_rec_delete]))window[x.after_rec_delete](a,b);return[!0,d]}},{id:N,multipleSearch:!0,multipleGroup:"1"==el_nesgrid_settings.group_search?!0:!1,showQuery:!1,Find:js_lang_label.GENERIC_GRID_FIND,
Reset:js_lang_label.GENERIC_GRID_RESET,width:700,height:275,closeOnEscape:!0,modal:!0,closeAfterSearch:!0},{},{id:J},{order:d})};l=function(d,e){var f,g="";(f=el_theme_settings.grid_sub_icons_add||"Yes"==e.icon_only?!0:!1)||(g=e.text?e.text:js_lang_label.GENERIC_GRID_ADD_NEW);var h=e.title?e.title:js_lang_label.GENERIC_GRID_ADD_NEW;c=A;jQuery("#"+a).navButtonAdd("#"+b,{caption:g,title:h,buttonicon:"ui-icon-plus",buttonicon_p:f?"uigrid-add-btn add-icon-only":"uigrid-add-btn",onClickButton:function(){adminAddNewRecord(el_nesgrid_settings.add_page_url,
el_nesgrid_settings.extra_hstr,el_nesgrid_settings.popup_add_form,a,el_nesgrid_settings.popup_add_size)},id:c,afterButtonId:d,position:"first"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:g,title:h,buttonicon:"ui-icon-plus",buttonicon_p:f?"uigrid-add-btn add-icon-only":"uigrid-add-btn",onClickButton:function(){adminAddNewRecord(el_nesgrid_settings.add_page_url,el_nesgrid_settings.extra_hstr,el_nesgrid_settings.popup_add_form,a,el_nesgrid_settings.popup_add_size)},id:c+"_top",afterButtonId:d?
d+"_top":"",position:"first"})};v=function(f){var g;for(g in el_nesgrid_settings.status_arr)if(el_nesgrid_settings.status_arr[g]){var h=el_grid_settings.status_arr[g];var l=eval(el_grid_settings.status_lang_arr[g]);var k=(h||"").replace(/(\s)/g,"").toLowerCase();c="status_"+g+"_"+a;e=0==g?f:"status_"+d+"_"+a;jQuery("#"+a).navButtonAdd("#"+b,{caption:l,title:l,lang:h,buttonicon:"ui-icon-newwin",buttonicon_p:"uigrid-status-common uigrid-status-btn-"+k,onClickButton:function(b,c){var d=filterGridSelectedIDs(this);
adminStatusChange(a,c.lang,d,el_nesgrid_settings.edit_page_url,c.title,x)},id:c,afterButtonId:e,position:"first"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:""+l,title:l,lang:h,buttonicon:"ui-icon-newwin",buttonicon_p:"uigrid-status-common uigrid-status-btn-"+k,onClickButton:function(b,c){var d=filterGridSelectedIDs(this);adminStatusChange(a,c.lang,d,el_nesgrid_settings.edit_page_url,c.title,x)},id:c+"_top",afterButtonId:e?e+"_top":"",position:"first"});d=g}};I=function(){jQuery("#"+
a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_ADD_NEW,buttonicon:"icon16 iconic-icon-plus-alt",buttonicon_p:"uigrid-inlineadd-btn",buttonname:"addnew",onClickButton:function(b){addNewInlineRecord(a)},id:"inlineadd_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_ADD_NEW,buttonicon:"icon16 iconic-icon-plus-alt",buttonicon_p:"uigrid-inlineadd-btn",buttonname:"addnew",onClickButton:function(b){addNewInlineRecord(a)},
id:"inlineadd_"+a+"_top",position:"last"});jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_SAVE_ALL,buttonicon:"icon16 iconic-icon-check-alt",buttonicon_p:"uigrid-inlinesave-btn",buttonname:"saveall",onClickButton:function(b){saveAllInlineRecords(a)},id:"saveall_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_SAVE_ALL,buttonicon:"icon16 iconic-icon-check-alt",buttonicon_p:"uigrid-inlinesave-btn",buttonname:"saveall",
onClickButton:function(b){saveAllInlineRecords(a)},id:"saveall_"+a+"_top",position:"last"});jQuery("#"+a).navButtonAdd("#"+b,{caption:"",title:js_lang_label.GENERIC_GRID_CANCEL_ALL,buttonicon:"icon16 icomoon-icon-cancel-2",buttonicon_p:"uigrid-cancelall-btn",buttonname:"cancelall",onClickButton:function(b){cancelAllInlineRecords(a)},id:"cancelall_"+a,position:"last"});jQuery("#"+a).navButtonAdd("#"+a+"_toppager_left",{caption:"",title:js_lang_label.GENERIC_GRID_CANCEL_ALL,buttonicon:"icon16 icomoon-icon-cancel-2",
buttonicon_p:"uigrid-cancelall-btn",buttonname:"cancelall",onClickButton:function(b){cancelAllInlineRecords(a)},id:"cancelall_"+a+"_top",position:"last"})};if(0<w.length){z=[];F={};for(var t,u=0;u<w.length&&!(t=w[u].name,-1!=$.inArray(t,["del","search","refresh"])&&(z.push(t),F[t]=w[u]),3<=z.length);u++);h(z,F);for(u=0;u<w.length;u++)if("custom"==w[u].type)c=createCustomGridButton(w[u],a,b,c);else if((t=w[u].name)&&"status"==t.substring(0,6))D&&v(c);else switch(t){case "del":B&&(c=M);break;case "search":C&&
(c=N);break;case "refresh":H&&(c=J);break;case "add":y&&l(c)}}else h([],{}),y&&l(c),B&&(c=M),D&&v(c);E&&I()}
function initLeftPanelSearch(a){$("#left_search_panel").length&&($("#input_left_search").bind("keypress",function(b){13==b.which&&filterCharacterSearchData(a)}),$(document).off("click",".left-data-row"),$(document).on("click",".left-data-row",function(){$(this).find(".data-left-anchor").hasClass("selected")?($(this).find(".data-right-align").removeClass("active"),$(this).find(".data-left-anchor").removeClass("selected")):($(this).find(".data-left-anchor").addClass("selected"),$(this).find(".data-right-align").addClass("active"));
filterLeftSearchPanelData(a)}),$(".data-left-anchor").length&&loadLeftSearchPanelData(a))}
function filterCharacterSearchData(a){var b=$("#input_left_search").val(),d=$("#"+a);var c={groupOp:"OR",rules:[],entrys:"",range:""};if(""!=b)for(var e=$("#"+a).jqGrid("getGridParam","colModel"),f=0;f<e.length;f++)if("cb"!=e[f].name&&"subgrid"!=e[f].name&&"prec"!=e[f].name){var g="undefined"===typeof e[f].search?!0:e[f].search,h=!0===e[f].hidden;(e[f].searchoptions&&!0===e[f].searchoptions.searchhidden&&g||g&&!h)&&c.rules.push({field:e[f].name,op:"bw",data:b})}d[0].p.search=!0;$.extend(d[0].p.postData,
{filters:JSON.stringify(c)});reloadListGrid(a,[{page:1,current:!0}]);$("#tbl_left_search").find(".data-right-align").removeClass("active");$("#tbl_left_search").find(".data-left-anchor").removeClass("selected")}
function filterLeftSearchPanelData(a){if(!$(".left-data-row").length)return!1;var b={};$(".left-data-row").each(function(){var a=$(this).find(".data-left-anchor");if($(a).hasClass("selected")){var c=$(a).attr("aria-search-type"),d=$(a).attr("aria-search-field");if("range"==c){var h=$(a).attr("aria-search-min"),k=$(a).attr("aria-search-level");$.isArray(b[d])||(b[d]=[]);0<=$.inArray(k,["below","above"])?(c=k,"below"==k&&(h=$(a).attr("aria-search-max"))):c=$(a).attr("aria-search-max");a=h+" to "+c}else a=
$(a).attr("aria-search-value");$.isArray(b[d])||(b[d]=[]);b[d].push(a)}});$(".lsac-input-left-filter").each(function(){var a=$(this).attr("aria-field-type"),c=$(this).attr("aria-search-field"),d=$(this).val();d&&($.isArray(b[c])||(b[c]=[]),0<=$.inArray(a,["date","date_and_time","time"])?b[c].push(d):(a=d.split(","),$.merge(b[c],a)))});$(".search-range-icon").each(function(){if($(this).hasClass("active")){var a=$(this).attr("aria-search-field");$(this).val();var c=$("#lsrange_min_"+a).val(),d=$("#lsrange_max_"+
a).val();if(""!=c||""!=d)$.isArray(b[a])||(b[a]=[]),b[a].push(""==c?d+" to above":""==d?c+" to below":c+" to "+d)}});for(var d in b)$.isArray(b[d])&&(b[d]=b[d].filter(function(a,c,b){return c==b.indexOf(a)}));d=$("#"+a);var c=(c=$("#"+a).jqGrid("getGridParam","postData"))&&c.filters?$.parseJSON(c.filters):{};c={groupOp:"AND",rules:c&&c.rules?c.rules:[],entrys:b,range:c&&c.range?c.range:""};d[0].p.search=!0;$.extend(d[0].p.postData,{filters:JSON.stringify(c)});reloadListGrid(a,[{page:1,current:!0}])}
function loadLeftSearchPanelData(a){var b={};if((a=$("#"+a).jqGrid("getGridParam","postData"))&&(a=a&&a.filters?$.parseJSON(a.filters):{})&&a.entrys){a=a.entrys;for(var d in a)if($.isArray(a[d])){$.isArray(b[d])||(b[d]=[]);for(var c=0;c<a[d].length;c++){var e=a[d][c],f=$(".data-left-anchor[aria-search-field='"+d+"'][aria-search-value='"+e+"']");$(f).length&&($(f).closest(".left-data-row").find(".data-left-anchor").addClass("selected"),$(f).closest(".left-data-row").find(".data-right-align").addClass("active"),
b[d].push(e))}}}}
function initLeftPanelAutocomplete(a){$(".lsac-input-left-filter").length&&$(".lsac-input-left-filter").each(function(){switch($(this).attr("aria-field-type")){case "date":activateLSDateRangePicker($(this),a);break;case "date_and_time":activateLSDateTimePicker($(this),a);break;case "time":activateLSTimePicker($(this),a);break;default:activateLSAutoComplete($(this),a)}});$(".search-range-slider").length&&($(".search-range-slider").each(function(){var a=$(this).attr("aria-range-min"),d=$(this).attr("aria-range-max");
a=""!=a?parseInt(a):0;d=""!=d?parseInt(d):100;$(this).slider({range:!0,min:a,max:d,values:[a,d],slide:function(a,b){var c=$(this).attr("aria-range-key");$("#lsrange_min_"+c).val(b.values[0]);$("#lsrange_max_"+c).val(b.values[1])}})}),$(document).on("click",".search-range-icon",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");filterLeftSearchPanelData(a)}))}
function activateLSDateRangePicker(a,b){$(a).daterangepicker({ranges:{Today:[moment().startOf("days"),moment().endOf("days")],Yesterday:[moment().subtract("days",1).startOf("days"),moment().subtract("days",1).endOf("days")],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},
opens:"left",timePicker:!1,timePickerIncrement:1,timePicker12Hour:!0,showDropdowns:!0,locale:{format:$(a).attr("aria-date-format"),separator:" to ",applyLabel:js_lang_label.GENERIC_GRID_SUBMIT,fromLabel:js_lang_label.GENERIC_FROM,toLabel:js_lang_label.GENERIC_TO,customRangeLabel:js_lang_label.GENERIC_CUSTOM_RANGE,daysOfWeek:"Su Mo Tu We Th Fr Sa".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),firstDay:1},dateLimit:!1,autoUpdateInput:!1});
$(a).on("apply.daterangepicker",function(a,c){$(this).val(c.startDate.format(c.locale.format)+c.locale.separator+c.endDate.format(c.locale.format));$(this).trigger("change")});$(a).on("cancel.daterangepicker",function(a,c){$(this).val("").trigger("change")});activateLSSearchChangeEvent(a,b)}
function activateLSDateTimePicker(a,b){$(a).daterangepicker({ranges:{Today:[moment().startOf("days"),moment().endOf("days")],Yesterday:[moment().subtract("days",1).startOf("days"),moment().subtract("days",1).endOf("days")],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},
opens:"left",timePicker:!0,timePickerIncrement:1,timePicker12Hour:"false"==$(a).attr("aria-enable-time")?!1:!0,showDropdowns:!0,locale:{format:$(a).attr("aria-date-format"),separator:" to ",applyLabel:js_lang_label.GENERIC_GRID_SUBMIT,fromLabel:js_lang_label.GENERIC_FROM,toLabel:js_lang_label.GENERIC_TO,customRangeLabel:js_lang_label.GENERIC_CUSTOM_RANGE,daysOfWeek:"Su Mo Tu We Th Fr Sa".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),
firstDay:1},dateLimit:!1,autoUpdateInput:!1});$(a).on("apply.daterangepicker",function(a,c){$(this).val(c.startDate.format(c.locale.format)+c.locale.separator+c.endDate.format(c.locale.format));$(this).trigger("change")});$(a).on("cancel.daterangepicker",function(a,c){$(this).val("").trigger("change")});activateLSSearchChangeEvent(a,b)}
function activateLSTimePicker(a,b){$(a).timepicker({timeFormat:$(a).attr("aria-time-format"),showSecond:"false"==$(a).attr("aria-enable-sec")?!1:!0,ampm:"false"==$(a).attr("aria-enable-ampm")?!1:!0,showOn:"focus",onClose:function(b,c){$(a).trigger("change")}});activateLSSearchChangeEvent(a,b)}
function activateLSAutoComplete(a,b){var d=$(a).attr("aria-search-field");d=el_grid_settings.search_autocomp_url+"&alias_name="+d;$(a).tokenInput(d,{minChars:1,preventDuplicates:!0,propertyToSearch:"val",theme:"facebook",resultsFormatter:function(a){return"<li>"+a.val+" <b style='float:right;width:20px;text-align:right;'>"+a.count+"</b></li>"},tokenFormatter:function(a){return"<li>"+a.val+"</li>"},onAdd:function(a){filterLeftSearchPanelData(b)},onDelete:function(a){filterLeftSearchPanelData(b)}})}
function activateLSSearchChangeEvent(a,b){$(a).change(function(){filterLeftSearchPanelData(b)})}
function getAddNewRecordContent(a){var b=$("#"+a),d=b.jqGrid("getGridParam","colModel");if(d){var c=0;$(b).find("tr[aria-rec-row]").each(function(){var a=$(this).attr("id");a&&parseInt(a)<c&&(c=parseInt(a))});c--;var e="",f=0,g=[],h=!1,k=!0,p=$("<tr />").attr("role","row").attr("id",c).attr("tabindex","-1").attr("class","add-row ui-widget-content jqgrow ui-row-ltr").attr("aria-rec-row",c),q;for(q in d){var l=d[q];$("#"+a);if(!l.hidden){if("cb"!=l.name&&"subgrid"!=l.name&&"prec"!=l.name||h)if("subgrid"==
l.name||"prec"==l.name)e=$("<td />").attr("role","gridcell").attr("style","text-align:center;vertical-align:middle").attr("aria-describedby",a+"_"+l.name);else if(l.addable){e=l.name;l.edittype||(l.edittype="text");var v=$.extend({"aria-newrow":"inline-add-row"},l.editoptions||{},{id:c+"_"+e,name:e});v=$.jgrid.createEl.call(b,l.edittype,v,"",!0,$.extend({},$.jgrid.ajaxOptions,{}),!1);var y="";$(v).hasClass("dateOnly")?y="date":$(v).hasClass("timeOnly")?y="time":$(v).hasClass("dateTime")?y="dateTime":
$(v).hasClass("colorPicker")&&(y="colorPicker");g.push({row:c,cell:e,type:y});"select"==$(v).attr("role")?$(v).attr("aria-default-val",l.default_value):$(v).val(l.default_value);e=formatAddCol(a,l,f,c,"","",0,!0);e=$("<td "+e+"/>").attr("class","add-cell ui-state-highlight").attr("role","gridcell").append(v).bind("dblclick",function(a){a.stopPropagation()});if(k){var B=l.name;k=!1}$(e).find("input[type='text'], input[type='password'], textarea").bind("keydown",function(b){(b.ctrlKey||b.metaKey)&&
83==b.keyCode&&(saveInlineAddRecord(a,c),b.stopPropagation(),b.preventDefault())})}else e=$("<td />").attr("class","add-cell ui-state-highlight").bind("dblclick",function(a){a.stopPropagation()});else h='<a href="javascript://" title="'+js_lang_label.GENERIC_CANCEL+'" aria-cancel-row="'+a+'" aria-row-id="'+c+'">',h+='<span aria-hidden="true" class="icomoon-icon-cancel-2 icon16"></span></a>',e=$("<td />").attr("role","gridcell").attr("style","text-align:center;vertical-align:middle;padding-left:0px;").attr("aria-describedby",
a+"_"+l.name).html(h),h=!0;$(p).append(e);f++}}return{data:p,events:g,row_id:c,focus_name:B}}}
function addNewInlineRecord(a){var b=$("#"+a);if(b.jqGrid("getGridParam","inlineadd")){b=b.jqGrid("getGridParam","recordpos");var d=getAddNewRecordContent(a);d&&("Bottom"==b?$("#"+a).append(d.data):$("#"+a).find("tr[aria-rec-row]").length?$("#"+a).find("tr[aria-rec-row]:last").after(d.data):$("#"+a).find("tr.jqgfirstrow").after(d.data),$("#"+a).find("tr[id='"+d.row_id+"']").find("[name='"+d.focus_name+"']").focus(),setTimeout(function(){activateAddRowEvents(d.events);applyInputTextCase($("#"+a).find("tr[id='"+
d.row_id+"']"))},100))}}
function saveInlineAddRecord(a,b){var d=$("#"+a),c=$(d).find("tr[aria-rec-row='"+b+"']");if($(c).find("[aria-newrow='inline-add-row']").length){var e={},f={},g=!0,h=d.jqGrid("getGridParam","colModel"),k;for(k in h)h[k].addable&&h[k].editrules&&(f[h[k].name]={},f[h[k].name].editrules=h[k].editrules);$(c).find("[aria-newrow='inline-add-row']").each(function(){var a=$(this).attr("name"),b=$(this).val();if(f[a]&&f[a].editrules){var c=validateViewInlineEdit(a,b,f[a]);!1===c?($(this).removeClass("inline-input-error"),$(this).parent().find("div.inline-msg-error").remove()):
(g&&$(this).focus(),g=!1,$(this).addClass("inline-input-error"),$(this).parent().find("div.inline-msg-error").length?$(this).parent().find("div.inline-msg-error").html(c):(c=$("<div />").addClass("inline-msg-error").html(c),$(this).parent().append(c)))}e[a]=b});if(!g)return!1;Project.show_adaxloading_div();e.oper="add";d.jqGrid("getGridParam","parModule")&&(e.parMod=d.jqGrid("getGridParam","parModule"),e.parID=d.jqGrid("getGridParam","parData"),e.parField=d.jqGrid("getGridParam","parField"),e.parType=
d.jqGrid("getGridParam","parType"));$.ajax({url:d.jqGrid("getGridParam","editurl"),type:"POST",data:e,success:function(b){Project.hide_adaxloading_div();b=$.parseJSON(b);if("true"==b.success){$(c).remove();reloadListGrid(a,null,1);var d=js_lang_label.GENERIC_GRID_RECORD_ADDED_SUCCESSFULLY;""!=b.message&&(d=b.message);gridReportMessage(!0,d)}else d=js_lang_label.GENERIC_GRID_ERROR_IN_ADDING_RECORD,""!=b.message&&(d=b.message),gridReportMessage(!1,d)}})}else jqueryUIalertBox(js_lang_label.GENERIC_GRID_NO_DATA_FIELDS_FOUND_FOR_SAVING,
js_lang_label.GENERIC_GRID_NO_DATA_FIELDS)}
function saveAllInlineRecords(a){var b=$("#"+a);if($(b).find("tr[aria-rec-row]").length){var d=!0,c=!0;$(b).find("tr[aria-rec-row]").each(function(){var a=$(this);$(a).find("[aria-newrow='inline-add-row']").length||(d=!1);return!1});if(!d)return jqueryUIalertBox(js_lang_label.GENERIC_GRID_NO_DATA_FIELDS_FOUND_FOR_SAVING,js_lang_label.GENERIC_GRID_NO_DATA_FIELDS),!1;var e={},f=b.jqGrid("getGridParam","colModel"),g;for(g in f)f[g].addable&&f[g].editrules&&(e[f[g].name]={},e[f[g].name].editrules=f[g].editrules);
Project.show_adaxloading_div();$(b).find("tr[aria-rec-row]").each(function(){var a={},d=!0,f=$(this);$(f).find("[aria-newrow='inline-add-row']").each(function(){var b=$(this).attr("name"),c=$(this).val();if(e[b]&&e[b].editrules){var f=validateViewInlineEdit(b,c,e[b]);!1===f?($(this).removeClass("inline-input-error"),$(this).parent().find("div.inline-msg-error").remove()):(d&&$(this).focus(),d=!1,$(this).addClass("inline-input-error"),$(this).parent().find("div.inline-msg-error").length?$(this).parent().find("div.inline-msg-error").html(f):
(f=$("<div />").addClass("inline-msg-error").html(f),$(this).parent().append(f)))}a[b]=c});if(!d)return c=!1;a.oper="add";b.jqGrid("getGridParam","parModule")&&(a.parMod=b.jqGrid("getGridParam","parModule"),a.parID=b.jqGrid("getGridParam","parData"),a.parField=b.jqGrid("getGridParam","parField"),a.parType=b.jqGrid("getGridParam","parType"));$.ajax({url:b.jqGrid("getGridParam","editurl"),type:"POST",async:!1,data:a,success:function(a){a=$.parseJSON(a);if("true"==a.success){$(f).remove();var b=js_lang_label.GENERIC_GRID_RECORD_ADDED_SUCCESSFULLY;
""!=a.message&&(b=a.message);gridReportMessage(!0,b)}else return b=js_lang_label.GENERIC_GRID_ERROR_IN_ADDING_RECORD,""!=a.message&&(b=a.message),gridReportMessage(!1,b),c=!1}})});Project.hide_adaxloading_div();c&&reloadListGrid(a,null,1)}else jqueryUIalertBox(js_lang_label.GENERIC_GRID_NO_DATA_FIELDS_FOUND_FOR_SAVING,js_lang_label.GENERIC_GRID_NO_RECORDS)}
function cancelInlineAddRecord(a,b){jqueryUIdialogBox("<div></div>",js_lang_label.GENERIC_GRID_ARE_YOU_SURE_WANT_TO_DELETE_ADDED_RECORD,{title:js_lang_label.GENERIC_GRID_DELETE,buttons:[{text:js_lang_label.GENERIC_DELETE,bt_type:"delete",click:function(){$("#"+a).find("tr[aria-rec-row='"+b+"']").remove();$(this).remove()}},{text:js_lang_label.GENERIC_CANCEL,bt_type:"cancel",click:function(){$(this).remove()}}]})}
function cancelAllInlineRecords(a){$("#"+a).find("tr[aria-rec-row]").length?jqueryUIdialogBox("<div></div>",js_lang_label.GENERIC_GRID_ARE_YOU_SURE_WANT_TO_DELETE_ALL_NEW_RECORDS,{title:js_lang_label.GENERIC_GRID_DELETE,buttons:[{text:js_lang_label.GENERIC_DELETE,bt_type:"delete",click:function(){$("#"+a).find("tr[aria-rec-row]").remove();$(this).remove()}},{text:js_lang_label.GENERIC_CANCEL,bt_type:"cancel",click:function(){$(this).remove()}}]}):jqueryUIalertBox(js_lang_label.GENERIC_GRID_NO_NEW_RECORDS_FOUND_FOR_DELETE,
js_lang_label.GENERIC_GRID_NO_RECORDS)}function activateAddRowEvents(a){if(a)for(i in a)"date"==a[i].type?inlineDateTimePicker(a[i].row,a[i].cell,"date"):"time"==a[i].type?inlineDateTimePicker(a[i].row,a[i].cell,"time"):"dateTime"==a[i].type?inlineDateTimePicker(a[i].row,a[i].cell,"dateTime"):"colorPicker"==a[i].type&&inlineColorPicker(a[i].row,a[i].cell,"colorPicker")}
function formatAddCol(a,b,d,c,e,f,g,h){$("#"+a);d=b.align;c='style="';e=b.classes;f=b.name;d&&(c+="text-align:"+d+";");!0===b.hidden&&(c+="display:none;");return c+((void 0!==e?' class="'+e+'"':"")+"")+(' aria-describedby="'+a+"_"+f+'"')}
function applySearchCriteria(a){var b;var d=$("#"+a).getGridParam("postData");d.filters&&(d=$.parseJSON(d.filters))&&d.rules&&$.isArray(d.rules)&&d.rules.length&&(b=1);1==b?$("#search_"+a+"_top").find("div.btn").addClass("active"):$("#search_"+a+"_top").find("div.btn").removeClass("active")}
function applyGridRowColors(a,b){var d=$("#"+a);if(!b||!b.records||!b.colors)return!1;var c=d.jqGrid("getGridParam","colModel"),e=d.jqGrid("getGridParam","listview"),f=b.colors,g;for(g in f)if(f[g])for(var h in f[g]){var k=f[g][h];if("grid"==e)if("cell"==k.fill||"text"==k.fill){var p=k.cell.toLowerCase();p=p.replace(RegExp("_","gi"),"-");"text"==k.fill?$(d).find(".item-grid[id='"+g+"']").find("."+p).css("color",k.color):$(d).find(".item-grid[id='"+g+"']").find("."+p).css("background-color",k.color)}else $(d).find(".item-grid[id='"+
g+"']").css("background-color",k.color);else if("view"==e)"cell"==k.fill||"text"==k.fill?(p=k.cell.toLowerCase(),p=p.replace(RegExp("_","gi"),"-"),"text"==k.fill?$(d).find("tr[id='"+g+"'] .item-list").find("."+p).css("color",k.color):$(d).find("tr[id='"+g+"'] .item-list").find("."+p).css("background-color",k.color)):$(d).find("tr[id='"+g+"'] td").css("background-color",k.color);else if("cell"==k.fill||"text"==k.fill){p=0;for(var q in c){if(c[q].name==k.cell)break;p++}"text"==k.fill?$(d).find("tr[id='"+
g+"'] td:eq("+p+")").css("color",k.color):$(d).find("tr[id='"+g+"'] td:eq("+p+")").css("background-color",k.color)}else $(d).find("tr[id='"+g+"'] td").css("background-color",k.color)}}
function applyRatingEvents(a){a=$("#"+a);if(!a.jqGrid("getGridParam","ratingAllow"))return!1;var b=a.jqGrid("getGridParam","colModel"),d=a.getDataIDs(),c;for(c in d){var e=d[c];for(var f in b)if("rating_master"==b[f].ctrl_type&&b[f].ratyallow&&b[f].ratyevents){var g=$(a).find("tr[id='"+e+"'] td:eq("+f+")");var h=$(g).text();var k=$("<span />").addClass("rating-icons-block");activateRatingMasterEvent(k,b[f].ratyevents.raty.params,b[f].ratyevents.raty.hints,h);$(g).text("");$(g).append(k)}}}
function adjustMainGridColumnWidth(){if($("#"+el_tpl_settings.main_grid_id).jqGrid("getGridParam","autowidth"))return!1;var a=$("#hbox_"+el_tpl_settings.main_grid_id+"_jqgrid").find(".ui-jqgrid-htable:first"),b=$("#"+el_tpl_settings.main_grid_id),d=$(a).find(".ui-jqgrid-labels"),c=$(b).find(".jqgfirstrow:first");a=$(a).get(0).scrollWidth;b=$(b).get(0).scrollWidth-a;var e=0;$(d).find("th").each(function(){$(this).is(":hidden")||e++});if(8<b&&0<e){var f=Math.round(b/e);$(d).find("th").each(function(a){if(!$(this).is(":hidden")){var b=
$(this).width()+parseInt(f);$(this).width(b);$(c).find("td:eq("+a+")").width(b)}})}}function initGirdLoadingProgress(a){$("#load_"+a).show()}function hideGirdLoadingProgress(a){$("#load_"+a).hide()}function initGirdLoadingOverlay(a){$("#lui_"+a).show()}function hideGirdLoadingOverlay(a){$("#lui_"+a).hide()}
function noRecordsMessage(a,b){if(!b||!b.records||"0"==b.records){var d=$("#"+a),c=b.no_records_msg?b.no_records_msg:$(d).jqGrid("getGridParam","norecmsg"),e=$(d).find("tr.jqgfirstrow").find("td").length;c=$("<tr />").html("<td colspan='"+e+"' align='center'><div class='grid-norec-msg'>"+c+"</div></td>");$(d).append(c)}}
function adjustWrappedWidth(a){var b=$("#"+a),d=$(b).jqGrid("getGridParam","autowidth"),c=$(b).jqGrid("getGridParam","colModel");b=b.getDataIDs();if(!b||!b.length||1==d)return!1;$("#"+a).find("tr.ui-row-ltr td").css("white-space","nowrap");var e={},f;for(f in b)d=$("#"+a).find("tr[id='"+b[f]+"']"),$(d).find("td").each(function(a){$.isArray(e[a])||(e[a]=[]);e[a].push($(this)[0].scrollWidth)});d=$("#hbox_"+a+"_jqgrid").find(".ui-jqgrid-htable:first");b=$("#"+a);a=$(d).find(".ui-jqgrid-labels");d=$(b).find(".jqgfirstrow:first");
for(f in e){b=$(a).find("th:eq("+f+")").is(":hidden");var g=c[f]&&c[f].name&&-1==$.inArray(c[f].name,["cb","rn","subgrid","prec"])?!1:!0;b?($(a).find("th:eq("+f+")").width(0),$(d).find("td:eq("+f+")").width(0)):(g?b=c[f]&&c[f].width?c[f].width:0:(b=Math.max.apply(null,e[f]),b+=2,b=b>el_tpl_settings.grid_column_width?b:el_tpl_settings.grid_column_width),$(a).find("th:eq("+f+")").width(b),$(d).find("td:eq("+f+")").width(b))}return!0}
function makeAddListEditableTextBox(a,b){var d=!0;if("file"==b[a].type){var c=b[a].dbval;d=!1}$("#"+a).editable({showbuttons:d,placeholder:b[a].editoptions.placeholder,type:"text",name:a,value:c,pk:el_subview_settings.edit_id,onblur:"submit",validate:function(a){var c=$(this).attr("id");return validateViewInlineEdit(c,a,b[c])},url:function(a){saveViewInlineEdit(a.name,a.value,a.id)}});$("#"+a).on("shown",function(c,d){var e=$(this).attr("id"),f=$(d.$form).find(".editable-input").find("input[type='text']");
e=b[e];switch(e.type){case "date":$(f).addClass("date-picker-icon");activeDateTimePicker(f,"date",e.editoptions);break;case "date_and_time":$(f).addClass("date-picker-icon");activeDateTimePicker(f,"dateTime",e.editoptions);break;case "time":$(f).addClass("date-picker-icon");activeDateTimePicker(f,"time",e.editoptions);break;case "phone_number":$(f).mask(e.editoptions.format);break;case "textbox":e.editoptions.text_case&&($(f).addClass(e.editoptions.text_case),applyInputTextCase($(d.$form).find(".editable-input")));
applyAddonElementHTML($(d.$form).find(".editable-input"),e);break;case "color_picker":activateColorPicker(f,e.editoptions.color_preview);addElementProperties(f,e.editoptions);break;case "file":$(f).hide();appendAddListUploadifyProperties(f,e);break;case "autocomplete":var k=Math.floor(1E5*Math.random()+1);$(f).attr("id",k);$(f).wrap('<div class="frm-token-autocomplete frm-size-medium" />');activateAddListAutoComplete(f,e,a);addElementProperties(f,e.editoptions);setTimeout(function(){$(d.$form).find(".frm-token-autocomplete").append(b[a].add_content);
var c=$(d.$form).find(".fancybox-hash-iframe").attr("href");$(d.$form).find(".fancybox-hash-iframe").attr("href",c+"|rfhtmlID|"+k)},5);break;case "rating_master":$(f).hide(),appendAddListRatingProperties(f,e)}0<parseInt(e.editoptions.width)&&$(f).css("width",e.editoptions.width)});if("rating_master"==b[a].type)$("#"+a).on("hidden",function(a,b){var c=$(this).attr("id");$("#rshow_"+c).show()})}
function activateAddListAutoComplete(a,b,d){var c=b.editoptions.token.params;view_token_pre_populates[d]=c.prePopulate;getAddListAutoCompDataValueArr(d);view_token_input_assign=$(a).tokenInput(b.editoptions.serviceUrl,{minChars:c.minChars,multi:b.editoptions.multi,propertyToSearch:c.propertyToSearch,theme:c.theme,tokenLimit:c.tokenLimit,hintText:c.hintText,noResultsText:c.noResultsText,searchingText:c.searchingText,preventDuplicates:c.preventDuplicates,prePopulate:c.prePopulate,onAdd:function(a){view_token_pre_populates[d]=
view_token_input_assign.tokenInput("get");getAddListAutoCompDataValueArr(d)},onDelete:function(a){view_token_pre_populates[d]=view_token_input_assign.tokenInput("get");getAddListAutoCompDataValueArr(d)}})}function getAddListAutoCompDataValueArr(a){var b=[];for(i in view_token_pre_populates[a])b[i]=view_token_pre_populates[a][i].val;$("#"+a).attr("data-value",b.join(","))}
function displayAddListRatingProperties(a,b){var d=$("<span />").attr("id","rshow_"+a).addClass("rating-icons-block");var c=$("#rscore_"+a);var e=$(c).text();var f=$.extend({},b.editoptions.raty.params);f.cancel=!1;f.readOnly=!0;activateRatingMasterEvent(d,f,b.editoptions.raty.hints,e);$(c).after(d);$(c).hide()}
function appendAddListRatingProperties(a,b){var d=$("<span />",{id:"rstar_"+b.htmlID,"aria-raty-name":b.htmlID}).addClass("rating-icons-block");var c=$("#rshow_"+b.htmlID);var e=$("#rscore_"+b.htmlID);e=$(e).text();var f=$.extend({},b.editoptions.raty.params);f.target=a;activateRatingMasterEvent(d,f,b.editoptions.raty.hints,e);$(a).after(d);$(c).hide()}
function makeAddListEditableTextArea(a,b){$("#"+a).editable({showbuttons:!0,type:"textarea",placeholder:b[a].editoptions.placeholder,name:a,pk:el_subview_settings.edit_id,onblur:"submit",rows:3,validate:function(a){var c=$(this).attr("id");return validateViewInlineEdit(c,a,b[c])},url:function(a){saveViewInlineEdit(a.name,a.value,a.id)}});$("#"+a).on("shown",function(a,c){var d=$(this).attr("id"),f=$(c.$form).find(".editable-input").find("textarea");d=b[d];d.editoptions.text_case&&($(f).addClass(d.editoptions.text_case),
applyInputTextCase($(c.$form).find(".editable-input")))})}function makeAddListEditablePassword(a,b){$("#"+a).editable({showbuttons:!0,type:"password",placeholder:b[a].editoptions.placeholder,name:a,pk:el_subview_settings.edit_id,onblur:"submit",validate:function(a){var c=$(this).attr("id");return validateViewInlineEdit(c,a,b[c])},url:function(a){saveViewInlineEdit(a.name,a.value,a.id)}})}
function makeAddListEditableDropdown(a,b){if(b[a].editoptions&&b[a].editoptions.dataUrl){var d=b[a].editoptions.dataUrl;$("#"+a).editable({showbuttons:!0,type:"select",source:d,pk:el_subview_settings.edit_id,sourceCache:!1,validate:function(a){var c=$(this).attr("id");return validateViewInlineEdit(c,a,b[c])},url:function(a){saveViewInlineEdit(a.name,a.value,a.id)}});$("#"+a).on("shown",function(c,d){var e=$(d.$form).find(".editable-input").find("select");$(e).attr("data-placeholder",b[a].editoptions.data_placeholder);
$(e).find("option").removeAttr("selected");var g=$(this).attr("data-value");$(e).find("option").each(function(){if($(this).text()==g)return $(this).prop("selected",!0),!1});var h=$(this).attr("id"),k=b[h];switch(k.type){case "checkboxes":$(e).attr("multiple",!0);break;case "multi_select_dropdown":$(e).attr("multiple",!0)}0<parseInt(k.editoptions.width)&&$(e).attr("style",function(a,b){return"width: "+k.editoptions.width+"px !important;"+b});if("checkboxes"==k.type||"multi_select_dropdown"==k.type){var p=
[];$.each(g.split(","),function(){p.push($.trim(this))});$(e).find("option").each(function(){-1!=$.inArray($.trim($(this).text()),p)&&$(this).prop("selected",!0)})}else $(e).find("option").each(function(){if($.trim($(this).text())==$.trim(g))return $(this).prop("selected",!0),!1});setTimeout(function(){$(e).chosen({allow_single_deselect:!0});var a=$(e).attr("id");$("#"+a+"_chosen").trigger("mousedown");$("#"+a+"_chosen").find("input[type='text']").focus();a=b[h];"ajax-call"==a.editoptions.ajaxCall&&
(a=el_subview_settings.ajax_data_url+""+("&mode="+cus_enc_mode_json.Update+"&unique_name="+a.editoptions.rel),$(e).ajaxChosen({dataType:"json",type:"POST",url:a},{loadingImg:admin_image_url+"chosen-loading.gif"}))},5);$(e).change(function(){if("checkboxes"==k.type||"multi_select_dropdown"==k.type){var a=[];$(this).find("option:selected").each(function(){a.push($(this).text())});a&&0<a.length?$("#"+h).attr("data-value",a.join(",")):$("#"+h).attr("data-value","")}else $("#"+h).attr("data-value",$(this).find("option:selected").val())})})}}
function appendAddListUploadifyProperties(a,b){if(b){var d=b.htmlID,c=b.dbval,e=b.parentattr,f=b.editoptions;if(!f.fileupload)return!1;var g="<div class='uploader'>"+("<input type='hidden' value='"+c+"' name='temp_"+d+"' id='temp_"+d+"' />")+("<input type='file' name='uploadify_"+d+"' id='uploadify_"+d+"' title='"+b.label+"'/>");g+="<span class='filename' id='preview_caf_file'>"+f.fileupload.placeholder+"</span><span class='action'>Choose File</span>";g+="</div>";var h=$(a).closest(".editable-container");
$(h).wrap("<div "+e+' id="btn_file_'+d+'"/>');$(a).after(g);if(f.fileupload){var k=f.fileupload;e=assignEventParams(k.params);e=$.extend({},e,{formData:{unique_name:k.unique_name,id:k.id,type:"uploadify"},add:function(a,b){var c=[],d=$(this).fileupload("option","name"),e=$(this).fileupload("option","temp"),f=$(this).fileupload("option","formData"),g=$(this).fileupload("option","maxFileSize"),h=$(this).fileupload("option","acceptFileTypes"),k=b.originalFiles[0].name,q=b.originalFiles[0].size;if("*"!=
h){var p=k?k.substr(k.lastIndexOf(".")):"";h=new RegExp("(.|/)("+h+")$","i");p&&!h.test(p)&&c.push(js_lang_label.ACTION_FILE_TYPE_IS_NOT_ACCEPTABLE)}q&&q>1E3*g&&c.push(js_lang_label.ACTION_FILE_SIZE_IS_TOO_LARGE);0<c.length?Project.setMessage(c.join("\n"),0):(f.oldFile=$("#"+e).val(),$(this).fileupload("option","formData",f),$("#preview_"+d).html(k),b.submit())},done:function(a,b){if(b&&b.result){var d=$(this).fileupload("option","name"),e=$(this).fileupload("option","temp"),f=$.parseJSON(b.result);
"0"==f.success?Project.setMessage(f.message,0):($("#"+d).val(f.uploadfile),$("#"+e).val(f.oldfile),displayAdminListFlyImage(d,k,f),saveViewInlineEdit(d,f.uploadfile,el_subview_settings.edit_id,{old_file:c}),setTimeout(function(){$(".jqgrid-subview").click()},200))}},fail:function(a,b){$.each(b.messages,function(a,b){Project.setMessage(b,0)})}});$("#uploadify_"+d).fileupload(e)}}}
function displayAdminListFlyImage(a,b,d){if(d.fileURL){b="<a title='"+js_lang_label.GENERIC_GRID_DELETE+"' style='text-decoration:none;' href='javascript://' onclick='deleteFileTypeDocs(\""+b.id+'","'+b.unique_name+'","'+b.delete_file_url+'","'+b.folder+'","'+a+"\")' id='anc_imgdel_"+a+"' >";b+="<span class='icon16 minia-icon-trashcan'></span></a>";var c=$("<a />");"file"==d.fileType?$(c).attr("id","anc_imgview_"+a).attr("href",d.fileURL).attr("target","_blank").addClass("btn btn-success btn-mini").html("View"):
$(c).attr("id","anc_imgview_"+a).attr("href",d.fileURL).addClass("fancybox-image").html("<img src='"+d.fileURL+"' alt='Image' width='"+d.width+"' height='"+d.height+"'/>");$("#img_view_"+a).html(c);$("#img_del_"+a).html(b);initializeFancyBoxEvents($("#img_view_"+a))}}
function activateGridSortColumns(a){var b=$("#"+a).jqGrid("getGridParam","sortname"),d=$("#"+a).jqGrid("getGridParam","sortorder");$("div[id^='jqgh_"+a+"'] span.s-ico").css("display","none");a=$("div[id='jqgh_"+a+"_"+b+"'] span.s-ico");if(!a)return!1;$(a).css("display","inline");"asc"==d?($(a).find("span[sort='asc']").removeClass("ui-state-disabled"),$(a).find("span[sort='desc']").addClass("ui-state-disabled")):($(a).find("span[sort='asc']").addClass("ui-state-disabled"),$(a).find("span[sort='desc']").removeClass("ui-state-disabled"))}
function getColumnsPosition(a,b){var d=getLocalStore(a,!0);if(!d)return!1;try{d=$.parseJSON(d);if(!d.columns)return!1;var c=d.columns;if(!$.isArray(c)||0==c.length)return!1;$("#"+b).jqGrid("remapColumns",c,!0)}catch(e){}}
function setColumnsPosition(a,b,d,c){b=$("#"+d).jqGrid("getGridParam","colModel");d=[];var e=0,f,g;for(f=0;f<b.length;f++){var h=b[f].name;if(-1!=$.inArray(h,["cb","rn","subgrid","prec"]))d.push(f),e++;else for(g=0;g<c.length;g++){var k=c[g].name;if(k==h){d.push(g+e);break}}}setLocalStore(a,JSON.stringify({columns:d}),!0)}
function getColumnsChoosen(a,b){var d=getLocalStore(a,!0);if(!d)return!1;try{d=$.parseJSON(d);if(!d.columns)return!1;var c=d.columns;if(!$.isArray(c)||0==c.length)return!1;var e=$("#"+b).jqGrid("getGridParam","colModel");for(d=0;d<e.length;d++)-1!=$.inArray(e[d].name,c)?!0!==e[d].hidden&&$("#"+b).jqGrid("hideCol",e[d].name):!0===e[d].hidden&&$("#"+b).jqGrid("showCol",e[d].name)}catch(f){}}
function setColumnsChoosen(a,b){var d=$("#"+b).jqGrid("getGridParam","colModel"),c=[],e;for(e=0;e<d.length;e++){var f=d[e].name;-1==$.inArray(f,["cb","rn","subgrid","prec"])&&!0===d[e].hidden&&c.push(f)}setLocalStore(a,JSON.stringify({columns:c}),!0)}
function getColumnsWidth(a,b,d){a=getLocalStore(a,!0);if(!a)return!1;try{a=$.parseJSON(a);if(!a.columns)return!1;var c=a.columns;if(!$.isPlainObject(c))return!1;var e;for(e=0;e<d.length;e++){var f=d[e].name;if(-1==$.inArray(f,["cb","rn","subgrid","prec"])){var g=parseInt(c[f]);!isNaN(g)&&g&&(d[e].width=g>el_tpl_settings.grid_column_width?g:el_tpl_settings.grid_column_width)}}}catch(h){}}
function setColumnsWidth(a,b){var d=$("#"+b).jqGrid("getGridParam","colModel"),c={},e;for(e=0;e<d.length;e++){var f=d[e].name;-1==$.inArray(f,["cb","rn","subgrid","prec"])&&(c[f]=d[e].width)}setLocalStore(a,JSON.stringify({columns:c}),!0)}function checkColumnsWidth(a,b){var d=getLocalStore(a,!0);d||setColumnsWidth(a,b);try{d=$.parseJSON(d),$.isPlainObject(d.columns)||setColumnsWidth(a,b)}catch(c){}}
function createCustomGridButton(a,b,d,c){var e=a.name+"_"+b;jQuery("#"+b).navButtonAdd("#"+d,{caption:a.text,title:a.title,alert:a.alert,confirm:a.confirm,buttonicon:"ico-cutom-btn "+(a.icon?a.icon:"ui-icon-newwin"),buttonicon_p:"uigrid-custom-common uigrid-custom-btn",onClickButton:function(a,c){var d=filterGridSelectedIDs(this);adminCustomButtonAction(d,c.alert,c.confirm,b,el_grid_settings.extra_qstr)},position:"last",id:e,afterButtonId:c});jQuery("#"+b).navButtonAdd("#"+b+"_toppager_left",{caption:a.text,
title:a.title,alert:a.alert,confirm:a.confirm,buttonicon:"ico-cutom-btn "+(a.icon?a.icon:"ui-icon-newwin"),buttonicon_p:"uigrid-custom-common uigrid-custom-btn",onClickButton:function(a,c){var d=filterGridSelectedIDs(this);adminCustomButtonAction(d,c.alert,c.confirm,b,el_grid_settings.extra_qstr)},position:"last",id:e+"_top",afterButtonId:c?c+"_top":""});return e}
function filterGridSelectedIDs(a){var b=$(a).getGridParam("selarrrow");a=$(a).getGridParam("hiderecords");return $.isArray(a)?$(b).not(a).get():b}function reloadListGrid(a,b,d,c){1==d?$("#"+a).setGridParam({defaultsort:"Yes"}):2==d&&$("#"+a).setGridParam({sortname:c.default_sort,sortorder:c.sort_order,defaultsort:"Yes"});b?$("#"+a).trigger("reloadGrid",b):$("#"+a).trigger("reloadGrid")};