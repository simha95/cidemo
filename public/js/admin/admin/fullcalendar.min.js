(function(h,F){function Ra(a){h.extend(!0,wa,a)}function ob(a,c,b){function d(){setTimeout(function(){!n.start&&h("body").is(":visible")&&l()},0)}function e(){return a.is(":visible")}function f(a){n&&a==n.name||(K++,n&&(O("viewDestroy",n,n,n.element),p(),n.triggerEventDestroy(),ca(),n.element.remove(),B.deactivateButton(n.name)),B.activateButton(a),n=new ba[a](h("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(J),y),l(),W(),K--)}function l(a){(!n.start||a||n.start>D||D>=
n.end)&&e()&&w(a)}function w(a){K++;n.start&&(O("viewDestroy",n,n,n.element),p(),v());ca();n.render(D,a||0);r();W();(n.afterRender||pb)();B.updateTitle(n.title);a=new Date;a>=n.start&&n.end>a?B.disableButton("today"):B.enableButton("today");O("viewRender",n,n,n.element);n.trigger("viewDisplay",t);K--;!c.lazyFetching||Z(n.visStart,n.visEnd)?X(n.visStart,n.visEnd):z()}function g(){e()&&(p(),v(),m(),r(),z())}function m(){L=c.contentHeight?c.contentHeight:c.height?c.height-(U?U.height():0)-sa(J):Math.round(J.width()/
Math.max(c.aspectRatio,.5))}function r(){L===F&&m();K++;n.setHeight(L);n.setWidth(J.width());K--;G=a.outerWidth()}function k(){if(!K)if(n.start){var c=++I;setTimeout(function(){c==I&&!K&&e()&&G!=(G=a.outerWidth())&&(K++,g(),n.trigger("windowResize",t),K--)},200)}else d()}function E(a){v();z(a)}function z(a){e()&&(n.setEventData(M),n.renderEvents(M,a),n.trigger("eventAfterAllRender"))}function v(){n.triggerEventDestroy();n.clearEvents();n.clearEventData()}function p(){n&&n.unselect()}function ca(){J.css({width:"100%",
height:J.height(),overflow:"hidden"})}function W(){J.css({width:"",height:"",overflow:""})}function O(a,b){return c[a]?c[a].apply(b||t,Array.prototype.slice.call(arguments,2)):F}var y=this;y.options=c;y.render=function(b){J?e()&&(m(),w(b)):(a.addClass("fc"),c.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),c.theme&&a.addClass("ui-widget"),J=h("<div class='fc-content' style='position:relative'/>").prependTo(a),B=new qb(y,c),(U=B.render())&&a.prepend(U),f(c.defaultView),c.handleWindowResize&&h(window).resize(k),
h("body").is(":visible")||d())};y.destroy=function(){n&&(O("viewDestroy",n,n,n.element),n.triggerEventDestroy());h(window).unbind("resize",k);B.destroy();J.remove();a.removeClass("fc fc-rtl ui-widget")};y.refetchEvents=function(){v();X(n.visStart,n.visEnd)};y.reportEvents=function(a){M=a;z()};y.reportEventChange=function(a){E(a)};y.rerenderEvents=E;y.changeView=f;y.select=function(a,b,c){n.select(a,b,c===F?!0:c)};y.unselect=p;y.prev=function(){l(-1)};y.next=function(){l(1)};y.prevYear=function(){Ea(D,
-1);l()};y.nextYear=function(){Ea(D,1);l()};y.today=function(){D=new Date;l()};y.gotoDate=function(a,b,c){a instanceof Date?D=x(a):Sa(D,a,b,c);l()};y.incrementDate=function(a,b,c){a!==F&&Ea(D,a);b!==F&&Fa(D,b);c!==F&&C(D,c);l()};y.formatDate=function(a,b){return da(a,b,c)};y.formatDates=function(a,b,d){return Ga(a,b,d,c)};y.getDate=function(){return x(D)};y.getView=function(){return n};y.option=function(a,b){return b===F?c[a]:(("height"==a||"contentHeight"==a||"aspectRatio"==a)&&(c[a]=b,g()),F)};
y.trigger=O;rb.call(y,c,b);var B,U,J,n,G,L,P,Z=y.isFetchNeeded,X=y.fetchEvents,t=a[0],I=0,K=0,D=new Date,M=[];Sa(D,c.year,c.month,c.date);c.droppable&&h(document).bind("dragstart",function(a,b){var d=a.target,J=h(d);if(!J.parents(".fc").length){var e=c.dropAccept;(h.isFunction(e)?e.call(d,J):J.is(e))&&(P=d,n.dragStart(P,a,b))}}).bind("dragstop",function(a,b){P&&(n.dragStop(P,a,b),P=null)})}function qb(a,c){function b(b){var e=h("<td class='fc-header-"+b+"'/>");b=c.header[b];return b&&h.each(b.split(" "),
function(b){0<b&&e.append("<span class='fc-header-space'/>");var f;h.each(this.split(","),function(b,r){if("title"==r)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(d+"-corner-right"),f=null;else{var k;if(a[r]?k=a[r]:ba[r]&&(k=function(){v.removeClass(d+"-state-hover");a.changeView(r)}),k){var w=c.theme?Ha(c.buttonIcons,r):null,x=Ha(c.buttonText,r),v=h("<span class='fc-button fc-button-"+r+" "+d+"-state-default'>"+(w?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+
w+"'/></span>":x)+"</span>").click(function(){v.hasClass(d+"-state-disabled")||k()}).mousedown(function(){v.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){v.removeClass(d+"-state-down")}).hover(function(){v.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){v.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(e);xa(v);f||v.addClass(d+"-corner-left");f=v}}});f&&f.addClass(d+"-corner-right")}),
e}this.render=function(){d=c.theme?"ui":"fc";return c.header?e=h("<table class='fc-header' style='width:100%'/>").append(h("<tr/>").append(b("left")).append(b("center")).append(b("right"))):F};this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+
a).addClass(d+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-disabled")};var d,e=h([])}function rb(a,c){function b(b,c){d(b,function(d){if(c==W){if(d){a.eventDataTransform&&(d=h.map(d,a.eventDataTransform));b.eventDataTransform&&(d=h.map(d,b.eventDataTransform));for(var e=0;d.length>e;e++)d[e].source=b,w(d[e]);B=B.concat(d)}O--;O||v(B)}})}function d(b,c){var e,g,w=S.sourceFetchers;for(e=0;w.length>e;e++){if(g=w[e](b,r,k,c),!0===g)return;if("object"==
typeof g)return d(g,c),F}if(e=b.events)h.isFunction(e)?(f(),e(x(r),x(k),function(a){c(a);l()})):h.isArray(e)?c(e):c();else if(b.url){var p=b.success,m=b.error,t=b.complete;e=h.isFunction(b.data)?b.data():b.data;e=h.extend({},e||{});g=oa(b.startParam,a.startParam);w=oa(b.endParam,a.endParam);g&&(e[g]=Math.round(+r/1E3));w&&(e[w]=Math.round(+k/1E3));f();h.ajax(h.extend({},sb,b,{data:e,success:function(a){a=a||[];var b=ya(p,this,arguments);h.isArray(b)&&(a=b);c(a)},error:function(){ya(m,this,arguments);
c()},complete:function(){ya(t,this,arguments);l()}}))}else c()}function e(a){h.isFunction(a)||h.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=S.sourceNormalizers,d=0;c.length>d;d++)c[d](b);a=(C.push(a),a)}else a=F;return a}function f(){y++||E("loading",null,!0,z())}function l(){--y||E("loading",null,!1,z())}function w(b){var c=b.source||{},d=oa(c.ignoreTimezone,
a.ignoreTimezone);b._id=b._id||(b.id===F?"_fc"+tb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=x(b.start=Ia(b.start,d));b.end=Ia(b.end,d);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?x(b.end):null;b.allDay===F&&(b.allDay=oa(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function g(a,b){return a&&b&&m(a)==m(b)}function m(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=
function(a,b){return!r||r>a||b>k};this.fetchEvents=function(a,c){r=a;k=c;B=[];var d=++W,e=C.length;O=e;for(var f=0;e>f;f++)b(C[f],d)};this.addEventSource=function(a){(a=e(a))&&(O++,b(a,W))};this.removeEventSource=function(a){C=h.grep(C,function(b){return!g(b,a)});B=h.grep(B,function(b){return!g(b.source,a)});v(B)};this.updateEvent=function(a){var b,c,d=B.length,e=z().defaultEventEnd,f=a.start-a._start,l=a.end?a.end-(a._end||e(a)):0;for(b=0;d>b;b++)c=B[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+
f),c.end=a.end?c.end?new Date(+c.end+l):new Date(+e(c)+l):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroundColor=a.backgroundColor,c.borderColor=a.borderColor,c.textColor=a.textColor,w(c));w(a);v(B)};this.renderEvent=function(a,b){w(a);a.source||(b&&(p.events.push(a),a.source=p),B.push(a));v(B)};this.removeEvents=function(a){if(a){if(!h.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}B=h.grep(B,a,!0);for(var c=0;C.length>
c;c++)h.isArray(C[c].events)&&(C[c].events=h.grep(C[c].events,a,!0))}else for(B=[],c=0;C.length>c;c++)h.isArray(C[c].events)&&(C[c].events=[]);v(B)};this.clientEvents=function(a){return h.isFunction(a)?h.grep(B,a):a?(a+="",h.grep(B,function(b){return b._id==a})):B};this.normalizeEvent=w;for(var r,k,E=this.trigger,z=this.getView,v=this.reportEvents,p={events:[]},C=[p],W=0,O=0,y=0,B=[],U=0;c.length>U;U++)e(c[U])}function Ea(a,c,b){return a.setFullYear(a.getFullYear()+c),b||ja(a),a}function Fa(a,c,b){if(+a){c=
a.getMonth()+c;var d=x(a);d.setDate(1);d.setMonth(c);a.setMonth(c);for(b||ja(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(d>a?1:-1))}return a}function C(a,c,b){if(+a){c=a.getDate()+c;var d=x(a);d.setHours(9);d.setDate(c);a.setDate(c);b||ja(a);Ja(a,d)}return a}function Ja(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(c>a?1:-1)*ub)}function Q(a,c){return a.setMinutes(a.getMinutes()+c),a}function ja(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function x(a,
c){return c?ja(new Date(+a)):new Date(+a)}function Ta(){var a,c=0;do a=new Date(1970,c++,1);while(a.getHours());return a}function ta(a,c){return Math.round((x(a,!0)-x(c,!0))/vb)}function Sa(a,c,b,d){c!==F&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==F&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));d!==F&&a.setDate(d)}function Ia(a,c){return"object"==typeof a?a:"number"==typeof a?new Date(1E3*a):"string"==typeof a?a.match(/^\d+(\.\d+)?$/)?new Date(1E3*parseFloat(a)):(c===
F&&(c=!0),Ka(a,c)||(a?new Date(a):null)):null}function Ka(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var d=new Date(b[1],0,1);if(c||!b[13]){var e=new Date(b[1],0,1,9,0);b[3]&&(d.setMonth(b[3]-1),e.setMonth(b[3]-1));b[5]&&(d.setDate(b[5]),e.setDate(b[5]));Ja(d,e);b[7]&&d.setHours(b[7]);b[8]&&d.setMinutes(b[8]);b[10]&&d.setSeconds(b[10]);b[12]&&d.setMilliseconds(1E3*Number("0."+
b[12]));Ja(d,e)}else if(d.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),d.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14])e=60*Number(b[16])+(b[18]?Number(b[18]):0),e*="-"==b[15]?1:-1,d=new Date(+d+6E4*e);return d}function La(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);return a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12)),60*c+(a[2]?parseInt(a[2],
10):0)}}function da(a,c,b){return Ga(a,null,c,b)}function Ga(a,c,b,d){d=d||wa;var e,f,l,h,g=a,m=c,r=b.length,k="";for(e=0;r>e;e++)if(f=b.charAt(e),"'"==f)for(l=e+1;r>l;l++){if("'"==b.charAt(l)){g&&(k+=l==e+1?"'":b.substring(e+1,l),e=l);break}}else if("("==f)for(l=e+1;r>l;l++){if(")"==b.charAt(l)){e=da(g,b.substring(e+1,l),d);parseInt(e.replace(/\D/,""),10)&&(k+=e);e=l;break}}else if("["==f)for(l=e+1;r>l;l++){if("]"==b.charAt(l)){h=b.substring(e+1,l);e=da(g,h,d);e!=da(m,h,d)&&(k+=e);e=l;break}}else if("{"==
f)g=c,m=a;else if("}"==f)g=a,m=c;else{for(l=r;l>e;l--)if(h=Ua[b.substring(e,l)]){g&&(k+=h(g,d));e=l-1;break}l==e&&g&&(k+=f)}return k}function ua(a){if(a.end){var c=a.end;a=a.allDay;a=(c=x(c),a||c.getHours()||c.getMinutes()?C(c,1):ja(c))}else a=C(x(a.start),1);return a}function Va(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var e,f,l,w=a.target;w!=this;)e=w,w=w.parentNode;(f=e._fci)!==F&&(e._fci=F,l=c[f],b(l.event,l.element,l),h(a.target).trigger(a));a.stopPropagation()})}function va(a,
c,b){for(var d,e=0;a.length>e;e++)d=h(a[e]),d.width(Math.max(0,c-Ma(d,b)))}function Wa(a,c,b){for(var d,e=0;a.length>e;e++)d=h(a[e]),d.height(Math.max(0,c-sa(d,b)))}function Ma(a,c){var b=(parseFloat(h.css(a[0],"paddingLeft",!0))||0)+(parseFloat(h.css(a[0],"paddingRight",!0))||0),d;d=(parseFloat(h.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(h.css(a[0],"borderRightWidth",!0))||0);b+=d;d=c?(parseFloat(h.css(a[0],"marginLeft",!0))||0)+(parseFloat(h.css(a[0],"marginRight",!0))||0):0;return b+d}function sa(a,
c){var b=(parseFloat(h.css(a[0],"paddingTop",!0))||0)+(parseFloat(h.css(a[0],"paddingBottom",!0))||0),d;d=(parseFloat(h.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(h.css(a[0],"borderBottomWidth",!0))||0);b+=d;d=c?(parseFloat(h.css(a[0],"marginTop",!0))||0)+(parseFloat(h.css(a[0],"marginBottom",!0))||0):0;return b+d}function pb(){}function Xa(a,c){return a-c}function pa(a){return(10>a?"0":"")+a}function Ha(a,c){if(a[c]!==F)return a[c];for(var b,d=c.split(/(?=[A-Z])/),e=d.length-1;0<=e;e--)if(b=
a[d[e].toLowerCase()],b!==F)return b;return a[""]}function fa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function xa(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function za(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Ya(a,c){var b=a.source||
{},d=a.color,e=b.color,f=c("eventColor"),l=a.backgroundColor||d||b.backgroundColor||e||c("eventBackgroundColor")||f,d=a.borderColor||d||b.borderColor||e||c("eventBorderColor")||f,b=a.textColor||b.textColor||c("eventTextColor"),e=[];return l&&e.push("background-color:"+l),d&&e.push("border-color:"+d),b&&e.push("color:"+b),e.join(";")}function ya(a,c,b){if(h.isFunction(a)&&(a=[a]),a){var d,e;for(d=0;a.length>d;d++)e=a[d].apply(c,b)||e;return e}}function oa(){for(var a=0;arguments.length>a;a++)if(arguments[a]!==
F)return arguments[a]}function Na(a,c,b){function d(){var b=e();m&&m.remove();m=h(b).appendTo(a);r=m.find("thead");k=r.find(".fc-day-header");E=m.find("tbody");z=E.find("tr");v=E.find(".fc-day");p=z.find("td:first-child");F=z.eq(0).find(".fc-day > div");W=z.eq(0).find(".fc-day-content > div");za(r.add(r.find("tr")));za(z);z.eq(0).addClass("fc-first");z.filter(":last").addClass("fc-last");v.each(function(a,b){var c=ga(Math.floor(a/G),a%G);R("dayRender",g,c,h(b))});v.click(f).mousedown(ea)}function e(){var a,
b,c=I+"-widget-header",d;d="<thead><tr>";D&&(d+="<th class='fc-week-number "+c+"'>"+fa(M)+"</th>");for(a=0;G>a;a++)b=ga(0,a),d+="<th class='fc-day-header fc-"+Aa[b.getDay()]+" "+c+"'>"+fa(ka(b,K))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(d+"</tr></thead>");var e;d=I+"-widget-content";var q;q="<tbody>";for(b=0;n>b;b++){q+="<tr class='fc-week'>";D&&(e=ga(b,0),q+="<td class='fc-week-number "+d+"'><div>"+fa(ka(e,aa))+"</div></td>");for(c=0;G>c;c++){e=ga(b,c);
var f;f=e;var t=I+"-widget-content",l=g.start.getMonth(),h=ja(new Date),k="",t=["fc-day","fc-"+Aa[f.getDay()],t];f=(f.getMonth()!=l&&t.push("fc-other-month"),+f==+h?t.push("fc-today",I+"-state-highlight"):h>f?t.push("fc-past"):t.push("fc-future"),k+="<td class='"+t.join(" ")+"' data-date='"+ka(f,"yyyy-MM-dd")+"'><div>",L&&(k+="<div class='fc-day-number'>"+f.getDate()+"</div>"),k+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>");q+=f}q+="</tr>"}return a+(q+
"</tbody>")+"</table>"}function f(a){if(!Y("selectable")){var b=Ka(h(this).data("date"));R("dayClick",this,b,!0,a)}}function l(a,b,c){c&&P.build();a=q(a,b);for(b=0;a.length>b;b++)c=a[b],w(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(ea)}function w(b,c,d,e){b=P.rect(b,c,d,e,a);return na(b,a)}var g=this;g.renderBasic=function(b,c,e){n=b;G=c;L=e;I=Y("theme")?"ui":"fc";K=Y("columnFormat");D=Y("weekNumbers");M=Y("weekNumberTitle");aa="iso"!=Y("weekNumberCalculation")?"w":"W";E||(O=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));
d()};g.setHeight=function(a){B=a;var b,c,d;a=B-r.height();"variable"==Y("weekMode")?b=c=Math.floor(a/(1==n?2:6)):(b=Math.floor(a/n),c=a-b*(n-1));p.each(function(a,e){n>a&&(d=h(e),d.find("> div").css("min-height",(a==n-1?c:b)-sa(d)))})};g.setWidth=function(a){y=a;X.clear();t.clear();J=0;D&&(J=r.find("th.fc-week-number").outerWidth());U=Math.floor((y-J)/G);va(k.slice(0,-1),U)};g.renderDayOverlay=l;g.defaultSelectionEnd=function(a){return x(a)};g.renderSelection=function(a,b){l(a,C(x(b),1),!0)};g.clearSelection=
function(){T()};g.reportDayClick=function(a,b,c){var d=qa(a);R("dayClick",v[d.row*G+d.col],a,b,c)};g.dragStart=function(a,b){Q.start(function(a){T();a&&w(a.row,a.col,a.row,a.col)},b)};g.dragStop=function(a,b,c){var d=Q.stop();if(T(),d)d=ga(d),R("drop",a,d,!0,b,c)};g.defaultEventEnd=function(a){return x(a.start)};g.getHoverListener=function(){return Q};g.colLeft=function(a){return X.left(a)};g.colRight=function(a){return X.right(a)};g.colContentLeft=function(a){return t.left(a)};g.colContentRight=
function(a){return t.right(a)};g.getIsCellAllDay=function(){return!0};g.allDayRow=function(a){return z.eq(a)};g.getRowCnt=function(){return n};g.getColCnt=function(){return G};g.getColWidth=function(){return U};g.getDaySegmentContainer=function(){return O};bb.call(g,a,c,b);cb.call(g);db.call(g);wb.call(g);var m,r,k,E,z,v,p,F,W,O,y,B,U,J,n,G,L,P,Q,X,t,I,K,D,M,aa,Y=g.opt,R=g.trigger,na=g.renderOverlay,T=g.clearOverlays,ea=g.daySelectionMousedown,ga=g.cellToDate,qa=g.dateToCell,q=g.rangeToSegments,ka=
c.formatDate;xa(a.addClass("fc-grid"));P=new eb(function(a,b){var c,d,e;k.each(function(a,q){c=h(q);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();z.each(function(b,q){n>b&&(c=h(q),d=c.offset().top,b&&(e[1]=d),e=[d],a[b]=e)});e[1]=d+c.outerHeight()});Q=new fb(P);X=new Ca(function(a){return F.eq(a)});t=new Ca(function(a){return W.eq(a)})}function wb(){var a=this;a.renderEvents=function(c,b){a.renderDayEvents(c,b)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};gb.call(a)}
function hb(a,c,b){function d(){var b,c,d=la+"-widget-header",e;e="<thead><tr>";ab?(b=ra(0,0),c=ba(b,ib),Za?c+=Oa:c=Oa+c,e+="<th class='fc-agenda-axis fc-week-number "+d+"'>"+fa(c)+"</th>"):e+="<th class='fc-agenda-axis "+d+"'>&nbsp;</th>";for(c=0;q>c;c++)b=ra(0,c),e+="<th class='fc-"+Aa[b.getDay()]+" fc-col"+c+" "+d+"'>"+fa(ba(b,$a))+"</th>";b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(e+("<th class='fc-agenda-gutter "+d+"'>&nbsp;</th></tr></thead>"));
var f,t,u,l;c=la+"-widget-header";d=la+"-widget-content";e=ja(new Date);c=""+("<tbody><tr><th class='fc-agenda-axis "+c+"'>&nbsp;</th>");u="";for(t=0;q>t;t++)f=ra(0,t),l=["fc-col"+t,"fc-"+Aa[f.getDay()],d],+f==+e?l.push(la+"-state-highlight","fc-today"):e>f?l.push("fc-past"):l.push("fc-future"),f="<td class='"+l.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",u+=f;d=(c+=u,c+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody>"));
b=b+d+"</table>";ca&&ca.remove();ca=h(b).appendTo(a);W=ca.find("thead");O=W.find("th").slice(1,-1);y=ca.find("tbody");B=y.find("td").slice(0,-1);U=B.find("> div");J=B.find(".fc-day-content > div");n=B.eq(0);G=U.eq(0);za(W.add(W.find("tr")));za(y.add(y.find("tr")))}function e(){function a(){t.scrollTop(d)}var b=Ta(),c=x(b);c.setHours(N("firstHour"));var d=k(b,c)+1;a();setTimeout(a,0)}function f(a){if(!N("selectable")){var b=Math.min(q-1,Math.floor((a.pageX-ca.offset().left-Y)/R)),c=ra(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);
d?(d=parseInt(d[1])*N("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+ma),Da("dayClick",B[b],c,!1,a)):Da("dayClick",B[b],c,!0,a)}}function l(a,b,c){c&&ia.build();a=ha(a,b);for(b=0;a.length>b;b++)c=a[b],w(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(jb)}function w(a,b,c,d){a=ia.rect(a,b,c,d,L);return kb(a,L)}function g(a,b){for(var c=0;q>c;c++){var d=ra(0,c),e=C(x(d),1),t=new Date(Math.max(d,a)),u=new Date(Math.min(e,b));u>t&&(e=ia.rect(0,c,0,c,I),t=k(d,t),d=k(d,u),e.top=t,e.height=
d-t,kb(e,I).click(f).mousedown(v))}}function m(a){return N("allDaySlot")&&!a.row}function r(a){var b=ra(0,a.col);a=a.row;return N("allDaySlot")&&a--,0<=a&&Q(b,ma+a*ea),b}function k(a,b){if(a=x(a,!0),Q(x(a),ma)>b)return 0;if(b>=Q(x(a),Ba))return D.height();var c=N("slotMinutes"),d=60*b.getHours()+b.getMinutes()-ma,e=Math.floor(d/c),q=da[e];return q===F&&(q=da[e]=D.find("tr").eq(e).find("td div")[0].offsetTop),Math.max(0,Math.round(q-1+d%c/c*T))}function E(a,b){var c=N("selectHelper");if(ia.build(),
c){var d=V(a).col;if(0<=d&&q>d){var d=ia.rect(0,d,0,d,I),e=k(a,a),t=k(a,b);t>e&&((d.top=e,d.height=t-e,d.left+=2,d.width-=5,h.isFunction(c))?(c=c(a,b))&&(d.position="absolute",M=h(c).css(d).appendTo(I)):(d.isStart=!0,d.isEnd=!0,M=h(xb({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),M.css("opacity",N("dragOpacity"))),M&&(M.click(f).mousedown(v),I.append(M),va(M,d.width,!0),Wa(M,d.height,!0)))}}else g(a,b)}function z(){Pa();M&&(M.remove(),M=null)}function v(a){if(1==a.which&&
N("selectable")){S(a);var b;A.start(function(a,c){if(z(),a&&a.col==c.col&&!m(a)){var d=r(c),e=r(a);b=[d,Q(x(d),ea),e,Q(x(e),ea)].sort(Xa);E(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){A.stop();b&&(+b[0]==+b[1]&&p(b[0],!1,a),yb(b[0],b[3],!1,a))})}}function p(a,b,c){Da("dayClick",B[V(a).col],a,b,c)}this.renderAgenda=function(b){q=b;la=N("theme")?"ui":"fc";Za=N("isRTL");ma=La(N("minTime"));Ba=La(N("maxTime"));$a=N("columnFormat");ab=N("weekNumbers");Oa=N("weekNumberTitle");ib="iso"!=
N("weekNumberCalculation")?"w":"W";ea=N("snapMinutes")||N("slotMinutes");if(ca)d();else{var c,e,u,l,A=la+"-widget-header",H=la+"-widget-content",k=0==N("slotMinutes")%15;d();L=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);N("allDaySlot")?(P=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(L),b="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+A+" fc-agenda-axis'>"+N("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+
A+" fc-agenda-gutter'>&nbsp;</th></tr></table>",Z=h(b).appendTo(L),X=Z.find("tr"),X.find("td").click(f).mousedown(jb),L.append("<div class='fc-agenda-divider "+A+"'><div class='fc-agenda-divider-inner'/></div>")):P=h([]);t=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(L);I=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(t);K=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(I);b=
"<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";c=Ta();u=Q(x(c),Ba);Q(c,ma);for(e=ka=0;u>c;e++)l=c.getMinutes(),b+="<tr class='fc-slot"+e+" "+(l?"fc-minor":"")+"'><th class='fc-agenda-axis "+A+"'>"+(k&&l?"&nbsp;":ba(c,N("axisFormat")))+"</th><td class='"+H+"'><div style='position:relative'>&nbsp;</div></td></tr>",Q(c,N("slotMinutes")),ka++;D=h(b+"</tbody></table>").appendTo(I);D.find("td").click(f).mousedown(v)}};this.setWidth=function(a){H.clear();u.clear();a=W.find("th:first");
Z&&(a=a.add(Z.find("th:first")));a=a.add(D.find("th:first"));Y=0;va(a.width("").each(function(a,b){Y=Math.max(Y,h(b).outerWidth())}),Y);a=ca.find(".fc-agenda-gutter");Z&&(a=a.add(Z.find("th.fc-agenda-gutter")));var b=t[0].clientWidth;(na=t.width()-b)?(va(a,na),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");R=Math.floor((b-Y)/q);va(O.slice(0,-1),R)};this.setHeight=function(a){a===F&&(a=aa);aa=a;da={};var b=y.position().top,c=t.position().top;a=Math.min(a-b,D.height()+c+
1);G.height(a-sa(n));L.css("top",b);t.height(a-c-1);T=D.find("tr:first").height()+1;ga=N("slotMinutes")/ea;qa=T/ga};this.afterRender=function(){e()};this.defaultEventEnd=function(a){var b=x(a.start);return a.allDay?b:Q(b,N("defaultEventMinutes"))};this.timePosition=k;this.getIsCellAllDay=m;this.allDayRow=function(){return X};this.getCoordinateGrid=function(){return ia};this.getHoverListener=function(){return A};this.colLeft=function(a){return H.left(a)};this.colRight=function(a){return H.right(a)};
this.colContentLeft=function(a){return u.left(a)};this.colContentRight=function(a){return u.right(a)};this.getDaySegmentContainer=function(){return P};this.getSlotSegmentContainer=function(){return K};this.getMinMinute=function(){return ma};this.getMaxMinute=function(){return Ba};this.getSlotContainer=function(){return I};this.getRowCnt=function(){return 1};this.getColCnt=function(){return q};this.getColWidth=function(){return R};this.getSnapHeight=function(){return qa};this.getSnapMinutes=function(){return ea};
this.defaultSelectionEnd=function(a,b){return b?x(a):Q(x(a),N("slotMinutes"))};this.renderDayOverlay=l;this.renderSelection=function(a,b,c){c?N("allDaySlot")&&l(a,C(x(b),1),!0):E(a,b)};this.clearSelection=z;this.reportDayClick=p;this.dragStart=function(a,b){A.start(function(a){if(Pa(),a)if(m(a))w(a.row,a.col,a.row,a.col);else{a=r(a);var b=Q(x(a),N("defaultEventMinutes"));g(a,b)}},b)};this.dragStop=function(a,b,c){var d=A.stop();Pa();d&&Da("drop",a,r(d),m(d),b,c)};bb.call(this,a,c,b);cb.call(this);
db.call(this);zb.call(this);var ca,W,O,y,B,U,J,n,G,L,P,Z,X,t,I,K,D,M,aa,Y,R,na,T,ea,ga,qa,q,ka,ia,A,H,u,la,Za,ma,Ba,$a,ab,Oa,ib,N=this.opt,Da=this.trigger,kb=this.renderOverlay,Pa=this.clearOverlays,yb=this.reportSelection,S=this.unselect,jb=this.daySelectionMousedown,xb=this.slotSegHtml,ra=this.cellToDate,V=this.dateToCell,ha=this.rangeToSegments,ba=c.formatDate,da={};xa(a.addClass("fc-agenda"));ia=new eb(function(a,b){var c,d,e;O.each(function(a,q){c=h(q);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=
e});e[1]=d+c.outerWidth();N("allDaySlot")&&(c=X,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);for(var q=I.offset().top,f=t.offset().top,u=f+t.outerHeight(),l=0;ka*ga>l;l++)a.push([Math.max(f,Math.min(u,q+qa*l)),Math.max(f,Math.min(u,q+qa*(l+1)))])});A=new fb(ia);H=new Ca(function(a){return U.eq(a)});u=new Ca(function(a){return J.eq(a)})}function zb(){function a(a){return a.end?x(a.end):Q(x(a.start),l("defaultEventMinutes"))}function c(a,b){var c="<",d=a.url,e=Ya(a,l),f=["fc-event","fc-event-vert"];
return g(a)&&f.push("fc-event-draggable"),b.isStart&&f.push("fc-event-start"),b.isEnd&&f.push("fc-event-end"),f=f.concat(a.className),a.source&&(f=f.concat(a.source.className||[])),c+=d?"a href='"+fa(a.url)+"'":"div",c+=" class='"+f.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><div class='fc-event-time'>"+fa(T(a.start,a.end,l("timeFormat")))+"</div><div class='fc-event-title'>"+fa(a.title||"")+"</div></div><div class='fc-event-bg'></div>",
b.isEnd&&m(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),c+("</"+(d?"a":"div")+">")}function b(a,b,c){var q=b.find("div.fc-event-time");g(a)&&d(a,b,q);c.isEnd&&m(a)&&e(a,b,q);k(a,b)}function d(a,b,c){function d(){aa();if(A)if(u)c.hide(),b.draggable("option","grid",null),M(C(x(a.start),p),C(ua(a),p));else{var e=m,q,f=Q(x(a.start),e);a.end&&(q=Q(x(a.end),e));c.text(T(f,q,l("timeFormat")));c.css("display","");b.draggable("option","grid",[B,E])}}var e,h,A,H,u,k,g,r,p,m,v,D=f.getCoordinateGrid(),
z=n(),B=G(),E=L(),F=P();b.draggable({scroll:!1,grid:[B,E],axis:1==z?"y":!1,opacity:l("dragOpacity"),revertDuration:l("dragRevertDuration"),start:function(c,d){w("eventDragStart",b,a,c,d);I(a,b);D.build();e=b.position();h=D.cell(c.pageX,c.pageY);A=H=!0;u=k=y(h);m=v=p=g=r=0},drag:function(a,c){var f=D.cell(a.pageX,a.pageY);if(A=!!f){if(u=y(f),g=Math.round((c.position.left-e.left)/B),g!=r){var f=J(0,h.col),t=h.col+g,t=Math.max(0,t),t=Math.min(z-1,t),t=J(0,t);p=ta(t,f)}u||(m=Math.round((c.position.top-
e.top)/E)*F)}(A!=H||u!=k||g!=r||m!=v)&&(d(),H=A,k=u,r=g,v=m);b.draggable("option","revert",!A)},stop:function(c,f){aa();w("eventDragStop",b,a,c,f);A&&(u||p||m)?K(this,a,p,u?0:m,u,c,f):(A=!0,u=!1,g=0,p=0,m=0,d(),b.css("filter",""),b.css(e),t(a,b))}})}function e(a,b,c){var d,e,f=L(),A=P();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;I(a,b);w("eventResizeStart",this,a,c,f)},resize:function(t,u){d=Math.round((Math.max(f,b.height())-u.originalSize.height)/f);d!=e&&(c.text(T(a.start,
d||a.end?Q(r(a),A*d):null,l("timeFormat"))),e=d)},stop:function(c,e){w("eventResizeStop",this,a,c,e);d?D(this,a,0,A*d,c,e):t(a,b)}})}var f=this;f.renderEvents=function(d,e){var f,q=d.length,t=[],k=[];for(f=0;q>f;f++)d[f].allDay?t.push(d[f]):k.push(d[f]);l("allDaySlot")&&(Y(t,e),E());var A,H,u,g,t=n(),I=W(),p=ca(),r=h.map(k,a);f=[];for(q=0;t>q;q++){A=J(0,q);Q(A,I);H=k;u=r;g=A;A=Q(x(A),p-I);for(var m=void 0,K=void 0,D=void 0,y=void 0,z=void 0,M=void 0,C=void 0,L=void 0,aa=[],P=H.length,m=0;P>m;m++)K=
H[m],D=K.start,y=u[m],y>g&&A>D&&(g>D?(z=x(g),C=!1):(z=D,C=!0),y>A?(M=x(A),L=!1):(M=y,L=!0),aa.push({event:K,start:z,end:M,isStart:C,isEnd:L}));u=g=aa.sort(lb);A=g=H=H=g=void 0;m=[];for(H=0;u.length>H;H++){g=u[H];for(A=0;m.length>A&&mb(g,m[A]).length;A++);(m[A]||(m[A]=[])).push(g)}H=m;u=H[0];D=K=m=A=g=void 0;for(g=0;H.length>g;g++)for(A=H[g],m=0;A.length>m;m++)for(K=A[m],K.forwardSegs=[],D=g+1;H.length>D;D++)mb(K,H[D],K.forwardSegs);if(u){for(g=0;u.length>g;g++)nb(u[g]);for(g=0;u.length>g;g++)Qa(u[g],
0,0)}A=g=u=void 0;m=[];for(u=0;H.length>u;u++)for(g=H[u],A=0;g.length>A;A++)m.push(g[A]);g=m;for(H=0;g.length>H;H++)u=g[H],u.col=q,f.push(u)}for(var G,T,R,V,S,Z,t=f.length,m="",I=v(),K=l("isRTL"),k=0;t>k;k++)q=f[k],G=q.event,p=O(q.start,q.start),r=O(q.start,q.end),H=B(q.col),u=U(q.col),g=u-H,u-=.025*g,g=u-H,A=g*(q.forwardCoord-q.backwardCoord),l("slotEventOverlap")&&(A=Math.max(2*(A-10),A)),K?(R=u-q.backwardCoord*g,T=R-A):(T=H+q.backwardCoord*g,R=T+A),T=Math.max(T,H),R=Math.min(R,u),A=R-T,q.top=p,
q.left=T,q.outerWidth=A,q.outerHeight=r-p,m+=c(G,q);I[0].innerHTML=m;T=I.children();for(k=0;t>k;k++)q=f[k],G=q.event,V=h(T[k]),R=w("eventRender",G,G,V),!1===R?V.remove():(R&&!0!==R&&(V.remove(),V=h(R).css({position:"absolute",top:q.top,left:q.left}).appendTo(I)),q.element=V,G._id===e?b(G,V,q):V[0]._fci=k,X(G,V));Va(I,f,b);for(k=0;t>k;k++)q=f[k],(V=q.element)&&(q.vsides=sa(V,!0),q.hsides=Ma(V,!0),S=V.find(".fc-event-title"),S.length&&(q.contentTop=S[0].offsetTop));for(k=0;t>k;k++)q=f[k],(V=q.element)&&
(V[0].style.width=Math.max(0,q.outerWidth-q.hsides)+"px",Z=Math.max(0,q.outerHeight-q.vsides),V[0].style.height=Z+"px",G=q.event,q.contentTop!==F&&10>Z-q.contentTop&&(V.find("div.fc-event-time").text(na(G.start,l("timeFormat"))+" - "+G.title),V.find("div.fc-event-title").remove()),w("eventAfterRender",G,G,V))};f.clearEvents=function(){z().empty();v().empty()};f.slotSegHtml=c;gb.call(f);var l=f.opt,w=f.trigger,g=f.isEventDraggable,m=f.isEventResizable,r=f.eventEnd,k=f.eventElementHandlers,E=f.setHeight,
z=f.getDaySegmentContainer,v=f.getSlotSegmentContainer,p=f.getHoverListener,ca=f.getMaxMinute,W=f.getMinMinute,O=f.timePosition,y=f.getIsCellAllDay,B=f.colContentLeft,U=f.colContentRight,J=f.cellToDate,n=f.getColCnt,G=f.getColWidth,L=f.getSnapHeight,P=f.getSnapMinutes,S=f.getSlotContainer,X=f.reportEventElement,t=f.showEvents,I=f.hideEvents,K=f.eventDrop,D=f.eventResize,M=f.renderDayOverlay,aa=f.clearOverlays,Y=f.renderDayEvents,R=f.calendar,na=R.formatDate,T=R.formatDates;f.draggableDayEvent=function(a,
b,c){function d(){u||(b.width(e).height("").draggable("option","grid",null),u=!0)}var e,f,g,k=c.isStart,u=!0,h=p(),m=G(),r=L(),n=P(),D=W();b.draggable({opacity:l("dragOpacity","month"),revertDuration:l("dragRevertDuration"),start:function(c,t){w("eventDragStart",b,a,c,t);I(a,b);e=b.width();h.start(function(c,e){if(aa(),c){f=!1;var t=J(0,e.col),h=J(0,c.col);g=ta(h,t);c.row?k?u&&(b.width(m-10),Wa(b,r*Math.round((a.end?(a.end-a.start)/Ab:l("defaultEventMinutes"))/n)),b.draggable("option","grid",[m,1]),
u=!1):f=!0:(M(C(x(a.start),g),C(ua(a),g)),d());f=f||u&&!g}else d(),f=!0;b.draggable("option","revert",f)},c,"drag")},stop:function(c,e){if(h.stop(),aa(),w("eventDragStop",b,a,c,e),f)d(),b.css("filter",""),t(a,b);else{var k=0;u||(k=Math.round((b.offset().top-S().offset().top)/r)*n+D-(60*a.start.getHours()+a.start.getMinutes()));K(this,a,g,k,u,c,e)}}})}}function nb(a){var c,b,d=a.forwardSegs,e=0;if(a.forwardPressure===F){for(c=0;d.length>c;c++)b=d[c],nb(b),e=Math.max(e,1+b.forwardPressure);a.forwardPressure=
e}}function Qa(a,c,b){var d=a.forwardSegs;if(a.forwardCoord===F)for(d.length?(d.sort(Bb),Qa(d[0],c+1,b),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-b)/(c+1),c=0;d.length>c;c++)Qa(d[c],0,a.forwardCoord)}function mb(a,c,b){b=b||[];for(var d=0;c.length>d;d++){var e=c[d];a.end>e.start&&a.start<e.end&&b.push(c[d])}return b}function Bb(a,c){return c.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(c.backwardCoord||0)||lb(a,c)}function lb(a,
c){return a.start-c.start||c.end-c.start-(a.end-a.start)||(a.event.title||"").localeCompare(c.event.title)}function bb(a,c,b){function d(a,c){var d=J[a];return h.isPlainObject(d)?Ha(d,c||b):d}function e(a,b){return c.trigger.apply(c,[a,b||p].concat(Array.prototype.slice.call(arguments,2),[p]))}function f(a){return a.end?x(a.end):S(a)}function l(a,b,c){var d=B[a._id],e=d.length;for(a=0;e>a;a++)b&&d[a][0]==b[0]||d[a][c]()}function w(a,b,c,d){c=c||0;for(var e,f=a.length,g=0;f>g;g++)e=a[g],d!==F&&(e.allDay=
d),Q(C(e.start,b,!0),c),e.end&&(e.end=Q(C(e.end,b,!0),c)),W(e,J)}function g(a,b,c){c=c||0;for(var d,e=a.length,g=0;e>g;g++)d=a[g],d.end=Q(C(f(d),b,!0),c),W(d,J)}function m(a,b){var c=p.getColCnt(),d=X?-1:1,e=X?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*c+(b*d+e)}function r(a){var b=p.visStart.getDay();return a+=P[b],7*Math.floor(a/n)+Z[(a%n+n)%n]-b}function k(a){var b=x(p.visStart);return C(b,a),b}function E(a){return ta(a,p.visStart)}function z(a){var b=p.visStart.getDay();return a+=b,
Math.floor(a/7)*n+P[(a%7+7)%7]-P[b]}function v(a){var b=p.getColCnt();return{row:Math.floor(a/b),col:(a%b+b)%b*(X?-1:1)+(X?b-1:0)}}var p=this;p.element=a;p.calendar=c;p.name=b;p.opt=d;p.trigger=e;p.isEventDraggable=function(a){var b=a.source||{};return oa(a.startEditable,b.startEditable,d("eventStartEditable"),a.editable,b.editable,d("editable"))&&!d("disableDragging")};p.isEventResizable=function(a){var b=a.source||{};return oa(a.durationEditable,b.durationEditable,d("eventDurationEditable"),a.editable,
b.editable,d("editable"))&&!d("disableResizing")};p.setEventData=function(a){y={};var b,c,d=a.length;for(b=0;d>b;b++)c=a[b],y[c._id]?y[c._id].push(c):y[c._id]=[c]};p.clearEventData=function(){y={};B={};U=[]};p.eventEnd=f;p.reportEventElement=function(a,b){U.push({event:a,element:b});B[a._id]?B[a._id].push(b):B[a._id]=[b]};p.triggerEventDestroy=function(){h.each(U,function(a,b){p.trigger("eventDestroy",b.event,b.event,b.element)})};p.eventElementHandlers=function(a,b){b.click(function(c){return b.hasClass("ui-draggable-dragging")||
b.hasClass("ui-resizable-resizing")?F:e("eventClick",this,a,c)}).hover(function(b){e("eventMouseover",this,a,b)},function(b){e("eventMouseout",this,a,b)})};p.showEvents=function(a,b){l(a,b,"show")};p.hideEvents=function(a,b){l(a,b,"hide")};p.eventDrop=function(a,b,c,d,f,g,k){var l=b.allDay,h=b._id;w(y[h],c,d,f);e("eventDrop",a,b,c,d,f,function(){w(y[h],-c,-d,l);O(h)},g,k);O(h)};p.eventResize=function(a,b,c,d,f,k){var l=b._id;g(y[l],c,d);e("eventResize",a,b,c,d,function(){g(y[l],-c,-d);O(l)},f,k);
O(l)};var S=p.defaultEventEnd,W=c.normalizeEvent,O=c.reportEventChange,y={},B={},U=[],J=c.options;p.isHiddenDay=function(a){return"object"==typeof a&&(a=a.getDay()),L[a]};p.skipHiddenDays=function(a,b,c){for(b=b||1;L[(a.getDay()+(c?b:0)+7)%7];)C(a,b)};p.getCellsPerWeek=function(){return n};p.dateToCell=function(a){a=E(a);a=z(a);return v(a)};p.dateToDayOffset=E;p.dayOffsetToCellOffset=z;p.cellOffsetToCell=v;p.cellToDate=function(){var a=m.apply(null,arguments),a=r(a);return k(a)};p.cellToCellOffset=
m;p.cellOffsetToDayOffset=r;p.dayOffsetToDate=k;p.rangeToSegments=function(a,b){for(var c=p.getRowCnt(),d=p.getColCnt(),e=[],f=E(a),g=E(b),k=z(f),l=z(g)-1,h=0;c>h;h++){var m=h*d,n=m+d-1,m=Math.max(k,m),n=Math.min(l,n);if(n>=m){var w=v(m),q=v(n),w=[w.col,q.col].sort(),m=r(m)==f,n=r(n)+1==g;e.push({row:h,leftCol:w[0],rightCol:w[1],isStart:m,isEnd:n})}}return e};var n,G=d("hiddenDays")||[],L=[],P=[],Z=[],X=d("isRTL");(function(){!1===d("weekends")&&G.push(0,6);for(var a=0,b=0;7>a;a++)P[a]=b,L[a]=-1!=
h.inArray(a,G),L[a]||(Z[b]=a,b++);if(n=b,!n)throw"invalid hiddenDays";})()}function gb(){function a(a,b,d){a=c([a],!0,!1);var e=[];return ha(a,function(a,c){a.row===b&&c.css("top",d);e.push(c[0])}),e}function c(a,c,g){var k,m,u=I(),n=c?h("<div/>"):u;a=b(a);return d(a),k=e(a),n[0].innerHTML=k,m=n.children(),c&&u.append(m),f(a,m),ha(a,function(a,b){a.hsides=Ma(b,!0)}),ha(a,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))}),ha(a,function(a,b){a.outerHeight=b.outerHeight(!0)}),l(a,g),a}function b(a){for(var b=
[],c=0;a.length>c;c++){for(var d=a[c],e=d.start,f=ua(d),e=R(e,f),f=0;e.length>f;f++)e[f].event=d;b.push.apply(b,e)}return b}function d(a){for(var b=E("isRTL"),c=0;a.length>c;c++){var d=a[c],e=(b?d.isStart:d.isEnd)?t:Z,f=((b?d.isEnd:d.isStart)?X:P)(d.leftCol),e=e(d.rightCol);d.left=f;d.outerWidth=e-f}}function e(a){for(var b="",c=0;a.length>c;c++){var d;d=a[c];var e="",f=E("isRTL"),g=d.event,k=g.url,l=["fc-event","fc-event-hori"];v(g)&&l.push("fc-event-draggable");d.isStart&&l.push("fc-event-start");
d.isEnd&&l.push("fc-event-end");l=l.concat(g.className);g.source&&(l=l.concat(g.source.className||[]));var h=Ya(g,E);d=(e+=k?"<a href='"+fa(k)+"'":"<div",e+=" class='"+l.join(" ")+"' style='position:absolute;left:"+d.left+"px;"+h+"'><div class='fc-event-inner'>",!g.allDay&&d.isStart&&(e+="<span class='fc-event-time'>"+fa(K(g.start,g.end,E("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+fa(g.title||"")+"</span></div>",d.isEnd&&p(g)&&(e+="<div class='ui-resizable-handle ui-resizable-"+
(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+("</"+(k?"a":"div")+">"));b+=d}return b}function f(a,b){for(var c=0;a.length>c;c++){var d=a[c],e=d.event,f=b.eq(c),e=z("eventRender",e,e,f);!1===e?f.remove():(e&&!0!==e&&(e=h(e).css({position:"absolute",left:d.left}),f.replaceWith(e),f=e),d.element=f)}}function l(a,b){var c=w(a),d=g(),e=[];if(b)for(var f=0;d.length>f;f++)d[f].height(c[f]);for(f=0;d.length>f;f++)e.push(d[f].position().top);ha(a,function(a,b){b.css("top",e[a.row]+a.top)})}function w(a){var b=
n(),c=G(),d=[],e,f,g,l=n(),k=[];for(e=0;a.length>e;e++)f=a[e],g=f.row,f.element&&(k[g]?k[g].push(f):k[g]=[f]);for(g=0;l>g;g++){a=g;var h=k[g]||[];e=[];h.sort(Cb);f=[];for(var m=0;h.length>m;m++){for(var r=h[m],p=0;f.length>p&&Db(r,f[p]);p++);f[p]?f[p].push(r):f[p]=[r]}for(h=0;f.length>h;h++)e.push.apply(e,f[h]);k[a]=e}for(g=0;b>g;g++){l=k[g];a=[];for(h=0;c>h;h++)a.push(0);for(e=0;l.length>e;e++)for(h=f=l[e],m=a.slice(f.leftCol,f.rightCol+1),m=Math.max.apply(Math,m),h.top=m,h=f.leftCol;f.rightCol>=
h;h++)a[h]=f.top+f.outerHeight;d.push(Math.max.apply(Math,a))}return d}function g(){var a,b=n(),c=[];for(a=0;b>a;a++)c[a]=L(a).find("div.fc-day-content > div");return c}function m(a,b){var c=I();ha(a,function(a,c,d){var e=a.event;e._id===b?r(e,c,a):c[0]._fci=d});Va(c,a,r)}function r(a,b,c){v(a)&&k.draggableDayEvent(a,b,c);c.isEnd&&p(a)&&k.resizableDayEvent(a,b,c);O(a,b)}var k=this;k.renderDayEvents=function(a,b){var d=c(a,!1,!0);ha(d,function(a,b){Q(a.event,b)});m(d,b);ha(d,function(a,b){z("eventAfterRender",
a.event,a.event,b)})};k.draggableDayEvent=function(a,b){var c,d=Y();b.draggable({delay:50,opacity:E("dragOpacity"),revertDuration:E("dragRevertDuration"),start:function(e,f){z("eventDragStart",b,a,e,f);B(a,b);d.start(function(d,e,f,g){(b.draggable("option","revert",!d||!f&&!g),M(),d)?(e=ba(e),d=ba(d),c=ta(d,e),D(C(x(a.start),c),C(ua(a),c))):c=0},e,"drag")},stop:function(e,f){d.stop();M();z("eventDragStop",b,a,e,f);c?S(this,a,c,0,a.allDay,e,f):(b.css("filter",""),y(a,b))}})};k.resizableDayEvent=function(b,
c,d){var e=E("isRTL")?"w":"e",f=c.find(".ui-resizable-"+e),g=!1;xa(c);c.mousedown(function(a){a.preventDefault()}).click(function(a){g&&(a.preventDefault(),a.stopImmediatePropagation())});f.mousedown(function(f){function k(a){z("eventResizeStop",this,b,a);h("body").css("cursor","");l.stop();M();m&&J(this,b,m,0,a);setTimeout(function(){g=!1},0)}if(1==f.which){g=!0;var l=Y();n();G();var m,p,r=c.css("top"),w=h.extend({},b),t=da(ga(b.start));aa();h("body").css("cursor",e+"-resize").one("mouseup",k);z("eventResizeStart",
this,b,f);l.start(function(c,f){if(c){var g=T(f),l=T(c);(l=Math.max(l,t),m=ea(l)-ea(g))?(w.end=C(F(b),m,!0),g=p,p=a(w,d.row,r),p=h(p),p.find("*").css("cursor",e+"-resize"),g&&g.remove(),B(b)):p&&(y(b),p.remove(),p=null);M();D(b.start,C(ua(b),m))}},f)}})};var E=k.opt,z=k.trigger,v=k.isEventDraggable,p=k.isEventResizable,F=k.eventEnd,Q=k.reportEventElement,O=k.eventElementHandlers,y=k.showEvents,B=k.hideEvents,S=k.eventDrop,J=k.eventResize,n=k.getRowCnt,G=k.getColCnt;k.getColWidth;var L=k.allDayRow,
P=k.colLeft,Z=k.colRight,X=k.colContentLeft,t=k.colContentRight;k.dateToCell;var I=k.getDaySegmentContainer,K=k.calendar.formatDates,D=k.renderDayOverlay,M=k.clearOverlays,aa=k.clearSelection,Y=k.getHoverListener,R=k.rangeToSegments,ba=k.cellToDate,T=k.cellToCellOffset,ea=k.cellOffsetToDayOffset,ga=k.dateToDayOffset,da=k.dayOffsetToCellOffset}function Db(a,c){for(var b=0;c.length>b;b++){var d=c[b];if(d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0}return!1}function ha(a,c){for(var b=0;a.length>
b;b++){var d=a[b],e=d.element;e&&c(d,e,b)}}function Cb(a,c){return c.rightCol-c.leftCol-(a.rightCol-a.leftCol)||c.event.allDay-a.event.allDay||a.event.start-c.event.start||(a.event.title||"").localeCompare(c.event.title)}function db(){function a(a){g&&(g=!1,w(),e("unselect",null,a))}function c(a,b,c,d){g=!0;e("select",null,a,b,c,d)}var b=this;b.select=function(b,d,e){a();d||(d=f(b,e));l(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=function(e){var f=b.cellToDate,g=b.getIsCellAllDay,
x=b.getHoverListener(),z=b.reportDayClick;if(1==e.which&&d("selectable")){a(e);var v;x.start(function(a,b){w();a&&g(a)?(v=[f(b),f(a)].sort(Xa),l(v[0],v[1],!0)):v=null},e);h(document).one("mouseup",function(a){x.stop();v&&(+v[0]==+v[1]&&z(v[0],!0,a),c(v[0],v[1],!0,a))})}};var d=b.opt,e=b.trigger,f=b.defaultSelectionEnd,l=b.renderSelection,w=b.clearSelection,g=!1;d("selectable")&&d("unselectAuto")&&h(document).mousedown(function(b){var c=d("unselectCancel");c&&h(b.target).parents(c).length||a(b)})}
function cb(){this.renderOverlay=function(b,d){var e=c.shift();return e||(e=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),e[0].parentNode!=d[0]&&e.appendTo(d),a.push(e.css(b).show()),e};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function eb(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,e){var f,l=c.length,h=b.length,g=-1,m=-1;for(f=0;l>f;f++)if(e>=c[f][0]&&c[f][1]>e){g=f;break}for(f=0;h>f;f++)if(a>=
b[f][0]&&b[f][1]>a){m=f;break}return 0<=g&&0<=m?{row:g,col:m}:null};this.rect=function(a,e,f,l,h){h=h.offset();return{top:c[a][0]-h.top,left:b[e][0]-h.left,width:b[l][1]-b[e][0],height:c[f][1]-c[a][0]}}}function fb(a){function c(b){b.pageX===F&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);(!b!=!f||b&&(b.row!=f.row||b.col!=f.col))&&(b?(e||(e=b),d(b,e,b.row-e.row,b.col-e.col)):d(b,e),f=b)}var b,d,e,f;this.start=function(l,w,g){d=l;e=f=null;a.build();c(w);b=
g||"mousemove";h(document).bind(b,c)};this.stop=function(){return h(document).unbind(b,c),f}}function Ca(a){var c=this,b={},d={},e={};c.left=function(c){return d[c]=d[c]===F?(b[c]=b[c]||a(c)).position().left:d[c]};c.right=function(d){return e[d]=e[d]===F?c.left(d)+(b[d]=b[d]||a(d)).width():e[d]};c.clear=function(){b={};d={};e={}}}var wa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",
allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Eb={header:{left:"next,prev today",center:"",right:"title"},
buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},S=h.fullCalendar={version:"1.6.4"},ba=S.views={};h.fn.fullCalendar=function(a){if("string"==typeof a){var c,b=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=h.data(this,"fullCalendar");d&&
h.isFunction(d[a])&&(d=d[a].apply(d,b),c===F&&(c=d),"destroy"==a&&h.removeData(this,"fullCalendar"))}),c!==F?c:this}a=a||{};var d=a.eventSources||[];return delete a.eventSources,a.events&&(d.push(a.events),delete a.events),a=h.extend(!0,{},wa,a.isRTL||a.isRTL===F&&wa.isRTL?Eb:{},a),this.each(function(b,c){var l=h(c),w=new ob(l,a,d);l.data("fullCalendar",w);w.render()}),this};S.sourceNormalizers=[];S.sourceFetchers=[];var sb={dataType:"json",cache:!1},tb=1;S.addDays=C;S.cloneDate=x;S.parseDate=Ia;
S.parseISO8601=Ka;S.parseTime=La;S.formatDate=da;S.formatDates=Ga;var Aa="sun mon tue wed thu fri sat".split(" "),vb=864E5,ub=36E5,Ab=6E4,Ua={s:function(a){return a.getSeconds()},ss:function(a){return pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return pa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return pa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return pa(a.getDate())},
ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return pa(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>
a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return da(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c;a=new Date(a.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),c=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((c-a)/864E5)/7)+1}};S.dateFormatters=Ua;S.applyAll=ya;ba.month=function(a,c){var b=this;
b.render=function(a,c){c&&(Fa(a,c),a.setDate(1));var r=d("firstDay"),k=x(a,!0);k.setDate(1);var E=Fa(x(k),1),z=x(k);C(z,-((z.getDay()-r+7)%7));f(z);var v=x(E);C(v,(7-v.getDay()+r)%7);f(v,-1,!0);var r=h(),p=Math.round(ta(v,z)/7);"fixed"==d("weekMode")&&(C(v,7*(6-p)),p=6);b.title=w(k,d("titleFormat"));b.start=k;b.end=E;b.visStart=z;b.visEnd=v;e(p,r,!0)};Na.call(b,a,c,"month");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=b.getCellsPerWeek,w=c.formatDate};ba.basicWeek=function(a,c){var b=this;b.render=
function(a,c){c&&C(a,7*c);var r=C(x(a),-((a.getDay()-d("firstDay")+7)%7)),k=C(x(r),7),E=x(r);f(E);var z=x(k);f(z,-1,!0);var v=h();b.start=r;b.end=k;b.visStart=E;b.visEnd=z;b.title=w(E,C(x(z),-1),d("titleFormat"));e(1,v,!1)};Na.call(b,a,c,"basicWeek");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=b.getCellsPerWeek,w=c.formatDates};ba.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&C(a,c);f(a,0>c?-1:1);var m=x(a,!0),r=C(x(m),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=m;b.end=
b.visEnd=r;e(1,1,!1)};Na.call(b,a,c,"basicDay");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=c.formatDate};Ra({weekMode:"fixed"});ba.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&C(a,7*c);var r=C(x(a),-((a.getDay()-d("firstDay")+7)%7)),k=C(x(r),7),E=x(r);f(E);var z=x(k);f(z,-1,!0);var v=h();b.title=w(E,C(x(z),-1),d("titleFormat"));b.start=r;b.end=k;b.visStart=E;b.visEnd=z;e(v)};hb.call(b,a,c,"agendaWeek");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,h=b.getCellsPerWeek,w=c.formatDates};
ba.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&C(a,c);f(a,0>c?-1:1);var m=x(a,!0),r=C(x(m),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=m;b.end=b.visEnd=r;e(1)};hb.call(b,a,c,"agendaDay");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,h=c.formatDate};Ra({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);