Project.modules.pushnotify={init:function(){this.initEvents();this.validate()},validate:function(){$("#frmpushnotifyadd").validate({rules:{vSendTo:{required:!0}},messages:{vSendTo:{required:js_lang_label.GENERIC_PLEASE_SELECT_USERS}},errorPlacement:function(b,a){"vSendTo"==a.attr("name")&&b.appendTo("#vSendToErr")}})},initEvents:function(){$("#vSendTo").on("change",function(){var b=$("#vSendTo").val();$.post(admin_url+$pushnotify_module_fields,{sent_id:b},function(a){$("#div_module_other").html(a);
$("#div_module_other").show();initializejQueryChosenEvents();$(".elastic").elastic();initializeTooltipsEvents()});$.post(admin_url+$pushnotify_select_fields,{device_id:b},function(a){$('select[id^="push_notify_value_"]').each(function(b){$(this).html(a).trigger("chosen:updated");changeParameters($(this).get(0));if(0==b){var c=[];$(this).find("option").each(function(){"Other"!=$(this).val()&&c.push({val:$(this).val()+"#"})});setMessageSuggestions(c)}})})});$(".elastic").elastic()},getValidatePushNotify:function(){var b=
{beforeSubmit:showAdminAjaxRequest,success:function(a,b,c,d){a=$.parseJSON(a);responseAjaxDataSubmission(a);if("0"==a.success)return!1}};$("#frmpushnotifyadd").ajaxSubmit(b);return!1},getVariableDescriptionTable:function(){var b=admin_url+$push_notify_variables,a=$("#vSendTo").val();$.post(b,{device_id:a,row_id:inc_no,dis_no:dis_no},function(a){$("#mails_fields_list").append(a);initializeTooltipsEvents();initializejQueryChosenEvents();inc_no++;dis_no++})},deletePushnotifyVariableRow:function(b){jqueryUIdialogBox("<div></div>",
js_lang_label.GENERIC_ARE_YOU_SURE_TO_DELETE_THIS_VARIABLE,{title:js_lang_label.GENERIC_DELETE_VARIABLE,buttons:[{text:js_lang_label.GENERIC_OK,bt_type:"ok",click:function(){$("#tr_child_row_"+b).remove();var a=1;dis_no--;$(".row-num-child").each(function(){$(this).html(a);a++});$(this).remove()}},{text:js_lang_label.GENERIC_CANCEL,bt_type:"cancel",click:function(){$(this).remove()}}]})}};Project.modules.pushnotify.init();
function changeParameters(b){var a=b.id;"Other"==b.value?$("#"+a+"_Other").show():$("#"+a+"_Other").hide()}function setMessageSuggestions(b){$("#vMessage").data("plugin_sew")?$("#vMessage").data("plugin_sew").options.values=b:$("#vMessage").sew({values:b,elementFactory:function(a,b){var c=$("<div><span />&nbsp;<small /></div>").find("span").text("#"+b.val).end().find("small").end();a.append(c)}})};