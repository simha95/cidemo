(function(c){c.fn.inputlimiter=function(d){var a=c.extend({},c.fn.inputlimiter.defaults,d);c(this);a.boxAttach&&!c("#"+a.boxId).length&&(c("<div/>").appendTo("body").attr({id:a.boxId,"class":a.boxClass}).css({position:"absolute"}).hide(),c.fn.bgiframe&&c("#"+a.boxId).bgiframe());var e=function(b){b=c(this);var d=f(b.val());!a.allowExceed&&d>a.limit&&b.val(g(b.val()));a.boxAttach&&c("#"+a.boxId).css({width:b.outerWidth()-(c("#"+a.boxId).outerWidth()-c("#"+a.boxId).width())+"px",left:b.offset().left+
"px",top:b.offset().top+b.outerHeight()-1+"px","z-index":2E3});b=a.remTextFilter(a,0<a.limit-d?a.limit-d:0);d=a.limitTextFilter(a);if(a.limitTextShow){c("#"+a.boxId).html(b+" "+d);var e=c("<span/>").appendTo("body").attr({id:"19cc9195583bfae1fad88e19d443be7a","class":a.boxClass}).html(b+" "+d).innerWidth();c("#19cc9195583bfae1fad88e19d443be7a").remove();e>c("#"+a.boxId).innerWidth()&&c("#"+a.boxId).html(b+"<br />"+d);c("#"+a.boxId).show()}else c("#"+a.boxId).html(b).show()},h=function(b){var d=f(c(this).val());
if(!a.allowExceed&&d>a.limit&&!(b.ctrlKey||b.altKey||b.metaKey)&&32<=b.which&&122>=b.which&&this.selectionStart===this.selectionEnd)return!1},k=function(){var b=c(this);count=f(b.val());!a.allowExceed&&count>a.limit&&b.val(g(b.val()));a.boxAttach?c("#"+a.boxId).fadeOut("fast"):a.remTextHideOnBlur&&(b=a.limitText,b=b.replace(/\%n/g,a.limit),b=b.replace(/\%s/g,1===a.limit?"":"s"),c("#"+a.boxId).html(b))},f=function(b){return"words"===a.limitBy.toLowerCase()?0<b.length?c.trim(b).replace(/\ +(?= )/g,
"").split(" ").length:0:b.length},g=function(b){return"words"===a.limitBy.toLowerCase()?c.trim(b).replace(/\ +(?= )/g,"").split(" ").splice(0,a.limit).join(" ")+" ":b.substring(0,a.limit)};c(this).each(function(b){b=c(this);(!d||!d.limit)&&a.useMaxlength&&0<parseInt(b.attr("maxlength"))&&parseInt(b.attr("maxlength"))!=a.limit?b.inputlimiter(c.extend({},a,{limit:parseInt(b.attr("maxlength"))})):(!a.allowExceed&&a.useMaxlength&&"characters"===a.limitBy.toLowerCase()&&b.attr("maxlength",a.limit),b.unbind(".inputlimiter"),
b.bind("keyup.inputlimiter",e),b.bind("keypress.inputlimiter",h),b.bind("blur.inputlimiter",k))})};c.fn.inputlimiter.remtextfilter=function(c,a){var e=c.remText;0===a&&null!==c.remFullText&&(e=c.remFullText);e=e.replace(/\%n/g,a);return e=e.replace(/\%s/g,c.zeroPlural?1===a?"":"s":1>=a?"":"s")};c.fn.inputlimiter.limittextfilter=function(c){var a=c.limitText,a=a.replace(/\%n/g,c.limit);return a=a.replace(/\%s/g,1>=c.limit?"":"s")};c.fn.inputlimiter.defaults={limit:255,boxAttach:!0,boxId:"limiterBox",
boxClass:"limiterBox",remText:"%n character%s remaining.",remTextFilter:c.fn.inputlimiter.remtextfilter,remTextHideOnBlur:!0,remFullText:null,limitTextShow:!0,limitText:"Field limited to %n character%s.",limitTextFilter:c.fn.inputlimiter.limittextfilter,zeroPlural:!0,allowExceed:!1,useMaxlength:!0,limitBy:"characters"}})(jQuery);