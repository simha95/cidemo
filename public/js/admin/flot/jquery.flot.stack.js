(function(u){u.plot.plugins.push({init:function(u){u.hooks.processDatapoints.push(function(b,m,v){if(null!=m.stack&&!1!==m.stack){var k;b=b.getData();for(var f=null,h=0;h<b.length&&m!=b[h];++h)b[h].stack==m.stack&&(f=b[h]);if(k=f){b=v.pointsize;f=v.points;h=k.datapoints.pointsize;k=k.datapoints.points;var c=[],q,a,r,l,p,t,w=m.lines.show;l=m.bars.horizontal;var u=2<b&&(l?v.format[2].x:v.format[2].y);m=w&&m.lines.steps;r=!0;for(var x=l?1:0,n=l?0:1,d=0,g=0,e;!(d>=f.length);){e=c.length;if(null==f[d]){for(a=
0;a<b;++a)c.push(f[d+a]);d+=b}else if(g>=k.length){if(!w)for(a=0;a<b;++a)c.push(f[d+a]);d+=b}else if(null==k[g]){for(a=0;a<b;++a)c.push(null);r=!0;g+=h}else{q=f[d+x];a=f[d+n];l=k[g+x];p=k[g+n];t=0;if(q==l){for(a=0;a<b;++a)c.push(f[d+a]);c[e+n]+=p;t=p;d+=b;g+=h}else if(q>l){if(w&&0<d&&null!=f[d-b]){r=a+(f[d-b+n]-a)*(l-q)/(f[d-b+x]-q);c.push(l);c.push(r+p);for(a=2;a<b;++a)c.push(f[d+a]);t=p}g+=h}else{if(r&&w){d+=b;continue}for(a=0;a<b;++a)c.push(f[d+a]);w&&0<g&&null!=k[g-h]&&(t=p+(k[g-h+n]-p)*(q-l)/
(k[g-h+x]-l));c[e+n]+=t;d+=b}r=!1;e!=c.length&&u&&(c[e+2]+=t)}if(m&&e!=c.length&&0<e&&null!=c[e]&&c[e]!=c[e-b]&&c[e+1]!=c[e-b+1]){for(a=0;a<b;++a)c[e+b+a]=c[e+a];c[e+1]=c[e-b+1]}}v.points=c}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})})(jQuery);