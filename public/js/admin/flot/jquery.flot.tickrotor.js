(function(r){r.plot.plugins.push({init:function(v){var b=[],p,t=!1,h,n,f;v.hooks.draw.push(function(c,k){var e;if(!t){var g=c.getAxes().xaxis.options;if(void 0!==g.rotateTicks&&(h=parseInt(g.rotateTicks,10),!(h.toString()!=g.rotateTicks||0==h||180<=h))){n=h*Math.PI/180;f=90<h?Math.PI-n:Math.PI/2-n;(p=g.rotateTicksFont)||(p=r(".tickLabel").css("font"));p||(p="smaller sans-serif");var a,l=0,m=0,q=0,u=0;e=c.getAxes().xaxis;b=c.getAxes().xaxis.ticks;e.rotatedTicks=b;g.ticks=[];for(var d=0;d<b.length;d++)a=
r('<span style="font:'+p+'">'+b[d].label+"</span>"),c.getPlaceholder().append(a),b[d].height=a.outerHeight(!0),b[d].width=a.outerWidth(!0),a.remove(),b[d].height>m&&(m=b[d].height),b[d].width>l&&(l=b[d].width),a=b[d],90<h?(a=Math.round(c.getPlotOffset().left+e.p2c(a.v))-Math.ceil(Math.cos(f)*a.height)-Math.ceil(Math.cos(f)*a.width),a<q&&(q=a)):(a=Math.round(c.getPlotOffset().left+e.p2c(a.v))+Math.ceil(Math.cos(f)*a.height)+Math.ceil(Math.cos(f)*a.width),a>u&&(u=a));90<h?(e=n-Math.PI/2,g.labelHeight=
Math.ceil(Math.sin(e)*l)+Math.ceil(Math.sin(e)*m)):(e=Math.PI/2-n,g.labelHeight=Math.ceil(Math.sin(n)*l)+Math.ceil(Math.sin(e)*m));0>q&&(c.getAxes().yaxis.options.labelWidth=-1*q);t=!0;c.setupGrid();c.draw()}}else if(0!=b.length)for(e=c.getAxes().xaxis,g=e.box,d=0;d<b.length;d++)a=b[d],a.label&&(k.save(),k.font=p,90>=h?(l=-Math.ceil(Math.cos(f)*a.height),m=Math.ceil(Math.sin(f)*a.height),k.translate(Math.round(c.getPlotOffset().left+e.p2c(a.v))+l,g.top+g.padding+c.getOptions().grid.labelMargin+m),
k.rotate(n)):(l=Math.ceil(Math.cos(f)*a.height)-Math.ceil(Math.cos(f)*a.width),m=Math.ceil(Math.sin(f)*a.width)+Math.ceil(Math.sin(f)*a.height),k.translate(Math.round(c.getPlotOffset().left+e.p2c(a.v)+l),g.top+g.padding+c.getOptions().grid.labelMargin+m),k.rotate(-f)),k.fillText(a.label,0,0),k.restore())})},options:{},name:"tickRotor",version:"1.0"})})(jQuery);